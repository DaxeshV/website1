<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Android Advanced &#8211; Androhub</title>
	<atom:link href="http://www.androhub.com/category/android-advanced/feed/" rel="self" type="application/rss+xml" />
	<link>http://www.androhub.com</link>
	<description>Meet Professor Dro!d !!</description>
	<lastBuildDate>Thu, 21 Dec 2017 20:24:53 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.5.12</generator>
<site xmlns="com-wordpress:feed-additions:1">113004364</site>	<item>
		<title>Authenticate Using Google Sign-In on Android</title>
		<link>http://www.androhub.com/authenticate-using-google-sign-in-on-android/</link>
		<comments>http://www.androhub.com/authenticate-using-google-sign-in-on-android/#respond</comments>
		<pubDate>Thu, 21 Dec 2017 20:24:53 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[add google sign in]]></category>
		<category><![CDATA[authenticate google sign in]]></category>
		<category><![CDATA[generate google_services.json file]]></category>
		<category><![CDATA[get configuration file]]></category>
		<category><![CDATA[get sha key]]></category>
		<category><![CDATA[google revoke access]]></category>
		<category><![CDATA[google sign in]]></category>
		<category><![CDATA[google sign out]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1386</guid>
		<description><![CDATA[<p>Hello to all, today we are going to learn how to implement Google Sign In authentication in our Android app and let user do Sign In in single click and do Sign Out also. Google Sign-In lets users sign in to your Android app with their existing Google account and get their profile information like [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/authenticate-using-google-sign-in-on-android/">Authenticate Using Google Sign-In on Android</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>Hello to all, today we are going to learn how to implement <strong><a href="https://developers.google.com/identity/sign-in/android/start-integrating" target="_blank">Google Sign In</a></strong> authentication in our Android app and let user do Sign In in single click and do Sign Out also.</p>
<p>Google Sign-In lets users sign in to your Android app with their existing Google account and get their profile information like name, email, profile pic and other details.</p>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_19205" width="602" height="339" src="https://www.youtube.com/embed/5da4nmeaVMw?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<h2 id="ui_controls">Add the Google Service Plugin</h2>
<p>1. Add the dependency to your<strong> project-level build.gradle</strong>:</p><pre class="crayon-plain-tag">classpath 'com.google.gms:google-services:3.1.0'</pre><p>
2. Add the plugin to your <strong>app-level build.gradle</strong>:</p><pre class="crayon-plain-tag">apply plugin: 'com.google.gms.google-services'</pre><p>
<h2 id="ui_controls">Add Google Play Services</h2>
<p>In your <strong>app-level build.gradle</strong> file, declare Google Play Services as a dependency:</p><pre class="crayon-plain-tag">compile 'com.google.android.gms:play-services-auth:11.6.2'</pre><p>
Finally your <strong>app-level build.gradle</strong> will look like below:</p><pre class="crayon-plain-tag">apply plugin: 'com.android.application'

android {
    compileSdkVersion 26
    defaultConfig {
        applicationId "com.android_google_sign_in_demo"
        minSdkVersion 14
        targetSdkVersion 26
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation 'com.android.support:appcompat-v7:26.1.0'

    //dependency for google sign in
    compile 'com.google.android.gms:play-services-auth:11.6.2'

    //dependency to load image url over image view
    implementation 'com.squareup.picasso:picasso:2.5.2'
}
//plugin for google services
apply plugin: 'com.google.gms.google-services'</pre><p>
<strong>Since we will load user profile pic so we will be needing <a href="http://square.github.io/picasso/" target="_blank">Picasso</a> dependency also.</strong></p>
<h2 id="ui_controls">Get a Configuration File</h2>
<p>To get the configuration file go to this <span style="text-decoration: underline;"><strong><a href="https://developers.google.com/identity/sign-in/android/start-integrating" target="_blank">link</a></strong></span> and follow the Video tutorial given above.</p>
<p>Now after getting configuration file, copy and paste the <strong>.json</strong> file under <strong>app</strong> directory and follow the below steps to Add Google Sign In in your app.</p>
<p><b>1</b>. Create an xml layout naming <em>activity_main.xml</em> and add the below code to it. In this layout i have taken two Button one is for inbuilt or default <a href="https://developers.google.com/android/reference/com/google/android/gms/common/SignInButton" target="_blank">Google Sign In Button</a> and second one custom Sign In Button and a TextView and ImageView to display user information.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp"
    tools:context="com.android_google_sign_in_demo.MainActivity"&gt;

    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/default_sign_in_button"
        android:textColor="@color/colorPrimary"
        android:textSize="14sp" /&gt;

    &lt;!-- add default google sign in button
    type of button size : icon_only, wide and standard --&gt;
    &lt;com.google.android.gms.common.SignInButton
        android:id="@+id/default_google_sign_in_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        app:buttonSize="wide" /&gt;

    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:text="@string/custom_sign_in_button"
        android:textColor="@color/colorPrimary"
        android:textSize="14sp" /&gt;

    &lt;!-- custom google sign in button --&gt;
    &lt;Button
        android:id="@+id/custom_sign_in_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:background="@color/colorPrimary"
        android:onClick="customGoogleSignIn"
        android:text="@string/sign_in"
        android:textColor="@android:color/white" /&gt;

    &lt;!-- image view to show user profile image --&gt;
    &lt;ImageView
        android:id="@+id/user_profile_image_view"
        android:layout_width="120dp"
        android:layout_height="120dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="20dp" /&gt;

    &lt;!-- text view to show user details --&gt;
    &lt;TextView
        android:id="@+id/user_details_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:textColor="@color/colorPrimary"
        android:textSize="15sp" /&gt;

&lt;/LinearLayout&gt;</pre><p>
<b>2</b>. After creating follow the below steps to Add Google Sign-In and Sign-Out :</p>
<ul>
<li><span style="text-decoration: underline;"><strong>Configure Google Sign-In</strong></span> : Configure Google Sign-In to request users&#8217; ID and basic profile information, create a <strong><a href="https://developers.google.com/android/reference/com/google/android/gms/auth/api/signin/GoogleSignInOptions.Builder.html#GoogleSignInOptions.Builder()" target="_blank">GoogleSignInOptions</a></strong> object with the <strong>DEFAULT_SIGN_IN</strong> parameter. To request users&#8217; email addresses as well, create the <a href="https://developers.google.com/android/reference/com/google/android/gms/auth/api/signin/GoogleSignInOptions.Builder.html#GoogleSignInOptions.Builder()" target="_blank"><strong>GoogleSignInOptions</strong></a> object with the <strong>requestEmail</strong> option. After that create a <strong>GoogleSignInClient</strong> object with the options you specified.</li>
</ul>
<pre class="crayon-plain-tag">private void configureGoogleSignIn() {
        // Configure sign-in to request the user's ID, email address, and basic
        // profile. ID and basic profile are included in DEFAULT_SIGN_IN.
        GoogleSignInOptions gso = new GoogleSignInOptions
                .Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
                .requestEmail()//request email id
                .build();

        // Build a GoogleSignInClient with the options specified by gso.
        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);
    }</pre>
<ul>
<li>On Click of button call the below method to start Google Sign-In using <strong>getSignInIntent()</strong>.</li>
</ul>
<pre class="crayon-plain-tag">private void doGoogleSignIn() {
        Intent signInIntent = mGoogleSignInClient.getSignInIntent();
        startActivityForResult(signInIntent, RC_SIGN_IN);//pass the declared request code here
    }</pre>
<div id="attachment_1388" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1388" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_selection_dialog.jpg?resize=576%2C1024" alt="Account Selection Dialog" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_selection_dialog.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_selection_dialog.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_selection_dialog.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_selection_dialog.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Account Selection Dialog</p></div>
<p>&nbsp;</p>
<ul>
<li>After the user signs in, you can get a <strong><a href="https://developers.google.com/android/reference/com/google/android/gms/auth/api/signin/GoogleSignInAccount.html" target="_blank">GoogleSignInAccount</a></strong> object for the user in the activity&#8217;s <strong>onActivityResult</strong> method.</li>
</ul>
<pre class="crayon-plain-tag">@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // Result returned from launching the Intent from GoogleSignInClient.getSignInIntent(...);
        if (requestCode == RC_SIGN_IN) {
            // The Task returned from this call is always completed, no need to attach
            // a listener.
            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);
            //method to handle google sign in result
            handleSignInResult(task);
        }
    }</pre>
The <strong>GoogleSignInAccount</strong> object contains information about the signed-in user, such as the user&#8217;s name.<br />
<pre class="crayon-plain-tag">private void handleSignInResult(Task&lt;GoogleSignInAccount&gt; completedTask) {
        try {
            GoogleSignInAccount account = completedTask.getResult(ApiException.class);

            // Signed in successfully, show authenticated UI.
            getProfileInformation(account);

            //show toast
            Toast.makeText(this, "Google Sign In Successful.", Toast.LENGTH_SHORT).show();

        } catch (ApiException e) {
            // The ApiException status code indicates the detailed failure reason.
            // Please refer to the GoogleSignInStatusCodes class reference for more information.
            Log.e(TAG, "signInResult:failed code=" + e.getStatusCode());

            //show toast
            Toast.makeText(this, "Failed to do Sign In : " + e.getStatusCode(), Toast.LENGTH_SHORT).show();

            //update Ui for this
            getProfileInformation(null);
        }
    }</pre>
<ul>
<li><span style="text-decoration: underline;"><strong>Get Profile Information</strong></span> : Use the <strong>GoogleSignIn.getLastSignedInAccount</strong> method or <strong>account</strong> instance  to request profile information for the currently signed in user.</li>
</ul>
<pre class="crayon-plain-tag">GoogleSignInAccount acct = GoogleSignIn.getLastSignedInAccount(this);
if (acct != null) {

            //user display name
            String personName = acct.getDisplayName();

            //user first name
            String personGivenName = acct.getGivenName();

            //user last name
            String personFamilyName = acct.getFamilyName();

            //user email id
            String personEmail = acct.getEmail();

            //user unique id
            String personId = acct.getId();

            //user profile pic
            Uri personPhoto = acct.getPhotoUrl();

            //show the user details
            userDetailLabel.setText("ID : " + personId + "\nDisplay Name : " + personName + "\nFull Name : " + personGivenName + " " + personFamilyName + "\nEmail : " + personEmail);

            //show the user profile pic
            Picasso.with(this).load(personPhoto).fit().placeholder(R.mipmap.ic_launcher_round).into(userProfileImageView);

            //change the text of Custom Sign in button to sign out
            customSignInButton.setText(getResources().getString(R.string.sign_out));

            //show the label and image view
            userDetailLabel.setVisibility(View.VISIBLE);
            userProfileImageView.setVisibility(View.VISIBLE);

        }</pre>
<div id="attachment_1387" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1387" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_information.jpg?resize=576%2C1024" alt="Get User Profile Information" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_information.jpg?resize=576%2C1024 576w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_information.jpg?resize=169%2C300 169w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_information.jpg?resize=768%2C1365 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/account_information.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Get User Profile Information</p></div>
<p>&nbsp;</p>
<ul>
<li><span style="text-decoration: underline;"><strong>Sign Out</strong> </span>: Call the below method to do Sign Out.This code clears which account is connected to the app. To sign in again, the user must choose their account again.</li>
</ul>
<pre class="crayon-plain-tag">private void doGoogleSignOut() {
        mGoogleSignInClient.signOut()
                .addOnCompleteListener(this, new OnCompleteListener&lt;Void&gt;() {
                    @Override
                    public void onComplete(@NonNull Task&lt;Void&gt; task) {
                        Toast.makeText(MainActivity.this, "Google Sign Out done.", Toast.LENGTH_SHORT).show();
                        revokeAccess();
                    }
                });
    }</pre>
<ul>
<li><span style="text-decoration: underline;"><strong>Disconnect Accounts</strong></span> :  It is highly recommended that you provide users that signed in with Google the ability to disconnect their Google account from your app. If the user deletes their account, you must delete the information that your app obtained from the Google APIs.</li>
</ul>
<pre class="crayon-plain-tag">private void revokeAccess() {
        mGoogleSignInClient.revokeAccess()
                .addOnCompleteListener(this, new OnCompleteListener&lt;Void&gt;() {
                    @Override
                    public void onComplete(@NonNull Task&lt;Void&gt; task) {
                        Toast.makeText(MainActivity.this, "Google access revoked.", Toast.LENGTH_SHORT).show();
                        getProfileInformation(null);
                    }
                });
    }</pre>
<ul>
<li><span style="text-decoration: underline;"><strong>Silent Sign In</strong></span> : If some user is already authenticates with your app and to check that put the below code in your activity onStart method.</li>
</ul>
<pre class="crayon-plain-tag">@Override
    protected void onStart() {
        super.onStart();
        //SILENT SIGN IN
        // Check for existing Google Sign In account, if the user is already signed in
        // the GoogleSignInAccount will be non-null.
        GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);
        //update the UI if user has already sign in with the google for this app
        getProfileInformation(account);
    }</pre>
<b>3</b>. Full MainActivity code:<br />
<pre class="crayon-plain-tag">package com.android_google_sign_in_demo;

import android.content.Intent;
import android.net.Uri;
import android.support.annotation.NonNull;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.auth.api.signin.GoogleSignIn;
import com.google.android.gms.auth.api.signin.GoogleSignInAccount;
import com.google.android.gms.auth.api.signin.GoogleSignInClient;
import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
import com.google.android.gms.common.SignInButton;
import com.google.android.gms.common.api.ApiException;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.tasks.OnCompleteListener;
import com.google.android.gms.tasks.Task;
import com.squareup.picasso.Picasso;

public class MainActivity extends AppCompatActivity {

    private static final String TAG = MainActivity.class.getSimpleName();

    private static final int RC_SIGN_IN = 111;//google sign in request code

    private GoogleSignInClient mGoogleSignInClient;//google sign in client

    private SignInButton defaultSignInButton;
    private Button customSignInButton;

    private TextView userDetailLabel;
    private ImageView userProfileImageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        findViews();
        configureGoogleSignIn();
    }

    /**
     * find all views and implement click event over default sign in button
     */
    private void findViews() {

        defaultSignInButton = findViewById(R.id.default_google_sign_in_button);
        customSignInButton = findViewById(R.id.custom_sign_in_button);

        userDetailLabel = findViewById(R.id.user_details_label);
        userProfileImageView = findViewById(R.id.user_profile_image_view);

        defaultSignInButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                doSignInSignOut();
            }
        });
    }

    /**
     * configure google sign in
     */
    private void configureGoogleSignIn() {
        // Configure sign-in to request the user's ID, email address, and basic
        // profile. ID and basic profile are included in DEFAULT_SIGN_IN.
        GoogleSignInOptions gso = new GoogleSignInOptions
                .Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
                .requestEmail()//request email id
                .build();

        // Build a GoogleSignInClient with the options specified by gso.
        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);
    }

    @Override
    protected void onStart() {
        super.onStart();
        //SILENT SIGN IN
        // Check for existing Google Sign In account, if the user is already signed in
        // the GoogleSignInAccount will be non-null.
        GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);
        //update the UI if user has already sign in with the google for this app
        getProfileInformation(account);
    }

    /**
     * custom sign in button click event
     *
     * @param view custom button
     */
    public void customGoogleSignIn(View view) {
        doSignInSignOut();
    }

    /**
     * method to do Sign In or Sign Out on the basis of account exist or not
     */
    private void doSignInSignOut() {

        //get the last sign in account
        GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);

        //if account doesn't exist do login else do sign out
        if (account == null)
            doGoogleSignIn();
        else
            doGoogleSignOut();
    }

    /**
     * do google sign in
     */
    private void doGoogleSignIn() {
        Intent signInIntent = mGoogleSignInClient.getSignInIntent();
        startActivityForResult(signInIntent, RC_SIGN_IN);//pass the declared request code here
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // Result returned from launching the Intent from GoogleSignInClient.getSignInIntent(...);
        if (requestCode == RC_SIGN_IN) {
            // The Task returned from this call is always completed, no need to attach
            // a listener.
            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);
            //method to handle google sign in result
            handleSignInResult(task);
        }
    }

    /**
     * method to handle google sign in result
     *
     * @param completedTask from google onActivityResult
     */
    private void handleSignInResult(Task&lt;GoogleSignInAccount&gt; completedTask) {
        try {
            GoogleSignInAccount account = completedTask.getResult(ApiException.class);

            // Signed in successfully, show authenticated UI.
            getProfileInformation(account);

            //show toast
            Toast.makeText(this, "Google Sign In Successful.", Toast.LENGTH_SHORT).show();

        } catch (ApiException e) {
            // The ApiException status code indicates the detailed failure reason.
            // Please refer to the GoogleSignInStatusCodes class reference for more information.
            Log.e(TAG, "signInResult:failed code=" + e.getStatusCode());

            //show toast
            Toast.makeText(this, "Failed to do Sign In : " + e.getStatusCode(), Toast.LENGTH_SHORT).show();

            //update Ui for this
            getProfileInformation(null);
        }
    }

    /**
     * method to fetch user profile information from GoogleSignInAccount
     *
     * @param acct googleSignInAccount
     */
    private void getProfileInformation(GoogleSignInAccount acct) {
        //if account is not null fetch the information
        if (acct != null) {

            //user display name
            String personName = acct.getDisplayName();

            //user first name
            String personGivenName = acct.getGivenName();

            //user last name
            String personFamilyName = acct.getFamilyName();

            //user email id
            String personEmail = acct.getEmail();

            //user unique id
            String personId = acct.getId();

            //user profile pic
            Uri personPhoto = acct.getPhotoUrl();

            //show the user details
            userDetailLabel.setText("ID : " + personId + "\nDisplay Name : " + personName + "\nFull Name : " + personGivenName + " " + personFamilyName + "\nEmail : " + personEmail);

            //show the user profile pic
            Picasso.with(this).load(personPhoto).fit().placeholder(R.mipmap.ic_launcher_round).into(userProfileImageView);

            //change the text of Custom Sign in button to sign out
            customSignInButton.setText(getResources().getString(R.string.sign_out));

            //show the label and image view
            userDetailLabel.setVisibility(View.VISIBLE);
            userProfileImageView.setVisibility(View.VISIBLE);

        } else {

            //if account is null change the text back to Sign In and hide the label and image view
            customSignInButton.setText(getResources().getString(R.string.sign_in));
            userDetailLabel.setVisibility(View.GONE);
            userProfileImageView.setVisibility(View.GONE);

        }
    }

    /**
     * method to do google sign out
     * This code clears which account is connected to the app. To sign in again, the user must choose their account again.
     */
    private void doGoogleSignOut() {
        mGoogleSignInClient.signOut()
                .addOnCompleteListener(this, new OnCompleteListener&lt;Void&gt;() {
                    @Override
                    public void onComplete(@NonNull Task&lt;Void&gt; task) {
                        Toast.makeText(MainActivity.this, "Google Sign Out done.", Toast.LENGTH_SHORT).show();
                        revokeAccess();
                    }
                });
    }

    /**
     * DISCONNECT ACCOUNTS
     * method to revoke access from this app
     * call this method after successful sign out
     * &lt;p&gt;
     * It is highly recommended that you provide users that signed in with Google the ability to disconnect their Google account from your app. If the user deletes their account, you must delete the information that your app obtained from the Google APIs
     */
    private void revokeAccess() {
        mGoogleSignInClient.revokeAccess()
                .addOnCompleteListener(this, new OnCompleteListener&lt;Void&gt;() {
                    @Override
                    public void onComplete(@NonNull Task&lt;Void&gt; task) {
                        Toast.makeText(MainActivity.this, "Google access revoked.", Toast.LENGTH_SHORT).show();
                        getProfileInformation(null);
                    }
                });
    }
}</pre>
<b>4</b>. Finally all done , now you can also add Google Sing-In to your Android app.</p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/AndroidGoogleSignInDemo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/authenticate-using-google-sign-in-on-android/">Authenticate Using Google Sign-In on Android</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/authenticate-using-google-sign-in-on-android/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1386</post-id>	</item>
		<item>
		<title>Implementing Android App Shortcuts</title>
		<link>http://www.androhub.com/implementing-android-app-shortcuts/</link>
		<comments>http://www.androhub.com/implementing-android-app-shortcuts/#respond</comments>
		<pubDate>Wed, 20 Dec 2017 11:59:30 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[Android App Shortcuts]]></category>
		<category><![CDATA[android app shortcuts]]></category>
		<category><![CDATA[android O]]></category>
		<category><![CDATA[app shortcuts]]></category>
		<category><![CDATA[disable shortcuts]]></category>
		<category><![CDATA[dynamic shortcuts]]></category>
		<category><![CDATA[enable shortcuts]]></category>
		<category><![CDATA[pinned shortcuts]]></category>
		<category><![CDATA[remove shortcuts]]></category>
		<category><![CDATA[shortcut]]></category>
		<category><![CDATA[static shortcuts]]></category>
		<category><![CDATA[update shortcuts]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1365</guid>
		<description><![CDATA[<p>With the release of Android Nougat 7.1(API level 25) a new features is added i.e. App Shortcuts. App Shortcuts allow the user to access primary actions in your app straight from the launcher, taking the user deep into your application by long pressing on your app icon. Users can also pin these shortcuts to the home [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/implementing-android-app-shortcuts/">Implementing Android App Shortcuts</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>With the release of <span style="text-decoration: underline;"><strong>Android Nougat 7.1(API level 25)</strong></span> a new features is added i.e. <a href="https://developer.android.com/guide/topics/ui/shortcuts.html" target="_blank">App Shortcuts</a>. App Shortcuts allow the user to access primary actions in your app straight from the launcher, taking the user deep into your application by long pressing on your app icon. Users can also pin these shortcuts to the home screen for even quicker access to your app’s primary actions.</p>
<p>You can publish the following types of shortcuts for your app:</p>
<ul>
<li><em><strong>Static shortcuts</strong></em> are defined in a resource file that is packaged into an APK. Therefore, you must wait until you update your entire app to change the details of these static shortcuts.</li>
<li><em><strong>Dynamic shortcuts</strong></em> are published at runtime using the <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html" target="_blank">ShortcutManager</a> API. During runtime, your app can publish, update, and remove its dynamic shortcuts.</li>
<li><em><strong>Pinned shortcuts</strong></em> (<span style="text-decoration: underline;">Android 8.0 (API level 26))</span> are published at runtime and also use the <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html" target="_blank">ShortcutManager</a> API. During runtime, your app can attempt to pin the shortcut, at which time the user receives a confirmation dialog asking their permission to pin the shortcut. The pinned shortcut appears in supported launchers only if the user accepts the pinning request.</li>
</ul>
<p><strong>Note: Users can also create pinned shortcuts themselves by copying your app&#8217;s static and dynamic shortcuts onto the launcher.</strong></p>
<div id="attachment_1376" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1376" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/google_map_app_shortcut.jpg?resize=576%2C1024" alt="Google Map Shortcuts" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/google_map_app_shortcut.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/google_map_app_shortcut.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/google_map_app_shortcut.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/google_map_app_shortcut.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Google Map Shortcuts</p></div>
<p>So today we are going to learn how to implement above mentioned shortcuts in our app and improve user interaction with our app.</p>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_44500" width="602" height="339" src="https://www.youtube.com/embed/bb0xW05SyX0?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<h2 id="ui_controls">Static Shortcuts</h2>
<p>Static shortcuts provides links to some actions within your app and these actions should remain consistent over the lifetime of your app&#8217;s current version. Some examples for whom you can add static shortcuts in your app:</p>
<ol>
<li>Viewing Message Inbox (Send/Received).</li>
<li>Setting an Alarm.</li>
<li>Open call logs (Missed/Received/Dialled).</li>
</ol>
<p>To create Static shortcuts follow the below steps:</p>
<p><b>1</b>. Add the below <strong>meta-data</strong> to your <strong>Launcher</strong> activity in <strong>AndroidManifest.xml</strong>.</p><pre class="crayon-plain-tag">&lt;meta-data android:name="android.app.shortcuts"
                android:resource="@xml/shortcuts" /&gt;</pre><p>
After adding your AndroidManifest will look like this:</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android_app_shortcuts_demo"&gt;

    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"&gt;
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;

                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
            &lt;meta-data android:name="android.app.shortcuts"
                android:resource="@xml/shortcuts" /&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre><p>
<b>2</b>. After adding meta-data you will be getting error for @xml/shortcuts. So for that create a new resource file:  <span style="text-decoration: underline;"><strong>res/xml/shortcuts.xml.</strong></span></p>
<div id="attachment_1366" style="width: 612px" class="wp-caption aligncenter"><img class="size-large wp-image-1366" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/android_resource_directory.jpg?resize=602%2C376" alt="Create new Android Resource Directory" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/android_resource_directory.jpg?resize=1024%2C640 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/android_resource_directory.jpg?resize=300%2C188 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/android_resource_directory.jpg?resize=768%2C480 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/android_resource_directory.jpg?w=1440 1440w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/android_resource_directory.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Create new Android Resource Directory</p></div>
<p>&nbsp;</p>
<div id="attachment_1368" style="width: 612px" class="wp-caption aligncenter"><img class="size-large wp-image-1368" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/select_xml.jpg?resize=602%2C376" alt="Select XML from Dropdown" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/select_xml.jpg?resize=1024%2C640 1024w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/select_xml.jpg?resize=300%2C188 300w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/select_xml.jpg?resize=768%2C480 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/select_xml.jpg?w=1440 1440w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/select_xml.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Select XML from Dropdown</p></div>
<p>&nbsp;</p>
<p>In this new resource file, add a <strong>&lt;shortcuts&gt;</strong> root element, which contains a list of <strong>&lt;shortcut&gt;</strong> elements. Each <strong>&lt;shortcut&gt;</strong> element, in turn, contains information about a static shortcut, including its icon, its description labels, and the intents that it launches within the app:</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shortcuts xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"&gt;
    &lt;shortcut
        android:enabled="true"
        android:icon="@drawable/ic_message"
        android:shortcutDisabledMessage="@string/message_disabled_message"
        android:shortcutId="message"
        android:shortcutLongLabel="@string/message_shortcut_long_label"
        android:shortcutShortLabel="@string/message_shortcut_short_label"
        tools:targetApi="n_mr1"&gt;

        &lt;!--  i have declared main activity also to maintain back stack --&gt;
        &lt;intent
            android:action="android.intent.action.VIEW"
            android:targetClass="com.android_app_shortcuts_demo.MainActivity"
            android:targetPackage="com.android_app_shortcuts_demo" /&gt;

        &lt;!-- this activity will open when this shortcut clicked --&gt;
        &lt;intent
            android:action="android.intent.action.VIEW"
            android:targetClass="com.android_app_shortcuts_demo.MessageActivity"
            android:targetPackage="com.android_app_shortcuts_demo" /&gt;

        &lt;!-- If your shortcut is associated with multiple intents, include them
             here. The last intent in the list determines what the user sees when
             they launch this shortcut. --&gt;
        &lt;categories android:name="android.shortcut.conversation" /&gt;
    &lt;/shortcut&gt;
    &lt;!-- Specify more shortcuts here. --&gt;
&lt;/shortcuts&gt;</pre><p>
I have added two intent under one shortcut one after other to maintain navigation. <strong>The last intent declared in &lt;shortcut&gt; tag will open when clicked on shortcut.</strong></p>
<div id="attachment_1374" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1374" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/static_shortcut.jpg?resize=576%2C1024" alt="Static Shortcut" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/static_shortcut.jpg?resize=576%2C1024 576w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/static_shortcut.jpg?resize=169%2C300 169w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/static_shortcut.jpg?resize=768%2C1365 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/static_shortcut.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Static Shortcut</p></div>
<p><strong>Check this link for <a href="https://commondatastorage.googleapis.com/androiddevelopers/shareables/design/app-shortcuts-design-guidelines.pdf" target="_blank">App Shortcuts design guidelines</a>.</strong></p>
<h2 id="ui_controls">Dynamic Shortcuts</h2>
<p>Dynamic shortcuts provides links to specific, context-sensitive actions within your app. These actions can change between uses of your app, and they can change even while your app is running.</p>
<p>Some examples for whom you can add static shortcuts in your app:</p>
<ol>
<li>Calling a specific person.</li>
<li>Navigating to specific location.</li>
<li>Sending message to specific person, etc.</li>
</ol>
<p>To implement Dynamic shortcuts we have to use  <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html" target="_blank">ShortcutManager</a> API. These API provide following methods:</p>
<ul>
<li><strong>Publish:</strong> Use <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#setDynamicShortcuts(java.util.List&lt;android.content.pm.ShortcutInfo&gt;)" target="_blank"><strong>setDynamicShortcuts()</strong></a> to redefine the entire list of dynamic shortcuts, or use <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#addDynamicShortcuts(java.util.List&lt;android.content.pm.ShortcutInfo&gt;)" target="_blank"><strong>addDynamicShortcuts()</strong></a> to append an existing list of dynamic shortcuts.</li>
</ul>
<pre class="crayon-plain-tag">//get Shortcut manager
        ShortcutManager shortcutManager = getSystemService(ShortcutManager.class);

        //Add Compose Email Shortcut
        ShortcutInfo composeEmail = new ShortcutInfo.Builder(this, "compose_email")//add unique id
                .setShortLabel("Compose Email")//set short label
                .setLongLabel("Compose email in single tap")//set long label
                .setDisabledMessage("Compose email is disabled")//disabled message shown when shortcut is disabled
                .setIcon(Icon.createWithResource(this, R.drawable.ic_email))//set icon
                .setIntent(new Intent(Intent.ACTION_SENDTO,
                        Uri.parse("mailto:surender@androhub.com")))//set intent : here i am opening Mail app to send email to an Email ID
                .build();

        //NOTE : You can add more shortcuts here according to your requirement

        if (shortcutManager != null)
            shortcutManager.setDynamicShortcuts(Arrays.asList(composeEmail));//finally add all the created shortcut</pre>
<div id="attachment_1380" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1380 size-large" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/app_shortcuts.jpg?resize=576%2C1024" alt="Static and Dynamic Shortcuts" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/app_shortcuts.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/app_shortcuts.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/app_shortcuts.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/app_shortcuts.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Static and Dynamic Shortcuts</p></div>
<p>&nbsp;</p>
<ul>
<li><strong>Update</strong>: Use the <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#updateShortcuts(java.util.List&lt;android.content.pm.ShortcutInfo&gt;)" target="_blank"><strong>updateShortcuts()</strong> </a>method to update single or list of dynamic shortcuts.</li>
</ul>
<pre class="crayon-plain-tag">//if shortcut id is compose_email update the shortcut
                            ShortcutManager shortcutManager = getSystemService(ShortcutManager.class);

                            ShortcutInfo composeEmail = new ShortcutInfo.Builder(MainActivity.this, getShortcutId)//pass the same shortcut id
                                    .setShortLabel("Compose Email")
                                    .setLongLabel("Compose email in single tap")
                                    .setIcon(Icon.createWithResource(MainActivity.this, R.drawable.ic_web))//i am only updating icon of the shortcut
                                    .setIntent(new Intent(Intent.ACTION_SENDTO,
                                            Uri.parse("mailto:surender@androhub.com")))
                                    .build();

                            if (shortcutManager != null) {
                                //finally update shortcuts and pass the created shortcut
                                shortcutManager.updateShortcuts(Arrays.asList(composeEmail));

                                Toast.makeText(MainActivity.this, "Shortcut updated.", Toast.LENGTH_SHORT).show();

                                //NOTE : You can update multiple shortcuts also
                            }</pre>
<div id="attachment_1372" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1372 size-large" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/updated_shortcut.jpg?resize=576%2C1024" alt="Updated Dynamic Shortcut" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/updated_shortcut.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/updated_shortcut.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/updated_shortcut.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/updated_shortcut.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Updated Dynamic Shortcut</p></div>
<p>&nbsp;</p>
<ul>
<li><strong>Remove</strong>: Remove a set of dynamic shortcuts using <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#removeDynamicShortcuts(java.util.List&lt;java.lang.String&gt;)" target="_blank"><strong>removeDynamicShortcuts()</strong></a>, or remove all dynamic shortcuts using <strong><a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#removeAllDynamicShortcuts()" target="_blank">removeAllDynamicShortcuts().</a></strong></li>
</ul>
<pre class="crayon-plain-tag">ShortcutManager shortcutManager = getSystemService(ShortcutManager.class);
        if (shortcutManager != null) {

            //NOTE : remove multiple or single shortcuts then uncomment the below line
            //shortcutManager.removeDynamicShortcuts(Arrays.asList("compose_email","open_website"));//here you have to provide created shortcut IDs you want to remove

            //NOTE : if you want to remove all shortcuts then use the below code
            shortcutManager.removeAllDynamicShortcuts();

            Toast.makeText(MainActivity.this, "Shortcut deleted.", Toast.LENGTH_SHORT).show();
        }</pre>
<ul>
<li><strong>Disable</strong>: Disable a set of dynamic pinned shortcuts or single dynamic pinned shortcut using <strong><a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#disableShortcuts(java.util.List&lt;java.lang.String&gt;)" target="_blank">disableShortcuts().</a> </strong>To disable shortcuts we have to pass the ID of the shortcut.</li>
</ul>
<pre class="crayon-plain-tag">ShortcutManager shortcutManager =
                getSystemService(ShortcutManager.class);
        if (shortcutManager!=null) {
            //you can disable created shortcuts by passing ID of shortcut you want to disable
            shortcutManager.disableShortcuts(Arrays.asList("compose_email"));

        }</pre>
<div id="attachment_1377" style="width: 612px" class="wp-caption aligncenter"><img class="wp-image-1377 size-large" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_shortcut.jpg?resize=602%2C1004" alt="Disabled Dynamic Shortcut" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_shortcut.jpg?resize=614%2C1024 614w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_shortcut.jpg?resize=180%2C300 180w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_shortcut.jpg?w=768 768w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Disabled Dynamic Shortcut</p></div>
<p>&nbsp;</p>
<div id="attachment_1370" style="width: 612px" class="wp-caption aligncenter"><img class="size-large wp-image-1370" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/click_event_on_disabled_shortcut.jpg?resize=602%2C1004" alt="Click event on Disabled Dynamic Shortcut" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/click_event_on_disabled_shortcut.jpg?resize=614%2C1024 614w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/click_event_on_disabled_shortcut.jpg?resize=180%2C300 180w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/click_event_on_disabled_shortcut.jpg?w=768 768w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Click event on Disabled Dynamic Shortcut</p></div>
<p>&nbsp;</p>
<div id="attachment_1379" style="width: 612px" class="wp-caption aligncenter"><img class="size-large wp-image-1379" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_dyanmic_shortcut.jpg?resize=602%2C1004" alt="After disabling Dynamic Shortcut" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_dyanmic_shortcut.jpg?resize=614%2C1024 614w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_dyanmic_shortcut.jpg?resize=180%2C300 180w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/disabled_dyanmic_shortcut.jpg?w=768 768w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">After disabling Dynamic Shortcut (Disabled shortcut not showing in Shortcut List)</p></div>
<ul>
<li><strong>Enable</strong>: Enable a set of dynamic pinned shortcuts or single dynamic pinned shortcut using <strong><a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#enableShortcuts(java.util.List&lt;java.lang.String&gt;)" target="_blank">enableShortcuts().</a> </strong>To enable shortcuts we have to pass the ID of the shortcut.</li>
</ul>
<pre class="crayon-plain-tag">ShortcutManager shortcutManager =
                getSystemService(ShortcutManager.class);
        if (shortcutManager!=null) {
            //you can enable created shortcuts by passing ID of shortcut you want to enable
            shortcutManager.enableShortcuts(Arrays.asList("compose_email"));

        }</pre>
<div id="attachment_1373" style="width: 612px" class="wp-caption aligncenter"><img class="size-large wp-image-1373" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/drag_drop_shortcut.jpg?resize=602%2C1004" alt="Enabled Dynamic Shortcut" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/drag_drop_shortcut.jpg?resize=614%2C1024 614w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/drag_drop_shortcut.jpg?resize=180%2C300 180w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/drag_drop_shortcut.jpg?w=768 768w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Enabled Dynamic Shortcut</p></div>
<h2 id="ui_controls">Pinned Shortcuts</h2>
<p>On <span style="text-decoration: underline;"><strong>Android 8.0 (API level 26)</strong></span> and higher, you can create pinned shortcuts. Unlike static and dynamic shortcuts, pinned shortcuts appear in supported launchers as separate icons.</p>
<p>To pin a shortcut to a supported launcher using your app, follow the below steps:</p>
<ol>
<li>Use <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#isRequestPinShortcutSupported()" target="_blank"><strong>isRequestPinShortcutSupported()</strong></a> to verify that the device&#8217;s default launcher supports in-app pinning of shortcuts or not.</li>
<li>Create a <a href="https://developer.android.com/reference/android/content/pm/ShortcutInfo.html" target="_blank">ShortcutInfo</a> object in one of two ways, depending on whether the shortcut already exists:<strong>=&gt;</strong> If the shortcut already exists, create a <a href="https://developer.android.com/reference/android/content/pm/ShortcutInfo.html" target="_blank">ShortcutInfo</a> object that contains only the existing shortcut&#8217;s ID. The system finds and pins all other information related to the shortcut automatically.<br />
<strong>=&gt;</strong> If you&#8217;re pinning a new shortcut, create a <a href="https://developer.android.com/reference/android/content/pm/ShortcutInfo.html" target="_blank">ShortcutInfo</a> object that contains an ID, an intent, and a short label for the new shortcut.</li>
<li>Attempt to pin the shortcut to the device&#8217;s launcher by calling <a href="https://developer.android.com/reference/android/content/pm/ShortcutManager.html#requestPinShortcut(android.content.pm.ShortcutInfo, android.content.IntentSender)" target="_blank"><strong>requestPinShortcut()</strong></a>. During this process, you can pass in a <a href="https://developer.android.com/reference/android/app/PendingIntent.html" target="_blank">PendingIntent</a> object, which notifies your app only when the shortcut is pinned successfully.</li>
</ol>
<p><strong>Note: If the user doesn&#8217;t allow the shortcut to be pinned to the launcher, your app doesn&#8217;t receive a callback.</strong></p>
<p>You can also remove, update pinned shortcuts.</p>
<div id="attachment_1375" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1375" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut_dialog.jpg?resize=576%2C1024" alt="Prompt to add Pinned Shortcut to Home Screen" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut_dialog.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut_dialog.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut_dialog.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut_dialog.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Prompt to add Pinned Shortcut to Home Screen</p></div>
<p>&nbsp;</p>
<div id="attachment_1369" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1369" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut.jpg?resize=576%2C1024" alt="Pinned Shortcut added to Home Screen" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/12/pinned_shortcut.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Pinned Shortcut added to Home Screen</p></div>
<p>&nbsp;</p><pre class="crayon-plain-tag">ShortcutManager mShortcutManager =
                getSystemService(ShortcutManager.class);

        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {
            //check if device supports Pin Shortcut or not
            if (mShortcutManager != null &amp;&amp; mShortcutManager.isRequestPinShortcutSupported()) {
                // Assumes there's already a shortcut with the ID "open_website".
                // The shortcut must be enabled.
                ShortcutInfo pinShortcutInfo =
                        new ShortcutInfo.Builder(MainActivity.this, "open_website").build();

                // Create the PendingIntent object only if your app needs to be notified
                // that the user allowed the shortcut to be pinned. Note that, if the
                // pinning operation fails, your app isn't notified. We assume here that the
                // app has implemented a method called createShortcutResultIntent() that
                // returns a broadcast intent.
                Intent pinnedShortcutCallbackIntent =
                        mShortcutManager.createShortcutResultIntent(pinShortcutInfo);

                // Configure the intent so that your app's broadcast receiver gets
                // the callback successfully.
                PendingIntent successCallback = PendingIntent.getBroadcast(MainActivity.this, 0,
                        pinnedShortcutCallbackIntent, 0);

                //finally ask user to add the shortcut to home screen
                mShortcutManager.requestPinShortcut(pinShortcutInfo,
                        successCallback.getIntentSender());
            }
        }</pre><p>
<h2>Things to know about App Shortcuts</h2>
<ol>
<li>Publish only <strong>four</strong> shortcuts including static and dynamic.</li>
<li><strong>Short description</strong> length of a shortcut should be of <strong>10</strong> characters and <strong>Long description</strong> should be of <strong>25</strong> characters.</li>
</ol>
<h2 id="ui_controls">Full Source</h2>
<p><b>1</b>. Open<em> string.xml</em> and add the below strings to it. We will use this strings in app.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Android App Shortcuts Demo&lt;/string&gt;

    &lt;string name="message_shortcut_short_label"&gt;Open Messages&lt;/string&gt;
    &lt;string name="message_shortcut_long_label"&gt;See your all messages in one click&lt;/string&gt;
    &lt;string name="message_disabled_message"&gt;Messages are disabled for now&lt;/string&gt;
    &lt;string name="message_activity"&gt;Message Activity&lt;/string&gt;
    &lt;string name="update_dynamic_shortcuts"&gt;Update Dynamic Shortcuts&lt;/string&gt;
    &lt;string name="add_dynamic_shortcuts"&gt;Add Dynamic Shortcuts&lt;/string&gt;
    &lt;string name="delete_dynamic_shortcuts"&gt;Delete Dynamic Shortcuts&lt;/string&gt;
    &lt;string name="add_pinned_shortcuts"&gt;Add Pinned Shortcuts&lt;/string&gt;
    &lt;string name="dynamic_shortcut"&gt;Dynamic Shortcut&lt;/string&gt;
    &lt;string name="pinned_shortcut"&gt;Pinned Shortcut&lt;/string&gt;

&lt;/resources&gt;</pre><p>
<b>2</b>. Open <em>MainActivity.java</em> and add the below code to it. This class contains all three types of Shortcuts.</p><pre class="crayon-plain-tag">package com.android_app_shortcuts_demo;

import android.annotation.TargetApi;
import android.app.PendingIntent;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ShortcutInfo;
import android.content.pm.ShortcutManager;
import android.graphics.drawable.Icon;
import android.net.Uri;
import android.os.Build;
import android.support.annotation.RequiresApi;
import android.support.v7.app.AlertDialog;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

import java.util.Arrays;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void addDynamicShortcuts(View view) {
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
            addDynamicShortcuts();
        }
    }

    //Method to add dynamic shortcuts
    @TargetApi(Build.VERSION_CODES.N_MR1)
    @RequiresApi(api = Build.VERSION_CODES.M)
    private void addDynamicShortcuts() {
        //get Shortcut manager
        ShortcutManager shortcutManager = getSystemService(ShortcutManager.class);

        //Add Compose Email Shortcut
        ShortcutInfo composeEmail = new ShortcutInfo.Builder(this, "compose_email")//add unique id
                .setShortLabel("Compose Email")//set short label
                .setLongLabel("Compose email in single tap")//set long label
                .setDisabledMessage("Compose email is disabled")//disabled message shown when shortcut is disabled
                .setIcon(Icon.createWithResource(this, R.drawable.ic_email))//set icon
                .setIntent(new Intent(Intent.ACTION_SENDTO,
                        Uri.parse("mailto:surender@androhub.com")))//set intent : here i am opening Mail app to send email to an Email ID
                .build();

        ShortcutInfo openWebsite = new ShortcutInfo.Builder(this, "open_website")//add unique id
                .setShortLabel("Open Website")//set short label
                .setLongLabel("Click to see my blog")//set long label
                .setDisabledMessage("You cannot access the link as it is disabled")//disabled message shown when shortcut is disabled
                .setIcon(Icon.createWithResource(this, R.drawable.ic_web))//set icon
                .setIntent(new Intent(Intent.ACTION_VIEW,
                        Uri.parse("http://www.androhub.com")))//set intent : here i am opening browser app to open provided link
                .build();

        //NOTE : You can add more shortcuts here according to your requirement

        if (shortcutManager != null)
            shortcutManager.setDynamicShortcuts(Arrays.asList(composeEmail, openWebsite));//finally add all the created shortcut

    }

    /**
     * method to update dynamic shortcuts
     * @param view of button
     * here in this method an alert dialog will be shown up and user have to enter shortcut id to update the shortcut if required
     */
    @TargetApi(Build.VERSION_CODES.N_MR1)
    @RequiresApi(api = Build.VERSION_CODES.M)
    public void updateDynamicShortcuts(View view) {

        //create alert dialog
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Enter Shortcut Id to update");//set dialog title

        final EditText enterShortcutId = new EditText(this);//create edit text
        builder.setView(enterShortcutId);//add edit text to alert dialog

        //set positive button
        builder.setPositiveButton("Update", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {

                //get the entered shortcut id
                String getShortcutId = enterShortcutId.getText().toString().trim();

                //check shortcut id should not be empty
                if (!getShortcutId.equals("")) {
                    switch (getShortcutId) {
                        case "compose_email":
                            //if shortcut id is compose_email update the shortcut
                            ShortcutManager shortcutManager = getSystemService(ShortcutManager.class);

                            ShortcutInfo composeEmail = new ShortcutInfo.Builder(MainActivity.this, getShortcutId)//pass the same shortcut id
                                    .setShortLabel("Compose Email")
                                    .setLongLabel("Compose email in single tap")
                                    .setIcon(Icon.createWithResource(MainActivity.this, R.drawable.ic_web))//i am only updating icon of the shortcut
                                    .setIntent(new Intent(Intent.ACTION_SENDTO,
                                            Uri.parse("mailto:surender@androhub.com")))
                                    .build();

                            if (shortcutManager != null) {
                                //finally update shortcuts and pass the created shortcut
                                shortcutManager.updateShortcuts(Arrays.asList(composeEmail));

                                Toast.makeText(MainActivity.this, "Shortcut updated.", Toast.LENGTH_SHORT).show();

                                //NOTE : You can update multiple shortcuts also
                            }

                            break;

                        case "open_website":
                            //if shortcut id is open_website update the shortcut
                            ShortcutManager shortcutManager1 = getSystemService(ShortcutManager.class);

                            ShortcutInfo openWebsite = new ShortcutInfo.Builder(MainActivity.this, getShortcutId)
                                    .setShortLabel("Open Website")
                                    .setLongLabel("Click to see my blog")
                                    .setIcon(Icon.createWithResource(MainActivity.this, R.drawable.ic_web))
                                    .setIntent(new Intent(Intent.ACTION_VIEW,
                                            Uri.parse("http://androhub.com")))//I am also changing link
                                    .build();

                            if (shortcutManager1 != null) {

                                //finally update shortcuts and pass the created shortcut
                                shortcutManager1.updateShortcuts(Arrays.asList(openWebsite));

                                Toast.makeText(MainActivity.this, "Shortcut updated.", Toast.LENGTH_SHORT).show();

                                //NOTE : You can update multiple shortcuts also
                            }

                            break;

                        default:
                            //if shortcut id doesn't match show the below toast
                            Toast.makeText(MainActivity.this, "No Shortcut created with " + getShortcutId + " name.", Toast.LENGTH_SHORT).show();
                            break;
                    }
                }
            }
        });
        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {

            }
        });

        //finally show the alert dialog
        AlertDialog alertDialog = builder.create();
        alertDialog.show();

    }

    //method to delete/remove dynamic shortcuts
    @TargetApi(Build.VERSION_CODES.N_MR1)
    @RequiresApi(api = Build.VERSION_CODES.M)
    public void deleteDynamicShortcuts(View view) {
        ShortcutManager shortcutManager = getSystemService(ShortcutManager.class);
        if (shortcutManager != null) {

            //NOTE : remove multiple or single shortcuts then uncomment the below line
            //shortcutManager.removeDynamicShortcuts(Arrays.asList("compose_email","open_website"));//here you have to provide created shortcut IDs you want to remove

            //NOTE : if you want to remove all shortcuts then use the below code
            shortcutManager.removeAllDynamicShortcuts();

            Toast.makeText(MainActivity.this, "Shortcut deleted.", Toast.LENGTH_SHORT).show();
        }

    }


    /**
     * NOTE : Things to know about PINNED Shortcuts
     * 1. PINNED SHORTCUTS only work in Android 8.0
     * 2. To add Pinned Shortcuts you should be having at least one static and dynamic shortcuts created and enabled or you have to create a new one
     * 3. Previously created static or dynamic shortcut ID will be required to create Pinned shortcuts
     */
    /**
     * method to add PINNED SHORTCUTS for the above created shortcuts
     * @param view of button
     */
    @TargetApi(Build.VERSION_CODES.N_MR1)
    @RequiresApi(api = Build.VERSION_CODES.M)
    public void addPinnedShortcuts(View view) {
        ShortcutManager mShortcutManager =
                getSystemService(ShortcutManager.class);

        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {
            //check if device supports Pin Shortcut or not
            if (mShortcutManager != null &amp;&amp; mShortcutManager.isRequestPinShortcutSupported()) {
                // Assumes there's already a shortcut with the ID "open_website".
                // The shortcut must be enabled.
                ShortcutInfo pinShortcutInfo =
                        new ShortcutInfo.Builder(MainActivity.this, "open_website").build();

                // Create the PendingIntent object only if your app needs to be notified
                // that the user allowed the shortcut to be pinned. Note that, if the
                // pinning operation fails, your app isn't notified. We assume here that the
                // app has implemented a method called createShortcutResultIntent() that
                // returns a broadcast intent.
                Intent pinnedShortcutCallbackIntent =
                        mShortcutManager.createShortcutResultIntent(pinShortcutInfo);

                // Configure the intent so that your app's broadcast receiver gets
                // the callback successfully.
                PendingIntent successCallback = PendingIntent.getBroadcast(MainActivity.this, 0,
                        pinnedShortcutCallbackIntent, 0);

                //finally ask user to add the shortcut to home screen
                mShortcutManager.requestPinShortcut(pinShortcutInfo,
                        successCallback.getIntentSender());
            }
        }
    }

    /**
     * method to disable created shortcuts
     */
    @TargetApi(Build.VERSION_CODES.N_MR1)
    @RequiresApi(api = Build.VERSION_CODES.M)
    public void disableShortcuts(){
        ShortcutManager shortcutManager =
                getSystemService(ShortcutManager.class);
        if (shortcutManager!=null) {
            //you can disable created shortcuts by passing ID of shortcut you want to disable
            shortcutManager.disableShortcuts(Arrays.asList("compose_email"));

        }
    }


    /**
     * method to enable created shortcuts
     */
    @TargetApi(Build.VERSION_CODES.N_MR1)
    @RequiresApi(api = Build.VERSION_CODES.M)
    public void enableShortcuts(){
        ShortcutManager shortcutManager =
                getSystemService(ShortcutManager.class);
        if (shortcutManager!=null) {
            //you can enable created shortcuts by passing ID of shortcut you want to enable
            shortcutManager.enableShortcuts(Arrays.asList("compose_email"));

        }
    }



}</pre><p>
<b>3</b>. Open <em>activity_main.xml</em> and add the below layout to it. This layout contains some button to add, update and remove shortcuts.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="10dp"
    tools:context="com.android_app_shortcuts_demo.MainActivity"&gt;

    &lt;TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/dynamic_shortcut"
        android:padding="10dp"
        android:textColor="@color/colorAccent"
        android:textSize="14sp" /&gt;

    &lt;Button
        android:id="@+id/add_dynamic_shortcuts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:background="@color/colorPrimary"
        android:textSize="15sp"
        android:onClick="addDynamicShortcuts"
        android:text="@string/add_dynamic_shortcuts" /&gt;

    &lt;Button
        android:id="@+id/update_dynamic_shortcuts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:background="@color/colorPrimary"
        android:layout_marginTop="10dp"
        android:textSize="15sp"
        android:onClick="updateDynamicShortcuts"
        android:text="@string/update_dynamic_shortcuts" /&gt;

    &lt;Button
        android:id="@+id/delete_dynamic_shortcuts"
        android:layout_width="match_parent"
        android:textSize="15sp"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:background="@color/colorPrimary"
        android:layout_marginTop="10dp"
        android:onClick="deleteDynamicShortcuts"
        android:text="@string/delete_dynamic_shortcuts" /&gt;

    &lt;TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/pinned_shortcut"
        android:padding="10dp"
        android:layout_marginTop="10dp"
        android:textColor="@color/colorAccent"
        android:textSize="14sp" /&gt;

    &lt;Button
        android:id="@+id/add_pinned_shortcuts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="15sp"
        android:textColor="@android:color/white"
        android:background="@color/colorPrimary"
        android:onClick="addPinnedShortcuts"
        android:text="@string/add_pinned_shortcuts" /&gt;


&lt;/LinearLayout&gt;</pre><p>
<b>4</b>. Open <em>AndroidManifest.xml</em> and add the below code to it.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android_app_shortcuts_demo"&gt;

    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"&gt;
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;

                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
            &lt;meta-data android:name="android.app.shortcuts"
                android:resource="@xml/shortcuts" /&gt;
        &lt;/activity&gt;


        &lt;activity android:name=".MessageActivity"
            android:label="@string/message_activity"
            android:parentActivityName=".MainActivity"&gt;

            &lt;!-- Parent activity meta-data to support 4.0 and lower --&gt;
            &lt;meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value=".MainActivity" /&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre><p>
<b>5</b>. Finally all done, now you can also implement App Shortcuts in your app.</p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/AndroidAppShortcutsDemo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/implementing-android-app-shortcuts/">Implementing Android App Shortcuts</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/implementing-android-app-shortcuts/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1365</post-id>	</item>
		<item>
		<title>How to implement Youtube Player Fragment in Android App</title>
		<link>http://www.androhub.com/implement-youtube-player-fragment-android-app/</link>
		<comments>http://www.androhub.com/implement-youtube-player-fragment-android-app/#respond</comments>
		<pubDate>Sun, 12 Nov 2017 06:06:26 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[cardview]]></category>
		<category><![CDATA[google console]]></category>
		<category><![CDATA[play youtube video]]></category>
		<category><![CDATA[radio selection]]></category>
		<category><![CDATA[recyclerview]]></category>
		<category><![CDATA[sha1 key]]></category>
		<category><![CDATA[youtube]]></category>
		<category><![CDATA[youtube base activity]]></category>
		<category><![CDATA[youtube player api]]></category>
		<category><![CDATA[youtube player fragment]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1331</guid>
		<description><![CDATA[<p>In previous article we learnt how to play a youtube video in android using YoutubePlayerView and using YoutubeBaseActivity. But there is one problem in YoutubePlayerView that we need to extend our activity with YoutubeBaseActivity. What if we don&#8217;t want to extend our activity with YoutubeBaseActivity or we want to implement the YoutubePlayerView in fragment. There is a [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/implement-youtube-player-fragment-android-app/">How to implement Youtube Player Fragment in Android App</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>In previous <a href="http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app" target="_blank">article</a> we learnt how to play a youtube video in android using <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView" target="_blank">YoutubePlayerView</a> and using <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeBaseActivity" target="_blank">YoutubeBaseActivity</a>.</p>
<p>But there is one problem in YoutubePlayerView that we need to extend our activity with YoutubeBaseActivity. What if we don&#8217;t want to extend our activity with YoutubeBaseActivity or we want to implement the YoutubePlayerView in fragment.</p>
<p>There is a solution for the above problem i.e <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerFragment" target="_blank">YoutubePlayerFragment</a>. A fragment that contains a YouTubePlayerView. Using this fragment is the preferred way of playing YouTube videos because your activity does not need to extend an activity provided by the library, as is the case with using the YouTubePlayerView directly.</p>
<p>So today we are going to work on the same only and we will see how to implement the <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerFragment" target="_blank">YoutubePlayerFragment</a> and play our video.</p>
<p>Before starting this article please go through to the previous <a href="http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app" target="_blank">article</a> about <a href="http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app" target="_blank">YoutubePlayer</a> and do the below mentioned tasks:</p>
<p>1.  Create the project in <strong>google console</strong> and get the <strong>Developer key.</strong></p>
<p>2. Add then download the <a href="https://developers.google.com/youtube/android/player/downloads/" target="_blank">YoutubePlayerAPI</a> jar file and add into your project.</p>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_50356" width="602" height="339" src="https://www.youtube.com/embed/eouC8RUmHh8?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New Android ⇒ Application Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. These are some strings that we are going to use in our project.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Youtube Player Fragment Demo&lt;/string&gt;
    &lt;string name="thumbnail_image_view_desc"&gt;Youtube Video thumbnail image view&lt;/string&gt;


    &lt;!--  we need to use video ids instead of video link  --&gt;
    &lt;string-array name="video_id_array"&gt;
        &lt;item&gt;CqhpNxI8qYw&lt;/item&gt;
        &lt;item&gt;sasCrpgHDy8&lt;/item&gt;
        &lt;item&gt;iJeh3x09Ya8&lt;/item&gt;
        &lt;item&gt;B5zRaD7B504&lt;/item&gt;
        &lt;item&gt;9qWHzj8k-Uo&lt;/item&gt;
        &lt;item&gt;RjiK45wC924&lt;/item&gt;
        &lt;item&gt;RH3zaLO8H4E&lt;/item&gt;
        &lt;item&gt;o14pyzosjvk&lt;/item&gt;
        &lt;item&gt;5SQrpBQne7A&lt;/item&gt;
        &lt;item&gt;5WJ3r67ORxo&lt;/item&gt;
    &lt;/string-array&gt;

&lt;/resources&gt;</pre><p>
<b>3</b>. So before getting started you need to download the jar file of <a href="https://developers.google.com/youtube/android/player/downloads/" target="_blank">Youtube Android Player API</a>. Download the jar file and add into your project dependency. After adding jar to dependency  the gradle will look like below:</p><pre class="crayon-plain-tag">dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation 'com.android.support:appcompat-v7:27.0.0'
    implementation 'com.android.support:cardview-v7:27.0.0'
    implementation 'com.android.support:recyclerview-v7:27.0.0'

    //Youtube Android Player API Jar dependency
    implementation project(':YouTubeAndroidPlayerApi')
}</pre><p>
<b>4</b>. Now open your <em>activity_main.xml</em> and add the below code to it. In this class add the com.google.android.youtube.player.YouTubePlayerSupportFragment as fragment and one <a href="http://www.androhub.com/android-recyclerview/" target="_blank">RecyclerView</a> to display the list of videos in horizontal direction.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.youtubeplayerfragmentdemo.main.MainActivity"&gt;

    &lt;android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/colorPrimary"
        android:minHeight="?attr/actionBarSize"
        app:title="@string/app_name"
        app:titleTextColor="@android:color/white" /&gt;

    &lt;!--  Youtube Player Fragment  --&gt;
    &lt;fragment
        android:id="@+id/youtube_player_fragment"
        android:name="com.google.android.youtube.player.YouTubePlayerSupportFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/recycler_view"
        android:layout_below="@+id/toolbar" /&gt;

    &lt;!-- RecyclerView to display list of Videos in Horizontal direction --&gt;
    &lt;android.support.v7.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="150dp"
        android:layout_alignParentBottom="true"
        android:paddingEnd="10dp"
        android:paddingRight="10dp" /&gt;
&lt;/RelativeLayout&gt;</pre><p>
<b>5</b>. Now open your <em>MainActivity.java </em>and add the below code to it. In this class we need to find the id of <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerFragment" target="_blank">YoutubePlayerFragment</a> and initialise the YoutubePlayer.</p><pre class="crayon-plain-tag">package com.youtubeplayerfragmentdemo.main;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.util.Log;
import android.view.View;

import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubePlayer;
import com.google.android.youtube.player.YouTubePlayerSupportFragment;
import com.youtubeplayerfragmentdemo.utils.Constants;
import com.youtubeplayerfragmentdemo.R;
import com.youtubeplayerfragmentdemo.utils.RecyclerViewOnClickListener;
import com.youtubeplayerfragmentdemo.adapter.YoutubeVideoAdapter;

import java.util.ArrayList;
import java.util.Collections;

public class MainActivity extends AppCompatActivity {

    private static final String TAG = MainActivity.class.getSimpleName();
    private RecyclerView recyclerView;
    //youtube player fragment
    private YouTubePlayerSupportFragment youTubePlayerFragment;
    private ArrayList&lt;String&gt; youtubeVideoArrayList;

    //youtube player to play video when new video selected
    private YouTubePlayer youTubePlayer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        generateDummyVideoList();
        initializeYoutubePlayer();
        setUpRecyclerView();
        populateRecyclerView();
    }

    /**
     * initialize youtube player via Fragment and get instance of YoutubePlayer
     */
    private void initializeYoutubePlayer() {

        youTubePlayerFragment = (YouTubePlayerSupportFragment) getSupportFragmentManager()
                .findFragmentById(R.id.youtube_player_fragment);

        if (youTubePlayerFragment == null)
            return;

        youTubePlayerFragment.initialize(Constants.DEVELOPER_KEY, new YouTubePlayer.OnInitializedListener() {

            @Override
            public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer player,
                                                boolean wasRestored) {
                if (!wasRestored) {
                    youTubePlayer = player;

                    //set the player style default
                    youTubePlayer.setPlayerStyle(YouTubePlayer.PlayerStyle.DEFAULT);

                    //cue the 1st video by default
                    youTubePlayer.cueVideo(youtubeVideoArrayList.get(0));
                }
            }

            @Override
            public void onInitializationFailure(YouTubePlayer.Provider arg0, YouTubeInitializationResult arg1) {

                //print or show error if initialization failed
                Log.e(TAG, "Youtube Player View initialization failed");
            }
        });
    }

    /**
     * setup the recycler view here
     */
    private void setUpRecyclerView() {
        recyclerView = findViewById(R.id.recycler_view);
        recyclerView.setHasFixedSize(true);

        //Horizontal direction recycler view
        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false);
        recyclerView.setLayoutManager(linearLayoutManager);
    }

    /**
     * populate the recycler view and implement the click event here
     */
    private void populateRecyclerView() {
        final YoutubeVideoAdapter adapter = new YoutubeVideoAdapter(this, youtubeVideoArrayList);
        recyclerView.setAdapter(adapter);

        //set click event
        recyclerView.addOnItemTouchListener(new RecyclerViewOnClickListener(this, new RecyclerViewOnClickListener.OnItemClickListener() {
            @Override
            public void onItemClick(View view, int position) {

                if (youTubePlayerFragment != null &amp;&amp; youTubePlayer != null) {
                    //update selected position
                    adapter.setSelectedPosition(position);

                    //load selected video
                    youTubePlayer.cueVideo(youtubeVideoArrayList.get(position));
                }

            }
        }));
    }


    /**
     * method to generate dummy array list of videos
     */
    private void generateDummyVideoList() {
        youtubeVideoArrayList = new ArrayList&lt;&gt;();

        //get the video id array from strings.xml
        String[] videoIDArray = getResources().getStringArray(R.array.video_id_array);

        //add all videos to array list
        Collections.addAll(youtubeVideoArrayList, videoIDArray);

    }
}</pre><p>
<b>6</b>. For RecyclerView item row create new xml layout naming <em>youtube_video_custom_layout.xml</em> and add the YoutubeThumbnailView to it inside CardView.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;android.support.v7.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:id="@+id/youtube_row_card_view"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginStart="10dp"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    app:cardCornerRadius="4dp"
    app:contentPadding="10dp"&gt;

    &lt;!-- youtube thumbnail view to show the thumbnail of videos --&gt;
    &lt;com.google.android.youtube.player.YouTubeThumbnailView
        android:id="@+id/video_thumbnail_image_view"
        android:layout_width="120dp"
        android:layout_height="120dp"
        android:background="@android:color/darker_gray"
        android:contentDescription="@string/thumbnail_image_view_desc"
        android:scaleType="centerCrop" /&gt;


&lt;/android.support.v7.widget.CardView&gt;</pre><p>
<b>7</b>. Now create adapter for RecyclerView naming <em>YoutubeVideoAdapter.java</em> and add the below code to it.</p><pre class="crayon-plain-tag">package com.youtubeplayerfragmentdemo.adapter;

import android.content.Context;
import android.support.v4.content.ContextCompat;
import android.support.v7.widget.RecyclerView;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubeThumbnailLoader;
import com.google.android.youtube.player.YouTubeThumbnailView;
import com.youtubeplayerfragmentdemo.R;
import com.youtubeplayerfragmentdemo.holder.YoutubeViewHolder;
import com.youtubeplayerfragmentdemo.utils.Constants;

import java.util.ArrayList;

/**
 * Created by sonu on 10/11/17.
 */

public class YoutubeVideoAdapter extends RecyclerView.Adapter&lt;YoutubeViewHolder&gt; {
    private static final String TAG = YoutubeVideoAdapter.class.getSimpleName();
    private Context context;
    private ArrayList&lt;String&gt; youtubeVideoModelArrayList;

    //position to check which position is selected
    private int selectedPosition = 0;


    public YoutubeVideoAdapter(Context context, ArrayList&lt;String&gt; youtubeVideoModelArrayList) {
        this.context = context;
        this.youtubeVideoModelArrayList = youtubeVideoModelArrayList;
    }

    @Override
    public YoutubeViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());
        View view = layoutInflater.inflate(R.layout.youtube_video_custom_layout, parent, false);
        return new YoutubeViewHolder(view);
    }

    @Override
    public void onBindViewHolder(YoutubeViewHolder holder, final int position) {

        //if selected position is equal to that mean view is selected so change the cardview color
        if (selectedPosition == position) {
            holder.youtubeCardView.setCardBackgroundColor(ContextCompat.getColor(context, R.color.colorPrimary));
        } else {
            //if selected position is not equal to that mean view is not selected so change the cardview color to white back again
            holder.youtubeCardView.setCardBackgroundColor(ContextCompat.getColor(context, android.R.color.white));
        }

        /*  initialize the thumbnail image view , we need to pass Developer Key */
        holder.videoThumbnailImageView.initialize(Constants.DEVELOPER_KEY, new YouTubeThumbnailView.OnInitializedListener() {
            @Override
            public void onInitializationSuccess(YouTubeThumbnailView youTubeThumbnailView, final YouTubeThumbnailLoader youTubeThumbnailLoader) {
                //when initialization is sucess, set the video id to thumbnail to load
                youTubeThumbnailLoader.setVideo(youtubeVideoModelArrayList.get(position));

                youTubeThumbnailLoader.setOnThumbnailLoadedListener(new YouTubeThumbnailLoader.OnThumbnailLoadedListener() {
                    @Override
                    public void onThumbnailLoaded(YouTubeThumbnailView youTubeThumbnailView, String s) {
                        //when thumbnail loaded successfully release the thumbnail loader as we are showing thumbnail in adapter
                        youTubeThumbnailLoader.release();
                    }

                    @Override
                    public void onThumbnailError(YouTubeThumbnailView youTubeThumbnailView, YouTubeThumbnailLoader.ErrorReason errorReason) {
                        //print or show error when thumbnail load failed
                        Log.e(TAG, "Youtube Thumbnail Error");
                    }
                });
            }

            @Override
            public void onInitializationFailure(YouTubeThumbnailView youTubeThumbnailView, YouTubeInitializationResult youTubeInitializationResult) {
                //print or show error when initialization failed
                Log.e(TAG, "Youtube Initialization Failure");

            }
        });

    }

    @Override
    public int getItemCount() {
        return youtubeVideoModelArrayList != null ? youtubeVideoModelArrayList.size() : 0;
    }

    /**
     * method the change the selected position when item clicked
     * @param selectedPosition
     */
    public void setSelectedPosition(int selectedPosition) {
        this.selectedPosition = selectedPosition;
        //when item selected notify the adapter
        notifyDataSetChanged();
    }
}</pre><p>
<div id="attachment_1360" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1360" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_player_fragment_app_screen-1.jpg?resize=576%2C1024" alt="Youtube Player Fragment" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_player_fragment_app_screen-1.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_player_fragment_app_screen-1.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_player_fragment_app_screen-1.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_player_fragment_app_screen-1.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Youtube Player Fragment</p></div>
<p><b>8. </b>Don&#8217;t forget to give <em><strong>Internet</strong></em> permission in your <em><strong>AndroidManifest.xml</strong> </em>file else your app will not run.</p><pre class="crayon-plain-tag">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;</pre><p>
<b>9</b>. Finally all done, now you can also play video in your app without using YoutubeBaseActivity.</p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/YoutubePlayerFragmentDemo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/implement-youtube-player-fragment-android-app/">How to implement Youtube Player Fragment in Android App</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/implement-youtube-player-fragment-android-app/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1331</post-id>	</item>
		<item>
		<title>How to show Youtube Video Thumbnail &#038; Play Youtube Video in Android App</title>
		<link>http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app/</link>
		<comments>http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app/#respond</comments>
		<pubDate>Sat, 11 Nov 2017 13:15:41 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[cardview]]></category>
		<category><![CDATA[full screen youtube video]]></category>
		<category><![CDATA[generate sha hash key]]></category>
		<category><![CDATA[play youtube video]]></category>
		<category><![CDATA[play youtube video in android]]></category>
		<category><![CDATA[recyclerview]]></category>
		<category><![CDATA[send data to another activity]]></category>
		<category><![CDATA[sha key]]></category>
		<category><![CDATA[showing thumbnail of youtube video]]></category>
		<category><![CDATA[youtube player api]]></category>
		<category><![CDATA[youtube player style]]></category>
		<category><![CDATA[youtube thumbnail view]]></category>
		<category><![CDATA[YoutubeBaseActivity]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1329</guid>
		<description><![CDATA[<p>Hello Friends, Today we are going to learn how to play a youtube video in our app using YoutubePlayerAPI. And also I will also show you how to show thumbnails of the youtube video. This app will be having two screens: First screen listing all the videos in RecyclerView. Playing the selected video. VIDEO DEMO [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app/">How to show Youtube Video Thumbnail &#038; Play Youtube Video in Android App</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>Hello Friends, Today we are going to learn how to play a youtube video in our app using <a href="https://developers.google.com/youtube/android/player/" target="_blank">YoutubePlayerAPI</a>. And also I will also show you how to show thumbnails of the youtube video.</p>
<p>This app will be having two screens:</p>
<ol>
<li>First screen listing all the videos in <a href="http://www.androhub.com/android-recyclerview/" target="_blank">RecyclerView</a>.</li>
<li>Playing the selected video.</li>
</ol>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_90922" width="602" height="339" src="https://www.youtube.com/embed/-SEhUMjSVPU?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<h3>Getting Youtube Data API Key</h3>
<p class="p3"><span class="s1">1. Now login into your Gmail Account and go to <a href="https://console.developers.google.com/flows/enableapi?apiid=maps_android_backend&amp;keyType=CLIENT_SIDE_ANDROID&amp;reusekey=true" target="_blank">Google API Console</a>.</span></p>
<p class="p3"><span class="s1">2.<span class="Apple-converted-space">  C</span>lick on plus button to <strong>Create New Project.</strong></span></p>
<div id="attachment_1340" style="width: 761px" class="wp-caption aligncenter"><img class="wp-image-1340 size-full" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_new_project_button_c.jpg?resize=602%2C75" alt="Click on Plus button to Create Project" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_new_project_button_c.jpg?w=751 751w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_new_project_button_c.jpg?resize=300%2C37 300w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Click on Plus button to Create Project</p></div>
<p class="p3">3. Enter your project name and click <strong>Create</strong>.</p>
<div id="attachment_1351" style="width: 603px" class="wp-caption aligncenter"><img class="size-full wp-image-1351" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_name_entered.jpg?resize=593%2C305" alt="Enter project name" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_name_entered.jpg?w=593 593w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_name_entered.jpg?resize=300%2C154 300w" sizes="(max-width: 593px) 100vw, 593px" data-recalc-dims="1" /><p class="wp-caption-text">Enter project name</p></div>
<p class="p3">4. Creating project will take some couple of minutes you can check the processing of your project on top right corner. After successful creation of your project the below is the first screen you get i.e <strong>Project Dashboard</strong>.</p>
<div id="attachment_1350" style="width: 1440px" class="wp-caption aligncenter"><img class="size-full wp-image-1350" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_dashbord.jpg?resize=602%2C222" alt="Project Dashboard" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_dashbord.jpg?w=1430 1430w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_dashbord.jpg?resize=300%2C111 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_dashbord.jpg?resize=768%2C284 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_dashbord.jpg?resize=1024%2C378 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/project_dashbord.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Project Dashboard</p></div>
<p class="p3">5. Now to integrate YoutubePlayer API we need to enable <strong>Youtube Data API v3 </strong>to do that click on<strong> Enable APIS and Services</strong>.</p>
<div id="attachment_1343" style="width: 1435px" class="wp-caption aligncenter"><img class="size-full wp-image-1343" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_api_top.jpg?resize=602%2C25" alt="Click on Enable APIS and Services" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_api_top.jpg?w=1425 1425w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_api_top.jpg?resize=300%2C12 300w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_api_top.jpg?resize=768%2C32 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_api_top.jpg?resize=1024%2C42 1024w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_api_top.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Click on Enable APIS and Services</p></div>
<p class="p3">6. After clicking on <strong>Enable APIS and Services</strong> you will get below screen containing list of <strong>Services provided by Google</strong>. Now click on <strong>Youtube Data API v3</strong> from 2nd row 1st item.</p>
<div id="attachment_1347" style="width: 1441px" class="wp-caption aligncenter"><img class="size-full wp-image-1347" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_google_apis.jpg?resize=602%2C321" alt="List of Google APIs" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_google_apis.jpg?w=1431 1431w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_google_apis.jpg?resize=300%2C160 300w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_google_apis.jpg?resize=768%2C409 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_google_apis.jpg?resize=1024%2C546 1024w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_google_apis.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">List of Google APIs</p></div>
<p class="p3">7. After clicking on <strong>Youtube Data API v3</strong> you will get below screen. Here you need to click on <strong>Enable</strong> button to enable the API.</p>
<div id="attachment_1344" style="width: 1428px" class="wp-caption aligncenter"><img class="size-full wp-image-1344" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_youtube_data_api.jpg?resize=602%2C324" alt="Click on Enable" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_youtube_data_api.jpg?w=1418 1418w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_youtube_data_api.jpg?resize=300%2C161 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_youtube_data_api.jpg?resize=768%2C413 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_youtube_data_api.jpg?resize=1024%2C551 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/enable_youtube_data_api.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Click on Enable</p></div>
<p class="p3">8. After enabling <strong>Youtube Data API v3</strong> you will get below screen. Here you need to click on <strong>Create Credentials</strong> to get <strong>API key</strong>.</p>
<div id="attachment_1335" style="width: 1438px" class="wp-caption aligncenter"><img class="size-full wp-image-1335" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_enables_successfully.jpg?resize=602%2C312" alt="API Enabled Successfully" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_enables_successfully.jpg?w=1428 1428w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_enables_successfully.jpg?resize=300%2C155 300w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_enables_successfully.jpg?resize=768%2C397 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_enables_successfully.jpg?resize=1024%2C530 1024w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_enables_successfully.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">API Enabled Successfully</p></div>
<p class="p3">9. On clicking <strong>Create Credential</strong> you will get below screen. Here you again need to click on <strong>Create Credentials.</strong></p>
<div id="attachment_1339" style="width: 1436px" class="wp-caption aligncenter"><img class="size-full wp-image-1339" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_credentials.jpg?resize=602%2C238" alt="Click on Create Credentials" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_credentials.jpg?w=1426 1426w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_credentials.jpg?resize=300%2C119 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_credentials.jpg?resize=768%2C304 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_credentials.jpg?resize=1024%2C405 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/create_credentials.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Click on Create Credentials</p></div>
<p class="p3">On clicking <strong>Create Credentials</strong> you will get a dropdown from that you need to select <strong>API key.</strong></p>
<div id="attachment_1352" style="width: 525px" class="wp-caption aligncenter"><img class="size-full wp-image-1352" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/select_api_key.jpg?resize=515%2C451" alt="Select API Key from Dropdown" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/select_api_key.jpg?w=515 515w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/select_api_key.jpg?resize=300%2C263 300w" sizes="(max-width: 515px) 100vw, 515px" data-recalc-dims="1" /><p class="wp-caption-text">Select API Key from Dropdown</p></div>
<p class="p3">10. Finally after clicking on<strong> API key</strong> you will get API key to integrate<strong> Youtube Data API</strong> in your app. Copy this API key and paste in your project inside <strong>Constants.java</strong> class.</p>
<div id="attachment_1336" style="width: 617px" class="wp-caption aligncenter"><img class="size-full wp-image-1336" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_key_popup.jpg?resize=602%2C327" alt="API key created successfully" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_key_popup.jpg?w=607 607w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/api_key_popup.jpg?resize=300%2C163 300w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">API key created successfully</p></div>
<h3>Optional Steps but Important</h3>
<p class="p3">1. Now click on <strong>Restrict Key</strong> option from <strong>API key created </strong>dialog. By restricting API key you can prevent <strong>unauthorised use in production</strong>. On clicking you will get below screen. Here select <strong>Android apps</strong> radio button and below add your app <strong>package name</strong> and <strong>SHA-1 Certificate Fingerprint</strong> and click on <strong>Save</strong> button.</p>
<p class="p3">If you don&#8217;t know how to generate SHA-1 key you can check this <a href="http://www.androhub.com/introduction-to-android-google-maps-v2/" target="_blank">link</a>.</p>
<div id="attachment_1333" style="width: 1397px" class="wp-caption aligncenter"><img class="size-full wp-image-1333" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/add_sha1_key.jpg?resize=602%2C316" alt="Add SHA-1 Fingerprint Certificate" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/add_sha1_key.jpg?w=1387 1387w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/add_sha1_key.jpg?resize=300%2C157 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/add_sha1_key.jpg?resize=768%2C403 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/add_sha1_key.jpg?resize=1024%2C537 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/add_sha1_key.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Add SHA-1 Fingerprint Certificate</p></div>
<p class="p3">2. If you have closed the <strong>API key created</strong> dialog then also you can restrict the <strong>API key </strong>by clicking on <strong>Pencil icon</strong> from the below screen you get after closing dialog.</p>
<div id="attachment_1342" style="width: 1428px" class="wp-caption aligncenter"><img class="size-full wp-image-1342" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/edit_api_key.jpg?resize=602%2C245" alt="Click on Pencil Icon" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/edit_api_key.jpg?w=1418 1418w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/edit_api_key.jpg?resize=300%2C122 300w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/edit_api_key.jpg?resize=768%2C312 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/edit_api_key.jpg?resize=1024%2C416 1024w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/edit_api_key.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Click on Pencil Icon</p></div>
<p class="p3">
<p class="p3"><strong>Now all done from Google API Console side come back to Android Studio.</strong></p>
<h3>Integrating Youtube Player in Android App</h3>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New Android ⇒ Application Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. These are some strings that we are going to use in our project.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Youtube Android Player API Demo&lt;/string&gt;
    &lt;string name="thumbnail_image_view_desc"&gt;Youtube Video thumbnail image view&lt;/string&gt;
    &lt;string name="close_player_activity"&gt;Close Player activity&lt;/string&gt;

     &lt;!-- we need to use video ids instead of video link --&gt;    
    &lt;string-array name="video_id_array"&gt;
        &lt;item&gt;CqhpNxI8qYw&lt;/item&gt;
        &lt;item&gt;sasCrpgHDy8&lt;/item&gt;
        &lt;item&gt;iJeh3x09Ya8&lt;/item&gt;
        &lt;item&gt;B5zRaD7B504&lt;/item&gt;
        &lt;item&gt;9qWHzj8k-Uo&lt;/item&gt;
        &lt;item&gt;RjiK45wC924&lt;/item&gt;
        &lt;item&gt;RH3zaLO8H4E&lt;/item&gt;
        &lt;item&gt;o14pyzosjvk&lt;/item&gt;
        &lt;item&gt;5SQrpBQne7A&lt;/item&gt;
        &lt;item&gt;5WJ3r67ORxo&lt;/item&gt;
    &lt;/string-array&gt;

    &lt;string-array name="video_title_array"&gt;
        &lt;item&gt;Android Security Lock Demo&lt;/item&gt;
        &lt;item&gt;Android Sectioned RecyclerView Demo&lt;/item&gt;
        &lt;item&gt;Android Home Screen Widgets Demo&lt;/item&gt;
        &lt;item&gt;Android Floating Widget like Facebook Messenger Chat Head Demo&lt;/item&gt;
        &lt;item&gt;Android Google Maps Introduction Demo&lt;/item&gt;
        &lt;item&gt;Android Lollipop Activity Transitions Demo&lt;/item&gt;
        &lt;item&gt;Android Toolbar Animation Using Design Support Library Demo&lt;/item&gt;
        &lt;item&gt;Android Material Advance Tabs Demo&lt;/item&gt;
        &lt;item&gt;Android Drag and Drop Demo&lt;/item&gt;
        &lt;item&gt;Android Fingerprint Authentication Demo&lt;/item&gt;
    &lt;/string-array&gt;

    &lt;string-array name="video_duration_array"&gt;
        &lt;item&gt;02:48&lt;/item&gt;
        &lt;item&gt;00:44&lt;/item&gt;
        &lt;item&gt;01:01&lt;/item&gt;
        &lt;item&gt;00:55&lt;/item&gt;
        &lt;item&gt;01:03&lt;/item&gt;
        &lt;item&gt;00:25&lt;/item&gt;
        &lt;item&gt;00:34&lt;/item&gt;
        &lt;item&gt;00:45&lt;/item&gt;
        &lt;item&gt;00:52&lt;/item&gt;
        &lt;item&gt;00:28&lt;/item&gt;
    &lt;/string-array&gt;

&lt;/resources&gt;</pre><p>
In the above string.xml file if you see i have created an array of Video IDs, where Video ID is the ID of youtube video. If you don&#8217;t know how to get ID from video then go to <a href="http://youtube.com" target="_blank">Youtube</a> and open any video link. Now see the below image to get the Video ID from opened youtube link.</p>
<div id="attachment_1353" style="width: 1434px" class="wp-caption aligncenter"><img class="size-full wp-image-1353" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_link_video_id.jpg?resize=602%2C21" alt="Get Video ID from Youtube Link" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_link_video_id.jpg?w=1424 1424w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_link_video_id.jpg?resize=300%2C10 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_link_video_id.jpg?resize=768%2C26 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_link_video_id.jpg?resize=1024%2C35 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/youtube_link_video_id.jpg?w=1204 1204w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Get Video ID from Youtube Link</p></div>
<p><b>3</b>. So before getting started you need to download the jar file of <a href="https://developers.google.com/youtube/android/player/downloads/" target="_blank">Youtube Android Player API</a>. Download the jar file and add into your project dependency. After adding jar to dependency  the gradle will look like below:</p><pre class="crayon-plain-tag">dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation 'com.android.support:appcompat-v7:27.0.0'
    implementation 'com.android.support:cardview-v7:27.0.0'
    implementation 'com.android.support:recyclerview-v7:27.0.0'

    //Youtube Android Player API Jar dependency
    implementation project(':YouTubeAndroidPlayerApi')
}</pre><p>
<strong>NOTE</strong> : I am using <strong>Android Studio 3.0</strong> so <strong>compile</strong> is now replaced with <strong>implementation</strong>.</p>
<p><b>4</b>. Now open your <em>activity_main.xml</em> and add the RecyclerView to it for displaying the list of videos with thumbnail.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#EEEEEE"
    android:orientation="vertical"
    tools:context="com.youtubeandroidplayerapidemo.main.MainActivity"&gt;

    &lt;android.support.v7.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/colorPrimary"
        android:minHeight="?attr/actionBarSize"
        app:title="@string/app_name"
        app:titleTextColor="@android:color/white" /&gt;

    &lt;!--  recycler view to show the list of youtube videos --&gt;
    &lt;android.support.v7.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="10dp"
        android:padding="10dp" /&gt;
&lt;/LinearLayout&gt;</pre><p>
<b>5</b>. For RecyclerView custom row we need to create one more layout naming <em>youtube_video_custom_layout.xml</em> and add the below code to it.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;android.support.v7.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginEnd="10dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginStart="10dp"
    android:layout_marginTop="10dp"
    app:cardCornerRadius="4dp"
    app:contentPadding="10dp"&gt;

    &lt;RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"&gt;

        &lt;!-- youtube thumbnail view to show the thumbnail of videos --&gt;
        &lt;com.google.android.youtube.player.YouTubeThumbnailView
            android:id="@+id/video_thumbnail_image_view"
            android:layout_width="120dp"
            android:layout_height="120dp"
            android:background="@android:color/darker_gray"
            android:contentDescription="@string/thumbnail_image_view_desc"
            android:scaleType="centerCrop" /&gt;

        &lt;TextView
            android:id="@+id/video_title_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginStart="10dp"
            android:layout_toEndOf="@+id/video_thumbnail_image_view"
            android:layout_toRightOf="@+id/video_thumbnail_image_view"
            android:text="Title of Video"
            android:textColor="@android:color/black"
            android:textSize="16sp" /&gt;


        &lt;TextView
            android:id="@+id/video_duration_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="10dp"
            android:layout_marginStart="10dp"
            android:drawableLeft="@drawable/ic_action_duration"
            android:drawablePadding="2dp"
            android:gravity="center_vertical|end"
            android:text="24.33min"
            android:textColor="@android:color/primary_text_light"
            android:textSize="14sp" /&gt;
    &lt;/RelativeLayout&gt;

&lt;/android.support.v7.widget.CardView&gt;</pre><p>
In the above layout we are using <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeThumbnailView" target="_blank"><strong>com.google.android.youtube.player.YouTubeThumbnailView</strong></a> which is a part of <a href="https://developers.google.com/youtube/android/player/downloads/" target="_blank"><strong>YoutubePlayerAPI</strong></a> jar file that we had downloaded and added to our project. This <strong><a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeThumbnailView" target="_blank">YouTubeThumbnailView</a> </strong>is responsible to show the thumbnail of the videos.</p>
<p><b>6</b>. After creating custom row come to <em><strong>MainActivity.java</strong></em> and add the below code to it. Here we are generating dummy list of videos that we are getting from <em><strong>string.xml</strong></em>.</p><pre class="crayon-plain-tag">package com.youtubeandroidplayerapidemo.main;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.View;

import com.youtubeandroidplayerapidemo.R;
import com.youtubeandroidplayerapidemo.adapter.YoutubeVideoAdapter;
import com.youtubeandroidplayerapidemo.model.YoutubeVideoModel;
import com.youtubeandroidplayerapidemo.utils.RecyclerViewOnClickListener;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {
    private RecyclerView recyclerView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setUpRecyclerView();
        populateRecyclerView();

    }

    /**
     * setup the recyclerview here
     */
    private void setUpRecyclerView() {
        recyclerView = findViewById(R.id.recycler_view);
        recyclerView.setHasFixedSize(true);
        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this);
        recyclerView.setLayoutManager(linearLayoutManager);
    }

    /**
     * populate the recyclerview and implement the click event here
     */
    private void populateRecyclerView() {
        final ArrayList&lt;YoutubeVideoModel&gt; youtubeVideoModelArrayList = generateDummyVideoList();
        YoutubeVideoAdapter adapter = new YoutubeVideoAdapter(this, youtubeVideoModelArrayList);
        recyclerView.setAdapter(adapter);

        //set click event
        recyclerView.addOnItemTouchListener(new RecyclerViewOnClickListener(this, new RecyclerViewOnClickListener.OnItemClickListener() {
            @Override
            public void onItemClick(View view, int position) {

                //start youtube player activity by passing selected video id via intent
                startActivity(new Intent(MainActivity.this, YoutubePlayerActivity.class)
                        .putExtra("video_id", youtubeVideoModelArrayList.get(position).getVideoId()));

            }
        }));
    }


    /**
     * method to generate dummy array list of videos
     *
     * @return
     */
    private ArrayList&lt;YoutubeVideoModel&gt; generateDummyVideoList() {
        ArrayList&lt;YoutubeVideoModel&gt; youtubeVideoModelArrayList = new ArrayList&lt;&gt;();

        //get the video id array, title array and duration array from strings.xml
        String[] videoIDArray = getResources().getStringArray(R.array.video_id_array);
        String[] videoTitleArray = getResources().getStringArray(R.array.video_title_array);
        String[] videoDurationArray = getResources().getStringArray(R.array.video_duration_array);

        //loop through all items and add them to arraylist
        for (int i = 0; i &lt; videoIDArray.length; i++) {

            YoutubeVideoModel youtubeVideoModel = new YoutubeVideoModel();
            youtubeVideoModel.setVideoId(videoIDArray[i]);
            youtubeVideoModel.setTitle(videoTitleArray[i]);
            youtubeVideoModel.setDuration(videoDurationArray[i]);

            youtubeVideoModelArrayList.add(youtubeVideoModel);

        }

        return youtubeVideoModelArrayList;
    }
}</pre><p>
<b>7</b>. For adding items to ArrayList we need a pojo class naming <em>YoutubeVideoModel.java</em> and add the below code to it.</p><pre class="crayon-plain-tag">package com.youtubeandroidplayerapidemo.model;

/**
 * Created by sonu on 10/11/17.
 * class to set and get the video id, title and duration for a video
 */

public class YoutubeVideoModel {
    private String videoId, title,duration;

    public String getVideoId() {
        return videoId;
    }

    public void setVideoId(String videoId) {
        this.videoId = videoId;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }


    public String getDuration() {
        return duration;
    }

    public void setDuration(String duration) {
        this.duration = duration;
    }

    @Override
    public String toString() {
        return "YoutubeVideoModel{" +
                "videoId='" + videoId + '\'' +
                ", title='" + title + '\'' +
                ", duration='" + duration + '\'' +
                '}';
    }
}</pre><p>
<b>8</b>. Now after creating pojo class lets create adapter class for RecyclerView with name of <em><strong>YoutubeVideoAdapter.java</strong></em> and add the below code to it.</p><pre class="crayon-plain-tag">package com.youtubeandroidplayerapidemo.adapter;

import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubeThumbnailLoader;
import com.google.android.youtube.player.YouTubeThumbnailView;
import com.youtubeandroidplayerapidemo.utils.Constants;
import com.youtubeandroidplayerapidemo.R;
import com.youtubeandroidplayerapidemo.model.YoutubeVideoModel;
import com.youtubeandroidplayerapidemo.holder.YoutubeViewHolder;

import java.util.ArrayList;

/**
 * Created by sonu on 10/11/17.
 */

public class YoutubeVideoAdapter extends RecyclerView.Adapter&lt;YoutubeViewHolder&gt; {
    private static final String TAG = YoutubeVideoAdapter.class.getSimpleName();
    private Context context;
    private ArrayList&lt;YoutubeVideoModel&gt; youtubeVideoModelArrayList;


    public YoutubeVideoAdapter(Context context, ArrayList&lt;YoutubeVideoModel&gt; youtubeVideoModelArrayList) {
        this.context = context;
        this.youtubeVideoModelArrayList = youtubeVideoModelArrayList;
    }

    @Override
    public YoutubeViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());
        View view = layoutInflater.inflate(R.layout.youtube_video_custom_layout, parent, false);
        return new YoutubeViewHolder(view);
    }

    @Override
    public void onBindViewHolder(YoutubeViewHolder holder, final int position) {

        final YoutubeVideoModel youtubeVideoModel = youtubeVideoModelArrayList.get(position);

        holder.videoTitle.setText(youtubeVideoModel.getTitle());
        holder.videoDuration.setText(youtubeVideoModel.getDuration());


        /*  initialize the thumbnail image view , we need to pass Developer Key */
        holder.videoThumbnailImageView.initialize(Constants.DEVELOPER_KEY, new YouTubeThumbnailView.OnInitializedListener() {
            @Override
            public void onInitializationSuccess(YouTubeThumbnailView youTubeThumbnailView, final YouTubeThumbnailLoader youTubeThumbnailLoader) {
                //when initialization is sucess, set the video id to thumbnail to load
                youTubeThumbnailLoader.setVideo(youtubeVideoModel.getVideoId());

                youTubeThumbnailLoader.setOnThumbnailLoadedListener(new YouTubeThumbnailLoader.OnThumbnailLoadedListener() {
                    @Override
                    public void onThumbnailLoaded(YouTubeThumbnailView youTubeThumbnailView, String s) {
                        //when thumbnail loaded successfully release the thumbnail loader as we are showing thumbnail in adapter
                        youTubeThumbnailLoader.release();
                    }

                    @Override
                    public void onThumbnailError(YouTubeThumbnailView youTubeThumbnailView, YouTubeThumbnailLoader.ErrorReason errorReason) {
                        //print or show error when thumbnail load failed
                        Log.e(TAG, "Youtube Thumbnail Error");
                    }
                });
            }

            @Override
            public void onInitializationFailure(YouTubeThumbnailView youTubeThumbnailView, YouTubeInitializationResult youTubeInitializationResult) {
                //print or show error when initialization failed
                Log.e(TAG, "Youtube Initialization Failure");

            }
        });

    }

    @Override
    public int getItemCount() {
        return youtubeVideoModelArrayList != null ? youtubeVideoModelArrayList.size() : 0;
    }
}</pre><p>
In the above class the main code which is responsible to show the thumbnail of video is below:</p><pre class="crayon-plain-tag">/*  initialize the thumbnail image view , we need to pass Developer Key */
        holder.videoThumbnailImageView.initialize(Constants.DEVELOPER_KEY, new YouTubeThumbnailView.OnInitializedListener() {
            @Override
            public void onInitializationSuccess(YouTubeThumbnailView youTubeThumbnailView, final YouTubeThumbnailLoader youTubeThumbnailLoader) {
                //when initialization is sucess, set the video id to thumbnail to load
                youTubeThumbnailLoader.setVideo(youtubeVideoModel.getVideoId());

                youTubeThumbnailLoader.setOnThumbnailLoadedListener(new YouTubeThumbnailLoader.OnThumbnailLoadedListener() {
                    @Override
                    public void onThumbnailLoaded(YouTubeThumbnailView youTubeThumbnailView, String s) {
                        //when thumbnail loaded successfully release the thumbnail loader as we are showing thumbnail in adapter
                        youTubeThumbnailLoader.release();
                    }

                    @Override
                    public void onThumbnailError(YouTubeThumbnailView youTubeThumbnailView, YouTubeThumbnailLoader.ErrorReason errorReason) {
                        //print or show error when thumbnail load failed
                        Log.e(TAG, "Youtube Thumbnail Error");
                    }
                });
            }

            @Override
            public void onInitializationFailure(YouTubeThumbnailView youTubeThumbnailView, YouTubeInitializationResult youTubeInitializationResult) {
                //print or show error when initialization failed
                Log.e(TAG, "Youtube Initialization Failure");

            }
        });</pre><p>
<b>9</b>. I am keeping the <strong>Youtube API Key</strong> in <em><strong>Constants.java</strong></em> class that we got from Google Developer Console.</p><pre class="crayon-plain-tag">package com.youtubeandroidplayerapidemo.utils;

/**
 * Created by sonu on 10/11/17.
 */

public class Constants {

    //youtube developer API Key
    public static String DEVELOPER_KEY = "YOUR_DEVELOPER_API_KEY";
}</pre><p>
<b>10</b>. For RecyclerView holder class lets create a class with name <strong>YoutubeViewHolder.java</strong> and find the id of all the views.</p><pre class="crayon-plain-tag">package com.youtubeandroidplayerapidemo.holder;

import android.support.v7.widget.RecyclerView;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

import com.google.android.youtube.player.YouTubeThumbnailView;
import com.youtubeandroidplayerapidemo.R;

/**
 * Created by sonu on 10/11/17.
 */

public class YoutubeViewHolder extends RecyclerView.ViewHolder {

    public YouTubeThumbnailView videoThumbnailImageView;
    public TextView videoTitle, videoDuration;

    public YoutubeViewHolder(View itemView) {
        super(itemView);
        videoThumbnailImageView = itemView.findViewById(R.id.video_thumbnail_image_view);
        videoTitle = itemView.findViewById(R.id.video_title_label);
        videoDuration = itemView.findViewById(R.id.video_duration_label);
    }
}</pre><p>
&nbsp;</p>
<div id="attachment_1348" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1348" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_videos.jpg?resize=576%2C1024" alt="List of Videos using Youtube Thumbnail View" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_videos.jpg?resize=576%2C1024 576w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_videos.jpg?resize=169%2C300 169w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_videos.jpg?resize=768%2C1365 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/list_of_videos.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">List of Videos using Youtube Thumbnail View</p></div>
<p>Till here we are done with <strong>YoutubeThumbnailView</strong>. Now lets see how to play a selected video using <strong>YoutubePlayerAPI.</strong></p>
<p><b>11</b>. To play a youtube video when user select any item from RecyclerView lets create one more xml layout naming<em> youtube_player_activity.xml</em> and add the  <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView" target="_blank"><em><strong>com.google.android.youtube.player.YouTubePlayerView</strong></em></a> which is responsible to play the video.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".main.YoutubePlayerActivity"&gt;

    &lt;!-- youtube player view to play videos --&gt;
    &lt;com.google.android.youtube.player.YouTubePlayerView
        android:id="@+id/youtube_player_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /&gt;
&lt;/RelativeLayout&gt;</pre><p>
<b>12. </b>Now lets create <strong><em>YoutubePlayerActivity.java</em></strong> activity where we will play the youtube video.</p>
<p><strong>NOTE : You need to extend Activity with <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeBaseActivity" target="_blank">YoutubeBaseActivity</a>.</strong></p><pre class="crayon-plain-tag">package com.youtubeandroidplayerapidemo.main;

import android.os.Bundle;
import android.support.annotation.Nullable;
import android.util.Log;
import android.view.View;

import com.google.android.youtube.player.YouTubeBaseActivity;
import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubePlayer;
import com.google.android.youtube.player.YouTubePlayerView;
import com.youtubeandroidplayerapidemo.R;
import com.youtubeandroidplayerapidemo.utils.Constants;

/**
 * Created by sonu on 10/11/17.
 * &lt;p&gt;
 * ### Here you need to extend the activity with YouTubeBaseActivity otherwise it will crash the app  ###
 */

public class YoutubePlayerActivity extends YouTubeBaseActivity {
    private static final String TAG = YoutubePlayerActivity.class.getSimpleName();
    private String videoID;
    private YouTubePlayerView youTubePlayerView;

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.youtube_player_activity);
        //get the video id
        videoID = getIntent().getStringExtra("video_id");
        youTubePlayerView = findViewById(R.id.youtube_player_view);
        initializeYoutubePlayer();
    }

    /**
     * initialize the youtube player
     */
    private void initializeYoutubePlayer() {
        youTubePlayerView.initialize(Constants.DEVELOPER_KEY, new YouTubePlayer.OnInitializedListener() {

            @Override
            public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer youTubePlayer,
                                                boolean wasRestored) {

                //if initialization success then load the video id to youtube player
                if (!wasRestored) {
                    //set the player style here: like CHROMELESS, MINIMAL, DEFAULT
                    youTubePlayer.setPlayerStyle(YouTubePlayer.PlayerStyle.DEFAULT);

                    //load the video
                    youTubePlayer.loadVideo(videoID);

                    //OR

                    //cue the video
                    //youTubePlayer.cueVideo(videoID);

                    //if you want when activity start it should be in full screen uncomment below comment
                    //  youTubePlayer.setFullscreen(true);

                    //If you want the video should play automatically then uncomment below comment
                    //  youTubePlayer.play();

                    //If you want to control the full screen event you can uncomment the below code
                    //Tell the player you want to control the fullscreen change
                   /*player.setFullscreenControlFlags(YouTubePlayer.FULLSCREEN_FLAG_CUSTOM_LAYOUT);
                    //Tell the player how to control the change
                    player.setOnFullscreenListener(new YouTubePlayer.OnFullscreenListener() {
                        @Override
                        public void onFullscreen(boolean arg0) {
                            // do full screen stuff here, or don't.
                            Log.e(TAG,"Full screen mode");
                        }
                    });*/

                }
            }

            @Override
            public void onInitializationFailure(YouTubePlayer.Provider arg0, YouTubeInitializationResult arg1) {
                //print or show error if initialization failed
                Log.e(TAG, "Youtube Player View initialization failed");
            }
        });
    }

}</pre><p>
Youtube Player is having three different type of <a href="https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayer.PlayerStyle" target="_blank">Player Style</a>:</p>
<ol>
<li><strong>Default Player Style : </strong>Youtube Player default style is <strong>DEFAULT</strong> only. In this style it contains <strong>all the control</strong> that we get in <strong>Youtube Android App</strong>.</li>
</ol>
<div id="attachment_1341" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1341" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/default_player_style.jpg?resize=576%2C1024" alt="Default Player Style" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/default_player_style.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/default_player_style.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/default_player_style.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/11/default_player_style.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Default Player Style</p></div>
<p>2. <strong>Minimal Player Style</strong> : In this style we only get <strong>Play/Pause button</strong> with showing<strong> video progress at bottom</strong>.</p>
<div id="attachment_1349" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1349" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/minimal_player_style.jpg?resize=576%2C1024" alt="Minimal Player Style" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/minimal_player_style.jpg?resize=576%2C1024 576w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/minimal_player_style.jpg?resize=169%2C300 169w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/minimal_player_style.jpg?resize=768%2C1365 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/minimal_player_style.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Minimal Player Style</p></div>
<p>3. <strong>Chromeless Player Style</strong> : This style doesn&#8217;t contain any controls.</p>
<div id="attachment_1337" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1337" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/chromeless_player_style.jpg?resize=576%2C1024" alt="Chromeless Player Style" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/chromeless_player_style.jpg?resize=576%2C1024 576w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/chromeless_player_style.jpg?resize=169%2C300 169w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/chromeless_player_style.jpg?resize=768%2C1365 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/chromeless_player_style.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Chromeless Player Style</p></div>
<p>&nbsp;</p>
<div id="attachment_1346" style="width: 612px" class="wp-caption aligncenter"><img class="size-large wp-image-1346" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/full_screen_video.jpg?resize=602%2C339" alt="Full Screen Mode or Landscape Mode" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/full_screen_video.jpg?resize=1024%2C576 1024w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/full_screen_video.jpg?resize=300%2C169 300w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/full_screen_video.jpg?resize=768%2C432 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/full_screen_video.jpg?w=1204 1204w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/11/full_screen_video.jpg?w=1806 1806w" sizes="(max-width: 602px) 100vw, 602px" data-recalc-dims="1" /><p class="wp-caption-text">Full Screen Mode or Landscape Mode</p></div>
<p><b>13. </b>Don&#8217;t forget to give <em><strong>Internet</strong></em> permission in your <em><strong>AndroidManifest.xml</strong> </em>file else your app will not run.</p><pre class="crayon-plain-tag">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;</pre><p>
<b>14</b>. Finally all done, now you can also make your app where you can play Videos from Youtube.</p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/YoutubeAndroidPlayerAPIDemo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app/">How to show Youtube Video Thumbnail &#038; Play Youtube Video in Android App</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1329</post-id>	</item>
		<item>
		<title>Android Confirm Credential (Security Lock)</title>
		<link>http://www.androhub.com/android-confirm-credential-security-lock/</link>
		<comments>http://www.androhub.com/android-confirm-credential-security-lock/#respond</comments>
		<pubDate>Thu, 05 Oct 2017 16:25:17 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[Android Authentication]]></category>
		<category><![CDATA[confirm credential]]></category>
		<category><![CDATA[intent]]></category>
		<category><![CDATA[open security settings]]></category>
		<category><![CDATA[pin lock]]></category>
		<category><![CDATA[security lock]]></category>
		<category><![CDATA[startactivityforresult]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1314</guid>
		<description><![CDATA[<p>Hi all today we are going to work on one more app security topic apart from FingerPrint Authentication. In many of apps you have seen the app is opening a screen where it ask you to enter the PIN or draw a Pattern which is by default security you have set to your device. Some the [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-confirm-credential-security-lock/">Android Confirm Credential (Security Lock)</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>Hi all today we are going to work on one more app security topic apart from <a href="http://www.androhub.com/android-fingerprint-authentication/" target="_blank">FingerPrint Authentication</a>. In many of apps you have seen the app is opening a screen where it ask you to enter the PIN or draw a Pattern which is by default security you have set to your device. Some the apps are <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user" target="_blank">Tez</a>, <a href="https://play.google.com/store/apps/details?id=net.one97.paytm" target="_blank">Paytm</a>, etc.</p>
<p><strong>NOTE : The Security Lock authentication only works for API Level 21+ (Lollipop+). </strong></p>
<p>So today we are going to do the same and we will see how we can also implement the same kind of authentication which other apps are doing. The steps to implement the Security Level Authentication are following:</p>
<p><strong>1</strong>. You will be needing a <em><a href="https://developer.android.com/reference/android/app/KeyguardManager.html" target="_blank">KeyguardManager</a></em> to implement this authentication:</p><pre class="crayon-plain-tag">KeyguardManager keyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);</pre><p>
<strong>2</strong>. Create an <a href="http://www.androhub.com/android-intents/" target="_blank">Intent</a> like below:</p><pre class="crayon-plain-tag">Intent i = keyguardManager.createConfirmDeviceCredentialIntent(title, description);</pre><p>
After creating Intent start the intent with <a href="http://www.androhub.com/android-startactivityforresult/" target="_blank"><em><strong>startActivityForResult()</strong></em></a> to check if the authentication is successful or not.</p><pre class="crayon-plain-tag">try {
                //Start activity for result
                startActivityForResult(i, LOCK_REQUEST_CODE);
            } catch (Exception e) {
                //If some exception occurs means Screen lock is not set up please set screen lock
                
}</pre><p>
It will open the screen requesting user to enter the PIN or draw a Pattern which he has set for particular device.</p>
<div id="attachment_1321" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1321 size-large" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pattern.jpg?resize=576%2C1024" alt="Unlock via Pattern Screen" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pattern.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pattern.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pattern.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pattern.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Unlock via Pattern Screen</p></div>
<p><strong>3</strong>. Some of the devices have not enabled Security Lock for their device. So for those devices you will get exception and in that case you need to open the <strong>Security Settings</strong> of the device with an intent:</p><pre class="crayon-plain-tag">//Open Security screen directly to enable patter lock
                Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
                try {

                    //Start activity for result
                    startActivityForResult(intent, SECURITY_SETTING_REQUEST_CODE);
                } catch (Exception ex) {

                    //If app is unable to find any Security settings then user has to set screen lock manually
                    textView.setText(getResources().getString(R.string.setting_label));
                }</pre><p>
<strong>4. </strong>Alternate way to check if the device is Security Lock enabled or not is given below :</p><pre class="crayon-plain-tag">private boolean isDeviceSecure() {
        KeyguardManager keyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);

        //this method only work whose api level is greater than or equal to Jelly_Bean (16)
        return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN &amp;&amp; keyguardManager.isKeyguardSecure();

        //You can also use keyguardManager.isDeviceSecure(); but it requires API Level 23

    }</pre><p>
<strong>The above method only works for API Level 16+ (Jelly Bean+)</strong>.</p>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_39407" width="602" height="339" src="https://www.youtube.com/embed/CqhpNxI8qYw?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New Android ⇒ Application Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. These are some strings that we are going to use in our project.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Security Lock Demo&lt;/string&gt;
    &lt;string name="unlock"&gt;Unlock&lt;/string&gt;
    &lt;string name="confirm_pattern"&gt;Confirm your screen lock PIN,Pattern or Password&lt;/string&gt;
    &lt;string name="setting_label"&gt;&lt;![CDATA[Please set the screen lock Manually by navigating to : Settings&gt;Security.]]&gt;&lt;/string&gt;
    &lt;string name="unlock_success"&gt;App is Unlocked successfully.&lt;/string&gt;
    &lt;string name="unlock_failed"&gt;Failed to Unlock the app.&lt;/string&gt;
    &lt;string name="device_is_secure"&gt;Device is now secure.&lt;/string&gt;
    &lt;string name="security_device_cancelled"&gt;Device is not secure or user cancel the request.&lt;/string&gt;
    &lt;string name="authenticate_again"&gt;Authenticate Again&lt;/string&gt;
&lt;/resources&gt;</pre><p>
<b>3</b>. Now go to <em>activity_main.xml</em> and add the below code to it.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="10dp"
    tools:context="com.security_lock_demo.MainActivity"&gt;


    &lt;TextView
        android:id="@+id/texview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="10dp"
        android:textColor="@android:color/black"
        android:textSize="18sp" /&gt;

    &lt;Button
        android:layout_width="match_parent"
        android:layout_marginTop="15dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:background="@color/colorPrimary"
        android:onClick="authenticateAgain"
        android:text="@string/authenticate_again"
        android:textColor="@android:color/white"
        android:textSize="15sp" /&gt;
&lt;/LinearLayout&gt;</pre><p>
<b>4</b>. After adding the<em> activity_main.xml</em> layout come to <em>MainActivity.java</em> and put the below code to it. This code contains all step by step information which we discussed above.</p><pre class="crayon-plain-tag">package com.security_lock_demo;

import android.app.KeyguardManager;
import android.content.Intent;
import android.os.Build;
import android.provider.Settings;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    private static final int LOCK_REQUEST_CODE = 221;
    private static final int SECURITY_SETTING_REQUEST_CODE = 233;

    private TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textView = (TextView) findViewById(R.id.texview);
        authenticateApp();
    }

    //method to authenticate app
    private void authenticateApp() {
        //Get the instance of KeyGuardManager
        KeyguardManager keyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);

        //Check if the device version is greater than or equal to Lollipop(21)
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
            //Create an intent to open device screen lock screen to authenticate
            //Pass the Screen Lock screen Title and Description
            Intent i = keyguardManager.createConfirmDeviceCredentialIntent(getResources().getString(R.string.unlock), getResources().getString(R.string.confirm_pattern));
            try {
                //Start activity for result
                startActivityForResult(i, LOCK_REQUEST_CODE);
            } catch (Exception e) {

                //If some exception occurs means Screen lock is not set up please set screen lock
                //Open Security screen directly to enable patter lock
                Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
                try {

                    //Start activity for result
                    startActivityForResult(intent, SECURITY_SETTING_REQUEST_CODE);
                } catch (Exception ex) {

                    //If app is unable to find any Security settings then user has to set screen lock manually
                    textView.setText(getResources().getString(R.string.setting_label));
                }
            }
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
            case LOCK_REQUEST_CODE:
                if (resultCode == RESULT_OK) {
                    //If screen lock authentication is success update text
                    textView.setText(getResources().getString(R.string.unlock_success));
                } else {
                    //If screen lock authentication is failed update text
                    textView.setText(getResources().getString(R.string.unlock_failed));
                }
                break;
            case SECURITY_SETTING_REQUEST_CODE:
                //When user is enabled Security settings then we don't get any kind of RESULT_OK
                //So we need to check whether device has enabled screen lock or not
                if (isDeviceSecure()) {
                    //If screen lock enabled show toast and start intent to authenticate user
                    Toast.makeText(this, getResources().getString(R.string.device_is_secure), Toast.LENGTH_SHORT).show();
                    authenticateApp();
                } else {
                    //If screen lock is not enabled just update text
                    textView.setText(getResources().getString(R.string.security_device_cancelled));
                }

                break;
        }
    }

    /**
     * method to return whether device has screen lock enabled or not
     **/
    private boolean isDeviceSecure() {
        KeyguardManager keyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE);

        //this method only work whose api level is greater than or equal to Jelly_Bean (16)
        return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN &amp;&amp; keyguardManager.isKeyguardSecure();

        //You can also use keyguardManager.isDeviceSecure(); but it requires API Level 23

    }

    //On Click of button do authentication again
    public void authenticateAgain(View view) {
        authenticateApp();
    }
}</pre><p>
<div id="attachment_1322" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1322" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pin.jpg?resize=576%2C1024" alt="Unlock via PIN Screen" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pin.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pin.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pin.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_via_pin.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Unlock via PIN Screen</p></div>
<div id="attachment_1320" style="width: 586px" class="wp-caption aligncenter"><img class="size-large wp-image-1320" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_success.jpg?resize=576%2C1024" alt="PIN/Pattern is Authenticated Successfully" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_success.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_success.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_success.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/09/unlock_success.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">PIN/Pattern is Authenticated Successfully</p></div>
<p>&nbsp;</p>
<p><b>5</b>. Finally all done, now you can also make your app secure with the help of Confirm Credential/Security Lock.</p>
<h2>USAGE</h2>
<p><strong>You can use the above code to authenticate the users while making Payment in your app or while accessing some critical information from app.</strong></p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/SecurityLockDemo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-confirm-credential-security-lock/">Android Confirm Credential (Security Lock)</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/android-confirm-credential-security-lock/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1314</post-id>	</item>
		<item>
		<title>Swipe Dismiss CardView with Coordinator Layout</title>
		<link>http://www.androhub.com/swipe-dismiss-cardview-with-coordinator-layout/</link>
		<comments>http://www.androhub.com/swipe-dismiss-cardview-with-coordinator-layout/#comments</comments>
		<pubDate>Tue, 16 May 2017 19:20:27 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[Android CardView]]></category>
		<category><![CDATA[cardview]]></category>
		<category><![CDATA[coordinator layout]]></category>
		<category><![CDATA[swipe dismiss]]></category>
		<category><![CDATA[swipe dismiss behavior]]></category>
		<category><![CDATA[swipeable card view]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1276</guid>
		<description><![CDATA[<p>Today we are going to learn an awesome inbuilt functionality provided by design library using Coordinator Layout. CoordinatorLayout is a super-powered FrameLayout. Coordinator Layout is intended for two primary use cases: As a top-level application decor or chrome layout. As a container for a specific interaction with one or more child views. So we are going to implement [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/swipe-dismiss-cardview-with-coordinator-layout/">Swipe Dismiss CardView with Coordinator Layout</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p style="text-align: left;">Today we are going to learn an awesome inbuilt functionality provided by design library using Coordinator Layout. CoordinatorLayout is a super-powered <a href="https://developer.android.com/reference/android/widget/FrameLayout.html" target="_blank">FrameLayout</a>. Coordinator Layout is intended for two primary use cases:</p>
<ol>
<li style="text-align: left;">As a top-level application decor or chrome layout.</li>
<li style="text-align: left;">As a container for a specific interaction with one or more child views.</li>
</ol>
<p>So we are going to implement swipe dismiss the CardView with Coordinate Layout. For this we are going to need :</p>
<ol>
<li><strong>Coordinator Layout</strong></li>
<li><strong>CardView</strong> : A FrameLayout with a rounded corner background and shadow.</li>
<li><strong><a href="https://developer.android.com/reference/android/support/design/widget/SwipeDismissBehavior.html" target="_blank">SwipeDismissBehavior</a> Class</strong> : An interaction behavior plugin for child views of CoordinatorLayout to provide support for the ‘swipe-to-dismiss’ gesture.</li>
</ol>
<p>Learn more articles about Coordinator Layout <a href="http://www.androhub.com/?s=coordinator+layout" target="_blank">here</a>.</p>
<h3>VIDEO DEMO</h3>
<p><iframe  id="_ytid_69072" width="602" height="339" src="https://www.youtube.com/embed/hKNGn8-2gvA?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New ⇒ New Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>app ⇒ build.gradle </strong> and add below dependencies to it.</p><pre class="crayon-plain-tag">//dependency for CardView
    compile 'com.android.support:cardview-v7:25.3.1'
    //dependency for Coordinator Layout
    compile 'com.android.support:design:25.3.1'</pre><p>
<strong>3.</strong> Now open up your <em>activity_main.xml</em> and place the below code to it. These layout contains CardView inside Coordinator Layout.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.swipedismisscardview_demo.MainActivity"&gt;

    &lt;!-- CardView to be dismissed --&gt;
    &lt;android.support.v7.widget.CardView
        android:id="@+id/text_card_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        app:cardBackgroundColor="@android:color/white"
        app:cardCornerRadius="4dp"
        app:cardElevation="4dp"
        app:contentPadding="10dp"&gt;

        &lt;TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:text="@string/cardview_text"
            android:textColor="@android:color/black"
            android:textSize="15sp" /&gt;
    &lt;/android.support.v7.widget.CardView&gt;


&lt;/android.support.design.widget.CoordinatorLayout&gt;</pre><p>
<strong>4.</strong> Now to implement <a href="https://developer.android.com/reference/android/support/design/widget/SwipeDismissBehavior.html" target="_blank">SwipeDismissBeahvior</a> we will be needing below code. Here you can set the swipe dismiss direction and after setting SwipeDismissBehavior you have to get the CardView Layout params and set the behavior to Coordinator Layout.</p><pre class="crayon-plain-tag">/**
     * method to implement swipe dismiss feature over card view
     **/
    private void implementSwipeDismiss() {
        SwipeDismissBehavior swipeDismissBehavior = new SwipeDismissBehavior();
        swipeDismissBehavior.setSwipeDirection(SwipeDismissBehavior.SWIPE_DIRECTION_ANY);//Swipe direction i.e any direction, here you can put any direction LEFT or RIGHT

        CoordinatorLayout.LayoutParams layoutParams =
                (CoordinatorLayout.LayoutParams) textCardView.getLayoutParams();

        layoutParams.setBehavior(swipeDismissBehavior);//set swipe behaviour to Coordinator layout
    }</pre><p>
<strong>5.</strong> Finally open your <em>MainActivity.java</em> and place the below code to it.</p><pre class="crayon-plain-tag">package com.swipedismisscardview_demo;

import android.os.Bundle;
import android.support.design.widget.CoordinatorLayout;
import android.support.design.widget.SwipeDismissBehavior;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.CardView;

public class MainActivity extends AppCompatActivity {

    private CardView textCardView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textCardView = (CardView) findViewById(R.id.text_card_view);
        implementSwipeDismiss();
    }

    /**
     * method to implement swipe dismiss feature over card view
     **/
    private void implementSwipeDismiss() {
        SwipeDismissBehavior swipeDismissBehavior = new SwipeDismissBehavior();
        swipeDismissBehavior.setSwipeDirection(SwipeDismissBehavior.SWIPE_DIRECTION_ANY);//Swipe direction i.e any direction, here you can put any direction LEFT or RIGHT

        CoordinatorLayout.LayoutParams layoutParams =
                (CoordinatorLayout.LayoutParams) textCardView.getLayoutParams();

        layoutParams.setBehavior(swipeDismissBehavior);//set swipe behaviour to Coordinator layout
    }
}</pre><p>
<b>6</b>. Finally, all done. Now you can also make application using Swipe Dismiss Behavior.</p>
<p>Thanks. <img src="https://s.w.org/images/core/emoji/72x72/1f642.png" alt="🙂" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p><a href="http://androhub.com/downloads/SwipeDismissCardView_Demo.zip" target="_blank"><b>Download Source Code – &gt;</b></a></p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/swipe-dismiss-cardview-with-coordinator-layout/">Swipe Dismiss CardView with Coordinator Layout</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/swipe-dismiss-cardview-with-coordinator-layout/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1276</post-id>	</item>
		<item>
		<title>Swipe Dismiss RecyclerView</title>
		<link>http://www.androhub.com/swipe-dismiss-recyclerview/</link>
		<comments>http://www.androhub.com/swipe-dismiss-recyclerview/#respond</comments>
		<pubDate>Tue, 02 May 2017 12:27:23 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[Android RecyclerView]]></category>
		<category><![CDATA[cardview]]></category>
		<category><![CDATA[checkbox]]></category>
		<category><![CDATA[recycler view animation]]></category>
		<category><![CDATA[recyclerview]]></category>
		<category><![CDATA[swipe cardview]]></category>
		<category><![CDATA[swipe dismiss]]></category>
		<category><![CDATA[swipe dismiss delete]]></category>
		<category><![CDATA[swipe gesture in recyclerview]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1265</guid>
		<description><![CDATA[<p>Hello Friends, today we are going to learn an awesome functionality based on Swipe Dismiss RecyclerView. To achieve this functionality we are going to need one java class which will handle the Swipe gesture. The class you can get from this link, this is a superb class that you need to implement with your recycler [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/swipe-dismiss-recyclerview/">Swipe Dismiss RecyclerView</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>Hello Friends, today we are going to learn an awesome functionality based on Swipe Dismiss RecyclerView. To achieve this functionality we are going to need one java class which will handle the Swipe gesture. The class you can get from this <a href="https://github.com/brnunes/SwipeableRecyclerView/blob/master/lib/src/main/java/com/github/brnunes/swipeablerecyclerview/SwipeableRecyclerViewTouchListener.java#L292" target="_blank">link</a>, this is a superb class that you need to implement with your recycler view.</p>
<p>The java class consists of below two main things:</p>
<ol>
<li>A subclass of <strong>RecyclerView.OnItemTouchListener</strong> that listens to touch events and detects when an item is being swiped, animating it accordingly.</li>
<li>A <strong>SwipeListener</strong> that is called in order to know if an item can be dismissed and called again when items are dismissed.</li>
</ol>
<h2>Example</h2>
<p>In this tutorial, we are going to learn how to implement swipe dismiss functionality to RecyclerView items.</p>
<h3>VIDEO DEMO</h3>
<p><iframe  id="_ytid_63947" width="602" height="339" src="https://www.youtube.com/embed/RfhD1P5tUDI?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New ⇒ New Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. These are some strings that we are going to use in our project.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Swipe To Dismiss CardView Demo&lt;/string&gt;
    &lt;string name="swipe_dismiss_right"&gt;Swipe Dismiss Right&lt;/string&gt;
    &lt;string name="swipe_dismiss_left"&gt;Swipe Dismiss Left&lt;/string&gt;
    &lt;string name="swipe_to_dismiss"&gt;Swipe To Dismiss&lt;/string&gt;
    &lt;string name="card_view_dismiss_success"&gt;CardView Dismissed Successfully.&lt;/string&gt;
&lt;/resources&gt;</pre><p>
<strong>3.</strong> Now open up your <em>activity_main.xml</em> and place the below code to it.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context="com.swipetodismisscardview_demo.MainActivity"&gt;

    &lt;!--  Check box to enable and disable left/right dismiss --&gt;
    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="10dp"&gt;

        &lt;CheckBox
            android:id="@+id/can_dismiss_right"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:checked="true"
            android:gravity="center_vertical"
            android:text="@string/swipe_dismiss_right"
            android:textColor="@android:color/white"
            android:textSize="14sp" /&gt;

        &lt;CheckBox
            android:id="@+id/can_dismiss_left"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:checked="true"
            android:gravity="center_vertical"
            android:text="@string/swipe_dismiss_left"
            android:textColor="@android:color/white"
            android:textSize="14sp" /&gt;
    &lt;/LinearLayout&gt;

    &lt;android.support.v7.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /&gt;

&lt;/LinearLayout&gt;</pre><p>
<strong>4.</strong> For RecyclerView row items create layout naming <em>custom_item_row_layout.xm</em>l and place the below code to it. You can use any layout here.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;android.support.v7.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:cardBackgroundColor="@android:color/white"
    app:cardCornerRadius="3dp"
    app:cardElevation="4dp"
    android:layout_marginTop="4dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    app:cardUseCompatPadding="true"
    app:contentPadding="10dp"&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"&gt;

        &lt;TextView
            android:id="@+id/card_view_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="10dp"
            android:textColor="@android:color/black"
            android:textSize="15sp" /&gt;

        &lt;TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:padding="5dp"
            android:text="@string/swipe_to_dismiss"
            android:textColor="@android:color/darker_gray"
            android:textSize="12sp" /&gt;
    &lt;/LinearLayout&gt;
&lt;/android.support.v7.widget.CardView&gt;</pre><p>
<strong>5.</strong> Now create adapter class for RecyclerView naming <em>RecyclerViewAdapter.java</em> and add the below code to it.</p><pre class="crayon-plain-tag">package com.swipetodismisscardview_demo;

import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import java.util.ArrayList;

/**
 * Created by sonu on 19/09/16.
 */

public class RecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerViewAdapter.ItemViewHolder&gt; {

    private static final String TAG = RecyclerViewAdapter.class.getSimpleName();


    static class ItemViewHolder extends RecyclerView.ViewHolder {
        TextView textView;

        ItemViewHolder(View view) {
            super(view);
            textView = (TextView) view.findViewById(R.id.card_view_label);
        }
    }


    private ArrayList&lt;String&gt; stringArrayList;

    private Context context;

    public RecyclerViewAdapter(Context context, ArrayList&lt;String&gt; stringArrayList) {
        this.stringArrayList = stringArrayList;
        this.context = context;
    }


    @Override
    public ItemViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {
        return new ItemViewHolder(LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.custom_item_row_layout, viewGroup, false));
    }

    @Override
    public void onBindViewHolder(final ItemViewHolder viewHolder, int i) {
        viewHolder.textView.setText(stringArrayList.get(i));
    }


    @Override
    public int getItemCount() {
        return (null != stringArrayList ? stringArrayList.size() : 0);
    }


}</pre><p>
<strong>6.</strong> Now open your <em>MainActivity.java</em> class and place the below code to it. In this class you can see the implementation of <strong><em>SwipeableRecyclerViewTouchListener.java</em> </strong>class.</p><pre class="crayon-plain-tag">/*  set swipe touch listener */
        SwipeableRecyclerViewTouchListener swipeTouchListener = new SwipeableRecyclerViewTouchListener(recyclerView, new SwipeableRecyclerViewTouchListener.SwipeListener() {
            @Override
            public boolean canSwipeLeft(int position) {
                //enable/disable left swipe on checkbox base else use true/false
                return dismissLeftCheck.isChecked();
            }

            @Override
            public boolean canSwipeRight(int position) {
                //enable/disable right swipe on checkbox base else use true/false
                return dismissRightCheck.isChecked();
            }

            @Override
            public void onDismissedBySwipeLeft(RecyclerView recyclerView, int[] reverseSortedPositions) {
                //on cardview swipe left dismiss update adapter
                onCardViewDismiss(reverseSortedPositions, stringArrayList, recyclerViewAdapter);
            }

            @Override
            public void onDismissedBySwipeRight(RecyclerView recyclerView, int[] reverseSortedPositions) {
                //on cardview swipe right dismiss update adapter
                onCardViewDismiss(reverseSortedPositions, stringArrayList, recyclerViewAdapter);
            }
        });

        //add item touch listener to recycler view
        recyclerView.addOnItemTouchListener(swipeTouchListener);</pre><p>
<span style="text-decoration: underline;"><strong>Full Source Code</strong></span></p><pre class="crayon-plain-tag">package com.swipetodismisscardview_demo;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.widget.CheckBox;
import android.widget.Toast;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {

    private CheckBox dismissLeftCheck, dismissRightCheck;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /* find check box ids */
        dismissLeftCheck = (CheckBox) findViewById(R.id.can_dismiss_left);
        dismissRightCheck = (CheckBox) findViewById(R.id.can_dismiss_right);

        setUpRecyclerView();
    }


    /*  set up recycler view */
    private void setUpRecyclerView() {

        //find reccycler view id and set layout manager
        RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);
        recyclerView.setHasFixedSize(true);
        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(this);
        recyclerView.setLayoutManager(linearLayoutManager);

        //get string array list
        final ArrayList&lt;String&gt; stringArrayList = getListData();

        //set recycler view adapter
        final RecyclerViewAdapter recyclerViewAdapter = new RecyclerViewAdapter(this, stringArrayList);
        recyclerView.setAdapter(recyclerViewAdapter);

        /*  set swipe touch listener */
        SwipeableRecyclerViewTouchListener swipeTouchListener = new SwipeableRecyclerViewTouchListener(recyclerView, new SwipeableRecyclerViewTouchListener.SwipeListener() {
            @Override
            public boolean canSwipeLeft(int position) {
                //enable/disable left swipe on checkbox base else use true/false
                return dismissLeftCheck.isChecked();
            }

            @Override
            public boolean canSwipeRight(int position) {
                //enable/disable right swipe on checkbox base else use true/false
                return dismissRightCheck.isChecked();
            }

            @Override
            public void onDismissedBySwipeLeft(RecyclerView recyclerView, int[] reverseSortedPositions) {
                //on cardview swipe left dismiss update adapter
                onCardViewDismiss(reverseSortedPositions, stringArrayList, recyclerViewAdapter);
            }

            @Override
            public void onDismissedBySwipeRight(RecyclerView recyclerView, int[] reverseSortedPositions) {
                //on cardview swipe right dismiss update adapter
                onCardViewDismiss(reverseSortedPositions, stringArrayList, recyclerViewAdapter);
            }
        });

        //add item touch listener to recycler view
        recyclerView.addOnItemTouchListener(swipeTouchListener);

    }

    /**
     * method to update array list and adapter on card view swipe dismiss left or right
     *
     * @param stringArrayList        containing list of data
     * @param recyclerViewAdapter    adapter placed over recycler view
     * @param reverseSortedPositions An array of positions to dismiss, sorted in descending
     *                               order for convenience.
     **/
    private void onCardViewDismiss(int[] reverseSortedPositions, ArrayList&lt;String&gt; stringArrayList, RecyclerViewAdapter recyclerViewAdapter) {
        for (int position : reverseSortedPositions) {
            stringArrayList.remove(position);
            recyclerViewAdapter.notifyItemRemoved(position);
        }
        Toast.makeText(this, getResources().getString(R.string.card_view_dismiss_success), Toast.LENGTH_SHORT).show();
        recyclerViewAdapter.notifyDataSetChanged();
    }

    /**
     * method to return dummy string array list data
     **/
    private ArrayList&lt;String&gt; getListData() {
        ArrayList&lt;String&gt; stringArrayList = new ArrayList&lt;&gt;();
        for (int i = 1; i &lt;= 20; i++)
            stringArrayList.add("Card View List Item : " + i);
        return stringArrayList;
    }
}</pre><p>
<div id="attachment_1268" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1268 size-large" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/05/left_swipe_dimiss.jpg?resize=576%2C1024" alt="Swipe Left to Dismiss CardView" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/05/left_swipe_dimiss.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/05/left_swipe_dimiss.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/05/left_swipe_dimiss.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/05/left_swipe_dimiss.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Swipe Left to Dismiss CardView</p></div>
<div id="attachment_1269" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1269 size-large" src="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/05/right_swipe_dismiss.jpg?resize=576%2C1024" alt="Swipe Right to Dismiss CardView" srcset="https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/05/right_swipe_dismiss.jpg?resize=576%2C1024 576w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/05/right_swipe_dismiss.jpg?resize=169%2C300 169w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/05/right_swipe_dismiss.jpg?resize=768%2C1365 768w, https://i0.wp.com/www.androhub.com/wp-content/uploads/2017/05/right_swipe_dismiss.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Swipe Right to Dismiss CardView</p></div>
<p><strong>7.</strong> Finally, create a new Java class naming <em>SwipeableRecyclerViewTouchListener.java</em> and place the below code to it. The below class used to handle the touch events of dismiss functionality.</p><pre class="crayon-plain-tag">package com.swipetodismisscardview_demo;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.animation.ValueAnimator;
import android.annotation.TargetApi;
import android.graphics.Rect;
import android.os.Build;
import android.os.SystemClock;
import android.support.annotation.NonNull;
import android.support.v4.view.ViewCompat;
import android.support.v4.view.ViewPropertyAnimatorListener;
import android.support.v7.widget.RecyclerView;
import android.view.MotionEvent;
import android.view.VelocityTracker;
import android.view.View;
import android.view.ViewConfiguration;
import android.view.ViewGroup;
import android.widget.ListView;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

/*
 * Copyright 2013 Google Inc.
 * Copyright 2015 Bruno Romeu Nunes
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * A {@link View.OnTouchListener} that makes the list items in a {@link android.support.v7.widget.RecyclerView}
 * dismissable by swiping.
 * &lt;p/&gt;
 * &lt;p&gt;Example usage:&lt;/p&gt;
 * &lt;p/&gt;
 * &lt;pre&gt;
 * SwipeDismissRecyclerViewTouchListener touchListener =
 *         new SwipeDismissRecyclerViewTouchListener(
 *                 listView,
 *                 new SwipeDismissRecyclerViewTouchListener.OnDismissCallback() {
 *                     public void onDismiss(ListView listView, int[] reverseSortedPositions) {
 *                         for (int position : reverseSortedPositions) {
 *                             adapter.remove(adapter.getItem(position));
 *                         }
 *                         adapter.notifyDataSetChanged();
 *                     }
 *                 });
 * listView.setOnTouchListener(touchListener);
 * listView.setOnScrollListener(touchListener.makeScrollListener());
 * &lt;/pre&gt;
 * &lt;p/&gt;
 * &lt;p&gt;This class Requires API level 11 or later due to use of {@link
 * android.view.ViewPropertyAnimator}.&lt;/p&gt;
 */

class SwipeableRecyclerViewTouchListener implements RecyclerView.OnItemTouchListener {
    // Cached ViewConfiguration and system-wide constant values
    private int mSlop;
    private int mMinFlingVelocity;
    private int mMaxFlingVelocity;
    private long mAnimationTime;

    // Fixed properties
    private RecyclerView mRecyclerView;
    private SwipeListener mSwipeListener;
    private int mViewWidth = 1; // 1 and not 0 to prevent dividing by zero

    // Transient properties
    private List&lt;PendingDismissData&gt; mPendingDismisses = new ArrayList&lt;&gt;();
    private int mDismissAnimationRefCount = 0;
    private float mAlpha;
    private float mDownX;
    private float mDownY;
    private boolean mSwiping;
    private int mSwipingSlop;
    private VelocityTracker mVelocityTracker;
    private int mDownPosition;
    private int mAnimatingPosition = ListView.INVALID_POSITION;
    private View mDownView;
    private boolean mPaused;
    private float mFinalDelta;

    private boolean mSwipingLeft;
    private boolean mSwipingRight;

    /**
     * Constructs a new swipe touch listener for the given {@link android.support.v7.widget.RecyclerView}
     *
     * @param recyclerView The recycler view whose items should be dismissable by swiping.
     * @param listener     The listener for the swipe events.
     */
    public SwipeableRecyclerViewTouchListener(RecyclerView recyclerView, SwipeListener listener) {
        ViewConfiguration vc = ViewConfiguration.get(recyclerView.getContext());
        mSlop = vc.getScaledTouchSlop();
        mMinFlingVelocity = vc.getScaledMinimumFlingVelocity() * 16;
        mMaxFlingVelocity = vc.getScaledMaximumFlingVelocity();
        mAnimationTime = recyclerView.getContext().getResources().getInteger(
                android.R.integer.config_shortAnimTime);
        mRecyclerView = recyclerView;
        mSwipeListener = listener;


        /**
         * This will ensure that this SwipeableRecyclerViewTouchListener is paused during list view scrolling.
         * If a scroll listener is already assigned, the caller should still pass scroll changes through
         * to this listener.
         */
        mRecyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() {
            @Override
            public void onScrollStateChanged(RecyclerView recyclerView, int newState) {
                setEnabled(newState != RecyclerView.SCROLL_STATE_DRAGGING);
            }

            @Override
            public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
            }
        });
    }

    /**
     * Enables or disables (pauses or resumes) watching for swipe-to-dismiss gestures.
     *
     * @param enabled Whether or not to watch for gestures.
     */
    public void setEnabled(boolean enabled) {
        mPaused = !enabled;
    }

    @Override
    public boolean onInterceptTouchEvent(RecyclerView rv, MotionEvent motionEvent) {
        return handleTouchEvent(motionEvent);
    }

    @Override
    public void onRequestDisallowInterceptTouchEvent(boolean disallowIntercept) {
        // Do nothing.
    }

    @Override
    public void onTouchEvent(RecyclerView rv, MotionEvent motionEvent) {
        handleTouchEvent(motionEvent);
    }

    private boolean handleTouchEvent(MotionEvent motionEvent) {
        if (mViewWidth &lt; 2) {
            mViewWidth = mRecyclerView.getWidth();
        }

        switch (motionEvent.getActionMasked()) {
            case MotionEvent.ACTION_DOWN: {
                if (mPaused) {
                    break;
                }

                // Find the child view that was touched (perform a hit test)
                Rect rect = new Rect();
                int childCount = mRecyclerView.getChildCount();
                int[] listViewCoords = new int[2];
                mRecyclerView.getLocationOnScreen(listViewCoords);
                int x = (int) motionEvent.getRawX() - listViewCoords[0];
                int y = (int) motionEvent.getRawY() - listViewCoords[1];
                View child;
                for (int i = 0; i &lt; childCount; i++) {
                    child = mRecyclerView.getChildAt(i);
                    child.getHitRect(rect);
                    if (rect.contains(x, y)) {
                        mDownView = child;
                        break;
                    }
                }

                if (mDownView != null &amp;&amp; mAnimatingPosition != mRecyclerView.getChildLayoutPosition(mDownView)) {
                    mAlpha = ViewCompat.getAlpha(mDownView);
                    mDownX = motionEvent.getRawX();
                    mDownY = motionEvent.getRawY();
                    mDownPosition = mRecyclerView.getChildLayoutPosition(mDownView);
                    mSwipingLeft = mSwipeListener.canSwipeLeft(mDownPosition);
                    mSwipingRight = mSwipeListener.canSwipeRight(mDownPosition);
                    if (mSwipingLeft || mSwipingRight) {
                        mVelocityTracker = VelocityTracker.obtain();
                        mVelocityTracker.addMovement(motionEvent);
                    } else {
                        mDownView = null;
                    }
                }
                break;
            }

            case MotionEvent.ACTION_CANCEL: {
                if (mVelocityTracker == null) {
                    break;
                }

                if (mDownView != null &amp;&amp; mSwiping) {
                    // cancel
                    ViewCompat.animate(mDownView)
                            .translationX(0)
                            .alpha(mAlpha)
                            .setDuration(mAnimationTime)
                            .setListener(null);
                }
                mVelocityTracker.recycle();
                mVelocityTracker = null;
                mDownX = 0;
                mDownY = 0;
                mDownView = null;
                mDownPosition = ListView.INVALID_POSITION;
                mSwiping = false;
                break;
            }

            case MotionEvent.ACTION_UP: {
                if (mVelocityTracker == null) {
                    break;
                }

                mFinalDelta = motionEvent.getRawX() - mDownX;
                mVelocityTracker.addMovement(motionEvent);
                mVelocityTracker.computeCurrentVelocity(1000);
                float velocityX = mVelocityTracker.getXVelocity();
                float absVelocityX = Math.abs(velocityX);
                float absVelocityY = Math.abs(mVelocityTracker.getYVelocity());
                boolean dismiss = false;
                boolean dismissRight = false;
                if (Math.abs(mFinalDelta) &gt; mViewWidth / 2 &amp;&amp; mSwiping) {
                    dismiss = true;
                    dismissRight = mFinalDelta &gt; 0;
                } else if (mMinFlingVelocity &lt;= absVelocityX &amp;&amp; absVelocityX &lt;= mMaxFlingVelocity
                        &amp;&amp; absVelocityY &lt; absVelocityX &amp;&amp; mSwiping) {
                    // dismiss only if flinging in the same direction as dragging
                    dismiss = (velocityX &lt; 0) == (mFinalDelta &lt; 0);
                    dismissRight = mVelocityTracker.getXVelocity() &gt; 0;
                }
                if (dismiss &amp;&amp; mDownPosition != mAnimatingPosition &amp;&amp; mDownPosition != ListView.INVALID_POSITION) {
                    // dismiss
                    final View downView = mDownView; // mDownView gets null'd before animation ends
                    final int downPosition = mDownPosition;
                    ++mDismissAnimationRefCount;
                    mAnimatingPosition = mDownPosition;
                    ViewCompat.animate(mDownView)
                            .translationX(dismissRight ? mViewWidth : -mViewWidth)
                            .alpha(0)
                            .setDuration(mAnimationTime)
                            .setListener(new ViewPropertyAnimatorListener() {
                                @Override
                                public void onAnimationStart(View view) {
                                    // Do nothing.
                                }

                                @Override
                                public void onAnimationEnd(View view) {
                                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB) {
                                        performDismiss(downView, downPosition);
                                    }
                                }

                                @Override
                                public void onAnimationCancel(View view) {
                                    // Do nothing.
                                }
                            });
                } else {
                    // cancel
                    ViewCompat.animate(mDownView)
                            .translationX(0)
                            .alpha(mAlpha)
                            .setDuration(mAnimationTime)
                            .setListener(null);
                }
                mVelocityTracker.recycle();
                mVelocityTracker = null;
                mDownX = 0;
                mDownY = 0;
                mDownView = null;
                mDownPosition = ListView.INVALID_POSITION;
                mSwiping = false;
                break;
            }

            case MotionEvent.ACTION_MOVE: {
                if (mVelocityTracker == null || mPaused) {
                    break;
                }

                mVelocityTracker.addMovement(motionEvent);
                float deltaX = motionEvent.getRawX() - mDownX;
                float deltaY = motionEvent.getRawY() - mDownY;
                if (!mSwiping &amp;&amp; Math.abs(deltaX) &gt; mSlop &amp;&amp; Math.abs(deltaY) &lt; Math.abs(deltaX) / 2) {
                    mSwiping = true;
                    mSwipingSlop = (deltaX &gt; 0 ? mSlop : -mSlop);
                }

                if (deltaX &lt; 0 &amp;&amp; !mSwipingLeft)
                    mSwiping = false;
                if (deltaX &gt; 0 &amp;&amp; !mSwipingRight)
                    mSwiping = false;

                if (mSwiping) {
                    ViewCompat.setTranslationX(mDownView, deltaX - mSwipingSlop);
                    ViewCompat.setAlpha(mDownView, Math.max(0f, Math.min(mAlpha,
                            mAlpha * (1f - Math.abs(deltaX) / mViewWidth))));
                    return true;
                }
                break;
            }
        }

        return false;
    }

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void performDismiss(final View dismissView, final int dismissPosition) {
        // Animate the dismissed list item to zero-height and fire the dismiss callback when
        // all dismissed list item animations have completed. This triggers layout on each animation
        // frame; in the future we may want to do something smarter and more performant.

        final ViewGroup.LayoutParams lp = dismissView.getLayoutParams();
        final int originalLayoutParamsHeight = lp.height;
        final int originalHeight = dismissView.getHeight();

        ValueAnimator animator = ValueAnimator.ofInt(originalHeight, 1).setDuration(mAnimationTime);

        animator.addListener(new AnimatorListenerAdapter() {
            @Override
            public void onAnimationEnd(Animator animation) {
                --mDismissAnimationRefCount;
                if (mDismissAnimationRefCount == 0) {
                    // No active animations, process all pending dismisses.
                    // Sort by descending position
                    Collections.sort(mPendingDismisses);

                    int[] dismissPositions = new int[mPendingDismisses.size()];
                    for (int i = mPendingDismisses.size() - 1; i &gt;= 0; i--) {
                        dismissPositions[i] = mPendingDismisses.get(i).position;
                    }

                    if (mFinalDelta &lt; 0) {
                        mSwipeListener.onDismissedBySwipeLeft(mRecyclerView, dismissPositions);
                    } else {
                        mSwipeListener.onDismissedBySwipeRight(mRecyclerView, dismissPositions);
                    }

                    // Reset mDownPosition to avoid MotionEvent.ACTION_UP trying to start a dismiss
                    // animation with a stale position
                    mDownPosition = ListView.INVALID_POSITION;

                    ViewGroup.LayoutParams lp;
                    for (PendingDismissData pendingDismiss : mPendingDismisses) {
                        // Reset view presentation
                        pendingDismiss.view.setAlpha(mAlpha);
                        pendingDismiss.view.setTranslationX(0);

                        lp = pendingDismiss.view.getLayoutParams();
                        lp.height = originalLayoutParamsHeight;

                        pendingDismiss.view.setLayoutParams(lp);
                    }

                    // Send a cancel event
                    long time = SystemClock.uptimeMillis();
                    MotionEvent cancelEvent = MotionEvent.obtain(time, time,
                            MotionEvent.ACTION_CANCEL, 0, 0, 0);
                    mRecyclerView.dispatchTouchEvent(cancelEvent);

                    mPendingDismisses.clear();
                    mAnimatingPosition = ListView.INVALID_POSITION;
                }
            }
        });

        animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override
            public void onAnimationUpdate(ValueAnimator valueAnimator) {
                lp.height = (Integer) valueAnimator.getAnimatedValue();
                dismissView.setLayoutParams(lp);
            }
        });

        mPendingDismisses.add(new PendingDismissData(dismissPosition, dismissView));
        animator.start();
    }

    /**
     * The callback interface used by {@link SwipeableRecyclerViewTouchListener} to inform its client
     * about a swipe of one or more list item positions.
     */
    public  interface SwipeListener {
        /**
         * Called to determine whether the given position can be swiped to the left.
         */
        boolean canSwipeLeft(int position);

        /**
         * Called to determine whether the given position can be swiped to the right.
         */
        boolean canSwipeRight(int position);

        /**
         * Called when the item has been dismissed by swiping to the left.
         *
         * @param recyclerView           The originating {@link android.support.v7.widget.RecyclerView}.
         * @param reverseSortedPositions An array of positions to dismiss, sorted in descending
         *                               order for convenience.
         */
        void onDismissedBySwipeLeft(RecyclerView recyclerView, int[] reverseSortedPositions);

        /**
         * Called when the item has been dismissed by swiping to the right.
         *
         * @param recyclerView           The originating {@link android.support.v7.widget.RecyclerView}.
         * @param reverseSortedPositions An array of positions to dismiss, sorted in descending
         *                               order for convenience.
         */
        void onDismissedBySwipeRight(RecyclerView recyclerView, int[] reverseSortedPositions);
    }

    class PendingDismissData implements Comparable&lt;PendingDismissData&gt; {
        public int position;
        public View view;

        public PendingDismissData(int position, View view) {
            this.position = position;
            this.view = view;
        }

        @Override
        public int compareTo(@NonNull PendingDismissData other) {
            // Sort by descending position
            return other.position - position;
        }
    }
}</pre><p>
<b>8</b>. Finally, all done. Now you can also make application using Swipe Dismiss functionality.</p>
<p>Thanks. <img src="https://s.w.org/images/core/emoji/72x72/1f642.png" alt="🙂" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p><a href="http://androhub.com/downloads/SwipeToDismissCardView_Demo.zip" target="_blank"><b>Download Source Code – &gt;</b></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/swipe-dismiss-recyclerview/">Swipe Dismiss RecyclerView</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/swipe-dismiss-recyclerview/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1265</post-id>	</item>
		<item>
		<title>Android Floating Widget like Facebook Messenger Chat Head</title>
		<link>http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/</link>
		<comments>http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/#comments</comments>
		<pubDate>Wed, 29 Mar 2017 14:32:07 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Advanced]]></category>
		<category><![CDATA[chat head]]></category>
		<category><![CDATA[floating]]></category>
		<category><![CDATA[floating chat head]]></category>
		<category><![CDATA[Floating widget]]></category>
		<category><![CDATA[messenger chat head]]></category>
		<category><![CDATA[servcie]]></category>

		<guid isPermaLink="false">http://www.androhub.com/?p=1211</guid>
		<description><![CDATA[<p>Floating widgets are the views that float over the screen. We all love the chat heads (or chat bubbles) from the popular Facebook Messenger. This provides very handy and easy access to the chat conversation screen no matter on which screen you are. Chat heads are very convenient for multitasking as a user can work [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/">Android Floating Widget like Facebook Messenger Chat Head</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>Floating widgets are the views that float over the screen. We all love the chat heads (or chat bubbles) from the popular <a href="https://www.messenger.com/" target="_blank">Facebook Messenger</a>. This provides very handy and easy access to the chat conversation screen no matter on which screen you are. Chat heads are very convenient for multitasking as a user can work and chat at the same time. That means if you are using the any app on your phone and if any new message arrives, you can open the conversation and replay the message without switching app. Pretty cool!!!</p>
<h2>Understanding the basics</h2>
<ol>
<li>Floating widget is nothing but the view that is drawn over other applications. Android system allows applications to draw over other application if the application has <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission. We are going to use the <a href="http://www.androhub.com/android-services/" target="_blank">background service</a> to add the floating widget into the view hierarchy of the current screen. So, this floating view is always on top of application windows.</li>
<li>To drag the view across the screen we are going to override <strong>OnTouchListener()</strong> to listen to drag events and change the position of the view has in the screen.</li>
</ol>
<h2>Example</h2>
<p>In this tutorial, we are going to learn how to create simple chat head and allow user to drag them across the screen. So that user can adjust the position of the floating widget in the screen.</p>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_96920" width="602" height="339" src="https://www.youtube.com/embed/B5zRaD7B504?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New ⇒ New Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. These are some strings that we are going to use in our project.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Floating Widget Demo&lt;/string&gt;
    &lt;string name="create_floating_widget"&gt;Create Floating Widget&lt;/string&gt;
    &lt;string name="floating_widget_label"&gt;Floating Widget Label&lt;/string&gt;
    &lt;string name="floating_widget_details"&gt;Floating Widget Details&lt;/string&gt;
    &lt;string name="draw_other_app_permission_denied"&gt;Draw over other app permission not available. App won\'t work without permission. Please try again.&lt;/string&gt;
&lt;/resources&gt;</pre><p>
<b>3</b>. Add <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission to the AndroidManifest.xml file. This permission allows an app to create windows, shown on top of all other apps.</p><pre class="crayon-plain-tag">&lt;!--  Permission required to draw floating widget over other apps  --&gt;
    &lt;uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /&gt;</pre><p>
<b>4</b>. Create a new layout naming <em>floating_widget_layout.xml</em> for the floating widget view. This layout will contain two main views.</p>
<p><strong>Collapsed view:</strong><br />
The floating widget will remain collapsed when the view is launched. When the user clicks on this view, an expanded view will open.</p>
<p><strong>Expanded View:</strong><br />
This view will contain all the views that you want to display when user clicks on Floating Widget.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"&gt;

    &lt;!--   Root container of Floating Widget View  --&gt;
    &lt;RelativeLayout
        android:id="+id/root_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"&gt;

        &lt;!--  View while view is collapsed  --&gt;

        &lt;RelativeLayout
            android:id="+id/collapse_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="visible"&gt;

            &lt;!--   ImageView of floating widget  --&gt;
            &lt;ImageView
                android:id="+id/collapsed_iv"
                android:layout_width="70dp"
                android:layout_height="70dp"
                android:layout_marginTop="8dp"
                android:src="mipmap/ic_launcher_round"
                tools:ignore="ContentDescription" /&gt;

            &lt;!--   Close button to close Floating Widget View  --&gt;
            &lt;ImageView
                android:id="+id/close_floating_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:layout_marginTop="5dp"
                android:background="drawable/circle_shape"
                android:src="drawable/ic_close_white_24dp"
                tools:ignore="ContentDescription" /&gt;
        &lt;/RelativeLayout&gt;

        &lt;!--   View while view is expanded   --&gt;
        &lt;LinearLayout
            android:id="+id/expanded_container"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="android:color/white"
            android:gravity="center"
            android:orientation="horizontal"
            android:padding="8dp"
            android:visibility="gone"&gt;

            &lt;ImageView
                android:id="+id/floating_widget_image_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="mipmap/ic_launcher" /&gt;

            &lt;LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:orientation="vertical"&gt;

                &lt;TextView
                    android:id="+id/floating_widget_title_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:text="string/floating_widget_label"
                    android:textColor="android:color/black"
                    android:textSize="14sp" /&gt;

                &lt;TextView
                    android:id="+id/floating_widget_detail_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:text="string/floating_widget_details"
                    android:textColor="android:color/darker_gray"
                    android:textSize="11sp" /&gt;
            &lt;/LinearLayout&gt;

            &lt;!--  ImageView to Close Expanded View  --&gt;
            &lt;ImageView
                android:id="+id/close_expanded_view"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:padding="10dp"
                android:src="drawable/ic_close_black_24dp" /&gt;

            &lt;!--  ImageView to Open Activity  --&gt;
            &lt;ImageView
                android:id="+id/open_activity_button"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:padding="10dp"
                android:src="drawable/ic_aspect_ratio_black_24dp" /&gt;
        &lt;/LinearLayout&gt;
    &lt;/RelativeLayout&gt;
&lt;/FrameLayout&gt;</pre><p>
<div id="attachment_1217" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1217 size-large" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=576%2C1024" alt="Collapse View Screenshot" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Collapse View Screenshot</p></div>
<p>&nbsp;</p>
<div id="attachment_1218" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1218 size-large" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=576%2C1024" alt="Expanded View Screenshot" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Expanded View Screenshot</p></div>
<p><b>5</b>. For chat head if you long press it and drag to bottom a remove layout shows with close image. So we have to create the same layout naming <em>remove_floating_widget_layout.xml</em> and add the ImageView with cross image to it. This view will be displayed when user hold/long press the chat head.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="+id/remove_relativelayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="10dp"&gt;

    &lt;ImageView
        android:id="+id/remove_img"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:background="drawable/white_circle_shape"
        android:padding="10dp"
        android:src="drawable/ic_close_white_24dp" /&gt;

&lt;/RelativeLayout&gt;</pre><p>
<b>6</b>. Below are the custom drawables and vector drawables that i am using in this project.</p>
<ul>
<li><strong>circle_shape.xml</strong></li>
</ul>
<pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"&gt;
    &lt;solid android:color="android:color/black" /&gt;

&lt;/shape&gt;</pre>
<ul>
<li><strong>ic_aspect_ratio_black_24dp.xml</strong></li>
</ul>
<pre class="crayon-plain-tag">&lt;vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0"&gt;
    &lt;path
        android:fillColor="#FF000000"
        android:pathData="M19,12h-2v3h-3v2h5v-5zM7,9h3L10,7L5,7v5h2L7,9zM21,3L3,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h18c1.1,0 2,-0.9 2,-2L23,5c0,-1.1 -0.9,-2 -2,-2zM21,19.01L3,19.01L3,4.99h18v14.02z"/&gt;
&lt;/vector&gt;</pre>
<ul>
<li><strong>ic_close_black_24dp.xml</strong></li>
</ul>
<pre class="crayon-plain-tag">&lt;vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0"&gt;
    &lt;path
        android:fillColor="#FF000000"
        android:pathData="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"/&gt;
&lt;/vector&gt;</pre>
<ul>
<li><strong>ic_close_white_24dp.xml</strong></li>
</ul>
<pre class="crayon-plain-tag">&lt;vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportHeight="24.0"
    android:viewportWidth="24.0"&gt;
    &lt;path
        android:fillColor="#FFFFFFFF"
        android:pathData="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z" /&gt;
&lt;/vector&gt;</pre>
<ul>
<li><strong>white_circle_shape.xml</strong></li>
</ul>
<pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"&gt;
    &lt;stroke
        android:width="1dp"
        android:color="android:color/white" /&gt;


&lt;/shape&gt;</pre>
<b>7</b>. Now create a service class called <em>FloatingWidgetService.java</em>. Whenever you want to display a chat head, start the service using <strong>startService()</strong> command. In <strong>onCreate()</strong> of the service we will add the layout of the chat head at the t<strong>op-left corner</strong> of the window.</p>
<p>In this class we are adding both Floating Widget View and Remove View to Window manager and initially hiding Remove View and showing only Collapse View of Floating Widget.</p><pre class="crayon-plain-tag">public class FloatingWidgetService extends Service implements View.OnClickListener {
    private WindowManager mWindowManager;
    private View mFloatingWidgetView, collapsedView, expandedView;
    private ImageView remove_image_view;
    private View removeFloatingWidgetView;

    public FloatingWidgetService() {
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        //init WindowManager
        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

        //Init LayoutInflater
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        addRemoveView(inflater);
        addFloatingWidgetView(inflater);
    }


    /*  Add Remove View to Window Manager  */
    private View addRemoveView(LayoutInflater inflater) {
        //Inflate the removing view layout we created
        removeFloatingWidgetView = inflater.inflate(R.layout.remove_floating_widget_layout, null);

        //Add the view to the window.
        WindowManager.LayoutParams paramRemove = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        paramRemove.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially the Removing widget view is not visible, so set visibility to GONE
        removeFloatingWidgetView.setVisibility(View.GONE);
        remove_image_view = (ImageView) removeFloatingWidgetView.findViewById(R.id.remove_img);

        //Add the view to the window
        mWindowManager.addView(removeFloatingWidgetView, paramRemove);
        return remove_image_view;
    }

    /*  Add Floating Widget View to Window Manager  */
    private void addFloatingWidgetView(LayoutInflater inflater) {
        //Inflate the floating view layout we created
        mFloatingWidgetView = inflater.inflate(R.layout.floating_widget_layout, null);

        //Add the view to the window.
        final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        params.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially view will be added to top-left corner, you change x-y coordinates according to your need
        params.x = 0;
        params.y = 100;

        //Add the view to the window
        mWindowManager.addView(mFloatingWidgetView, params);

        //find id of collapsed view layout
        collapsedView = mFloatingWidgetView.findViewById(R.id.collapse_view);

        //find id of the expanded view layout
        expandedView = mFloatingWidgetView.findViewById(R.id.expanded_container);
    }

 @Override
    public void onDestroy() {
        super.onDestroy();

        /*  on destroy remove both view from window manager */

        if (mFloatingWidgetView != null)
            mWindowManager.removeView(mFloatingWidgetView);

        if (removeFloatingWidgetView != null)
            mWindowManager.removeView(removeFloatingWidgetView);

    }</pre><p>
<b>8</b>. To drag the chat head along with the user’s touch, we have to override <strong>OnTouchListener()</strong>. Whenever the user touches the chat head, we will record the initial x and y coordinates, and when the user moves the finger, the application will calculate the new X and Y coordinate and move the chat head.</p>
<p>The below code is performing various process:</p>
<ul>
<li>Triggering long click if user hold or press chat head for long time.</li>
<li>If long click event occurs then displaying Remove View visibility.</li>
<li>Trigger on click event for Chat Head.</li>
<li>Stoping Floating widget service if user drag and drop the Floating View into Remove View.</li>
</ul>
<pre class="crayon-plain-tag">//Drag and move floating view using user's touch action.
        mFloatingWidgetView.findViewById(R.id.root_container).setOnTouchListener(new View.OnTouchListener() {

            long time_start = 0, time_end = 0;

            boolean isLongClick = false;//variable to judge if user click long press
            boolean inBounded = false;//variable to judge if floating view is bounded to remove view
            int remove_img_width = 0, remove_img_height = 0;

            Handler handler_longClick = new Handler();
            Runnable runnable_longClick = new Runnable() {
                @Override
                public void run() {
                    //On Floating Widget Long Click

                    //Set isLongClick as true
                    isLongClick = true;

                    //Set remove widget view visibility to VISIBLE
                    removeFloatingWidgetView.setVisibility(View.VISIBLE);

                    onFloatingWidgetLongClick();
                }
            };

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                //Get Floating widget view params
                WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

                //get the touch location coordinates
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();

                int x_cord_Destination, y_cord_Destination;

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        time_start = System.currentTimeMillis();

                        handler_longClick.postDelayed(runnable_longClick, 600);

                        remove_img_width = remove_image_view.getLayoutParams().width;
                        remove_img_height = remove_image_view.getLayoutParams().height;

                        x_init_cord = x_cord;
                        y_init_cord = y_cord;

                        //remember the initial position.
                        x_init_margin = layoutParams.x;
                        y_init_margin = layoutParams.y;

                        return true;
                    case MotionEvent.ACTION_UP:
                        isLongClick = false;
                        removeFloatingWidgetView.setVisibility(View.GONE);
                        remove_image_view.getLayoutParams().height = remove_img_height;
                        remove_image_view.getLayoutParams().width = remove_img_width;
                        handler_longClick.removeCallbacks(runnable_longClick);

                        //If user drag and drop the floating widget view into remove view then stop the service
                        if (inBounded) {
                            stopSelf();
                            inBounded = false;
                            break;
                        }


                        //Get the difference between initial coordinate and current coordinate
                        int x_diff = x_cord - x_init_cord;
                        int y_diff = y_cord - y_init_cord;

                        //The check for x_diff &lt;5 &amp;&amp; y_diff&lt; 5 because sometime elements moves a little while clicking.
                        //So that is click event.
                        if (Math.abs(x_diff) &lt; 5 &amp;&amp; Math.abs(y_diff) &lt; 5) {
                            time_end = System.currentTimeMillis();

                            //Also check the difference between start time and end time should be less than 300ms
                            if ((time_end - time_start) &lt; 300)
                                onFloatingWidgetClick();

                        }

                        y_cord_Destination = y_init_margin + y_diff;

                        int barHeight = getStatusBarHeight();
                        if (y_cord_Destination &lt; 0) {
                            y_cord_Destination = 0;
                        } else if (y_cord_Destination + (mFloatingWidgetView.getHeight() + barHeight) &gt; szWindow.y) {
                            y_cord_Destination = szWindow.y - (mFloatingWidgetView.getHeight() + barHeight);
                        }

                        layoutParams.y = y_cord_Destination;

                        inBounded = false;

                        //reset position if user drags the floating view
                        resetPosition(x_cord);

                        return true;
                    case MotionEvent.ACTION_MOVE:
                        int x_diff_move = x_cord - x_init_cord;
                        int y_diff_move = y_cord - y_init_cord;

                        x_cord_Destination = x_init_margin + x_diff_move;
                        y_cord_Destination = y_init_margin + y_diff_move;

                        //If user long click the floating view, update remove view
                        if (isLongClick) {
                            int x_bound_left = szWindow.x / 2 - (int) (remove_img_width * 1.5);
                            int x_bound_right = szWindow.x / 2 + (int) (remove_img_width * 1.5);
                            int y_bound_top = szWindow.y - (int) (remove_img_height * 1.5);

                            //If Floating view comes under Remove View update Window Manager
                            if ((x_cord &gt;= x_bound_left &amp;&amp; x_cord &lt;= x_bound_right) &amp;&amp; y_cord &gt;= y_bound_top) {
                                inBounded = true;

                                int x_cord_remove = (int) ((szWindow.x - (remove_img_height * 1.5)) / 2);
                                int y_cord_remove = (int) (szWindow.y - ((remove_img_width * 1.5) + getStatusBarHeight()));

                                if (remove_image_view.getLayoutParams().height == remove_img_height) {
                                    remove_image_view.getLayoutParams().height = (int) (remove_img_height * 1.5);
                                    remove_image_view.getLayoutParams().width = (int) (remove_img_width * 1.5);

                                    WindowManager.LayoutParams param_remove = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();
                                    param_remove.x = x_cord_remove;
                                    param_remove.y = y_cord_remove;

                                    mWindowManager.updateViewLayout(removeFloatingWidgetView, param_remove);
                                }

                                layoutParams.x = x_cord_remove + (Math.abs(removeFloatingWidgetView.getWidth() - mFloatingWidgetView.getWidth())) / 2;
                                layoutParams.y = y_cord_remove + (Math.abs(removeFloatingWidgetView.getHeight() - mFloatingWidgetView.getHeight())) / 2;

                                //Update the layout with new X &amp; Y coordinate
                                mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                                break;
                            } else {
                                //If Floating window gets out of the Remove view update Remove view again
                                inBounded = false;
                                remove_image_view.getLayoutParams().height = remove_img_height;
                                remove_image_view.getLayoutParams().width = remove_img_width;
                                onFloatingWidgetClick();
                            }

                        }


                        layoutParams.x = x_cord_Destination;
                        layoutParams.y = y_cord_Destination;

                        //Update the layout with new X &amp; Y coordinate
                        mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                        return true;
                }
                return false;
            }
        });</pre>
Method responsible for updating Remove View Window on Floating widget long click.<br />
<pre class="crayon-plain-tag">/*  on Floating Widget Long Click, increase the size of remove view as it look like taking focus */
    private void onFloatingWidgetLongClick() {
        //Get remove Floating view params
        WindowManager.LayoutParams removeParams = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();

        //get x and y coordinates of remove view
        int x_cord = (szWindow.x - removeFloatingWidgetView.getWidth()) / 2;
        int y_cord = szWindow.y - (removeFloatingWidgetView.getHeight() + getStatusBarHeight());


        removeParams.x = x_cord;
        removeParams.y = y_cord;

        //Update Remove view params
        mWindowManager.updateViewLayout(removeFloatingWidgetView, removeParams);
    }</pre>
This method will reset the position when user drag and place the Floating View to another place. This method help to prevent the Floating View not to be placed in centre of the screen. It will always place the Floating View to Left or Right of the screen depending on user dragging.<br />
<pre class="crayon-plain-tag">/*  Reset position of Floating Widget view on dragging  */
    private void resetPosition(int x_cord_now) {
        if (x_cord_now &lt;= szWindow.x / 2) {
            isLeft = true;
            moveToLeft(x_cord_now);
        } else {
            isLeft = false;
            moveToRight(x_cord_now);
        }

    }</pre>
This method will move the Floating View to Left of the Screen when user drags.<br />
<pre class="crayon-plain-tag">/*  Method to move the Floating widget view to Left  */
    private void moveToLeft(final int current_x_cord) {
        final int x = szWindow.x - current_x_cord;

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = 0 - (int) (current_x_cord * current_x_cord * step);

                //If you want bounce effect uncomment below line and comment above line
                // mParams.x = 0 - (int) (double) bounceValue(step, x);


                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = 0;

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }</pre>
This method will move the Floating View to Right of the Screen when user drags.<br />
<pre class="crayon-plain-tag">/*  Method to move the Floating widget view to Right  */
    private void moveToRight(final int current_x_cord) {

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = (int) (szWindow.x + (current_x_cord * current_x_cord * step) - mFloatingWidgetView.getWidth());

                //If you want bounce effect uncomment below line and comment above line
                //  mParams.x = szWindow.x + (int) (double) bounceValue(step, x_cord_now) - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = szWindow.x - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }</pre>
This method will return the status bar height according to device display metrics.<br />
<pre class="crayon-plain-tag">/*  return status bar height on basis of device display metrics  */
    private int getStatusBarHeight() {
        return (int) Math.ceil(25 * getApplicationContext().getResources().getDisplayMetrics().density);
    }</pre>
When user click the Floating Widget the below method will trigger and display the Expanded View.<br />
<pre class="crayon-plain-tag">/*  on Floating widget click show expanded view  */
    private void onFloatingWidgetClick() {
        if (isViewCollapsed()) {
            //When user clicks on the image view of the collapsed layout,
            //visibility of the collapsed layout will be changed to "View.GONE"
            //and expanded view will become visible.
            collapsedView.setVisibility(View.GONE);
            expandedView.setVisibility(View.VISIBLE);

        }
    }</pre>
Method to check if Collapse View is visible or not.<br />
<pre class="crayon-plain-tag">/*  Detect if the floating view is collapsed or expanded */
    private boolean isViewCollapsed() {
        return mFloatingWidgetView == null || mFloatingWidgetView.findViewById(R.id.collapse_view).getVisibility() == View.VISIBLE;
    }</pre>
Also, implement click listener to close the chat head by stopping the service when the user clicks on the close icon at the top-right of the chat head.<br />
<pre class="crayon-plain-tag">//close the service and remove the from from the window
stopSelf();</pre>
<b>9</b>. Finally the <em>FloatingWidgetService.java</em> will look like below. There are some extra click events as well to close the expanded view and open the activity from expanded view.<br />
<pre class="crayon-plain-tag">package com.floatingwidgetchathead_demo;

import android.app.Service;
import android.content.Intent;
import android.content.res.Configuration;
import android.graphics.PixelFormat;
import android.graphics.Point;
import android.os.Build;
import android.os.CountDownTimer;
import android.os.Handler;
import android.os.IBinder;
import android.support.annotation.Nullable;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.WindowManager;
import android.widget.ImageView;

/**
 * Created by sonu on 28/03/17.
 */

public class FloatingWidgetService extends Service implements View.OnClickListener {
    private WindowManager mWindowManager;
    private View mFloatingWidgetView, collapsedView, expandedView;
    private ImageView remove_image_view;
    private Point szWindow = new Point();
    private View removeFloatingWidgetView;

    private int x_init_cord, y_init_cord, x_init_margin, y_init_margin;

    //Variable to check if the Floating widget view is on left side or in right side
    // initially we are displaying Floating widget view to Left side so set it to true
    private boolean isLeft = true;

    public FloatingWidgetService() {
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        //init WindowManager
        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

        getWindowManagerDefaultDisplay();

        //Init LayoutInflater
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        addRemoveView(inflater);
        addFloatingWidgetView(inflater);
        implementClickListeners();
        implementTouchListenerToFloatingWidgetView();
    }


    /*  Add Remove View to Window Manager  */
    private View addRemoveView(LayoutInflater inflater) {
        //Inflate the removing view layout we created
        removeFloatingWidgetView = inflater.inflate(R.layout.remove_floating_widget_layout, null);

        //Add the view to the window.
        WindowManager.LayoutParams paramRemove = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        paramRemove.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially the Removing widget view is not visible, so set visibility to GONE
        removeFloatingWidgetView.setVisibility(View.GONE);
        remove_image_view = (ImageView) removeFloatingWidgetView.findViewById(R.id.remove_img);

        //Add the view to the window
        mWindowManager.addView(removeFloatingWidgetView, paramRemove);
        return remove_image_view;
    }

    /*  Add Floating Widget View to Window Manager  */
    private void addFloatingWidgetView(LayoutInflater inflater) {
        //Inflate the floating view layout we created
        mFloatingWidgetView = inflater.inflate(R.layout.floating_widget_layout, null);

        //Add the view to the window.
        final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        params.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially view will be added to top-left corner, you change x-y coordinates according to your need
        params.x = 0;
        params.y = 100;

        //Add the view to the window
        mWindowManager.addView(mFloatingWidgetView, params);

        //find id of collapsed view layout
        collapsedView = mFloatingWidgetView.findViewById(R.id.collapse_view);

        //find id of the expanded view layout
        expandedView = mFloatingWidgetView.findViewById(R.id.expanded_container);
    }

    private void getWindowManagerDefaultDisplay() {
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB_MR2)
            mWindowManager.getDefaultDisplay().getSize(szWindow);
        else {
            int w = mWindowManager.getDefaultDisplay().getWidth();
            int h = mWindowManager.getDefaultDisplay().getHeight();
            szWindow.set(w, h);
        }
    }

    /*  Implement Touch Listener to Floating Widget Root View  */
    private void implementTouchListenerToFloatingWidgetView() {
        //Drag and move floating view using user's touch action.
        mFloatingWidgetView.findViewById(R.id.root_container).setOnTouchListener(new View.OnTouchListener() {

            long time_start = 0, time_end = 0;

            boolean isLongClick = false;//variable to judge if user click long press
            boolean inBounded = false;//variable to judge if floating view is bounded to remove view
            int remove_img_width = 0, remove_img_height = 0;

            Handler handler_longClick = new Handler();
            Runnable runnable_longClick = new Runnable() {
                @Override
                public void run() {
                    //On Floating Widget Long Click

                    //Set isLongClick as true
                    isLongClick = true;

                    //Set remove widget view visibility to VISIBLE
                    removeFloatingWidgetView.setVisibility(View.VISIBLE);

                    onFloatingWidgetLongClick();
                }
            };

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                //Get Floating widget view params
                WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

                //get the touch location coordinates
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();

                int x_cord_Destination, y_cord_Destination;

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        time_start = System.currentTimeMillis();

                        handler_longClick.postDelayed(runnable_longClick, 600);

                        remove_img_width = remove_image_view.getLayoutParams().width;
                        remove_img_height = remove_image_view.getLayoutParams().height;

                        x_init_cord = x_cord;
                        y_init_cord = y_cord;

                        //remember the initial position.
                        x_init_margin = layoutParams.x;
                        y_init_margin = layoutParams.y;

                        return true;
                    case MotionEvent.ACTION_UP:
                        isLongClick = false;
                        removeFloatingWidgetView.setVisibility(View.GONE);
                        remove_image_view.getLayoutParams().height = remove_img_height;
                        remove_image_view.getLayoutParams().width = remove_img_width;
                        handler_longClick.removeCallbacks(runnable_longClick);

                        //If user drag and drop the floating widget view into remove view then stop the service
                        if (inBounded) {
                            stopSelf();
                            inBounded = false;
                            break;
                        }


                        //Get the difference between initial coordinate and current coordinate
                        int x_diff = x_cord - x_init_cord;
                        int y_diff = y_cord - y_init_cord;

                        //The check for x_diff &lt;5 &amp;&amp; y_diff&lt; 5 because sometime elements moves a little while clicking.
                        //So that is click event.
                        if (Math.abs(x_diff) &lt; 5 &amp;&amp; Math.abs(y_diff) &lt; 5) {
                            time_end = System.currentTimeMillis();

                            //Also check the difference between start time and end time should be less than 300ms
                            if ((time_end - time_start) &lt; 300)
                                onFloatingWidgetClick();

                        }

                        y_cord_Destination = y_init_margin + y_diff;

                        int barHeight = getStatusBarHeight();
                        if (y_cord_Destination &lt; 0) {
                            y_cord_Destination = 0;
                        } else if (y_cord_Destination + (mFloatingWidgetView.getHeight() + barHeight) &gt; szWindow.y) {
                            y_cord_Destination = szWindow.y - (mFloatingWidgetView.getHeight() + barHeight);
                        }

                        layoutParams.y = y_cord_Destination;

                        inBounded = false;

                        //reset position if user drags the floating view
                        resetPosition(x_cord);

                        return true;
                    case MotionEvent.ACTION_MOVE:
                        int x_diff_move = x_cord - x_init_cord;
                        int y_diff_move = y_cord - y_init_cord;

                        x_cord_Destination = x_init_margin + x_diff_move;
                        y_cord_Destination = y_init_margin + y_diff_move;

                        //If user long click the floating view, update remove view
                        if (isLongClick) {
                            int x_bound_left = szWindow.x / 2 - (int) (remove_img_width * 1.5);
                            int x_bound_right = szWindow.x / 2 + (int) (remove_img_width * 1.5);
                            int y_bound_top = szWindow.y - (int) (remove_img_height * 1.5);

                            //If Floating view comes under Remove View update Window Manager
                            if ((x_cord &gt;= x_bound_left &amp;&amp; x_cord &lt;= x_bound_right) &amp;&amp; y_cord &gt;= y_bound_top) {
                                inBounded = true;

                                int x_cord_remove = (int) ((szWindow.x - (remove_img_height * 1.5)) / 2);
                                int y_cord_remove = (int) (szWindow.y - ((remove_img_width * 1.5) + getStatusBarHeight()));

                                if (remove_image_view.getLayoutParams().height == remove_img_height) {
                                    remove_image_view.getLayoutParams().height = (int) (remove_img_height * 1.5);
                                    remove_image_view.getLayoutParams().width = (int) (remove_img_width * 1.5);

                                    WindowManager.LayoutParams param_remove = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();
                                    param_remove.x = x_cord_remove;
                                    param_remove.y = y_cord_remove;

                                    mWindowManager.updateViewLayout(removeFloatingWidgetView, param_remove);
                                }

                                layoutParams.x = x_cord_remove + (Math.abs(removeFloatingWidgetView.getWidth() - mFloatingWidgetView.getWidth())) / 2;
                                layoutParams.y = y_cord_remove + (Math.abs(removeFloatingWidgetView.getHeight() - mFloatingWidgetView.getHeight())) / 2;

                                //Update the layout with new X &amp; Y coordinate
                                mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                                break;
                            } else {
                                //If Floating window gets out of the Remove view update Remove view again
                                inBounded = false;
                                remove_image_view.getLayoutParams().height = remove_img_height;
                                remove_image_view.getLayoutParams().width = remove_img_width;
                                onFloatingWidgetClick();
                            }

                        }


                        layoutParams.x = x_cord_Destination;
                        layoutParams.y = y_cord_Destination;

                        //Update the layout with new X &amp; Y coordinate
                        mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                        return true;
                }
                return false;
            }
        });
    }

    private void implementClickListeners() {
        mFloatingWidgetView.findViewById(R.id.close_floating_view).setOnClickListener(this);
        mFloatingWidgetView.findViewById(R.id.close_expanded_view).setOnClickListener(this);
        mFloatingWidgetView.findViewById(R.id.open_activity_button).setOnClickListener(this);
    }


    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.close_floating_view:
                //close the service and remove the from from the window
                stopSelf();
                break;
            case R.id.close_expanded_view:
                collapsedView.setVisibility(View.VISIBLE);
                expandedView.setVisibility(View.GONE);
                break;
            case R.id.open_activity_button:
                //open the activity and stop service
                Intent intent = new Intent(FloatingWidgetService.this, MainActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent);

                //close the service and remove view from the view hierarchy
                stopSelf();
                break;
        }
    }

    /*  on Floating Widget Long Click, increase the size of remove view as it look like taking focus */
    private void onFloatingWidgetLongClick() {
        //Get remove Floating view params
        WindowManager.LayoutParams removeParams = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();

        //get x and y coordinates of remove view
        int x_cord = (szWindow.x - removeFloatingWidgetView.getWidth()) / 2;
        int y_cord = szWindow.y - (removeFloatingWidgetView.getHeight() + getStatusBarHeight());


        removeParams.x = x_cord;
        removeParams.y = y_cord;

        //Update Remove view params
        mWindowManager.updateViewLayout(removeFloatingWidgetView, removeParams);
    }

    /*  Reset position of Floating Widget view on dragging  */
    private void resetPosition(int x_cord_now) {
        if (x_cord_now &lt;= szWindow.x / 2) {
            isLeft = true;
            moveToLeft(x_cord_now);
        } else {
            isLeft = false;
            moveToRight(x_cord_now);
        }

    }


    /*  Method to move the Floating widget view to Left  */
    private void moveToLeft(final int current_x_cord) {
        final int x = szWindow.x - current_x_cord;

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = 0 - (int) (current_x_cord * current_x_cord * step);

                //If you want bounce effect uncomment below line and comment above line
                // mParams.x = 0 - (int) (double) bounceValue(step, x);


                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = 0;

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }

    /*  Method to move the Floating widget view to Right  */
    private void moveToRight(final int current_x_cord) {

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = (int) (szWindow.x + (current_x_cord * current_x_cord * step) - mFloatingWidgetView.getWidth());

                //If you want bounce effect uncomment below line and comment above line
                //  mParams.x = szWindow.x + (int) (double) bounceValue(step, x_cord_now) - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = szWindow.x - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }

    /*  Get Bounce value if you want to make bounce effect to your Floating Widget */
    private double bounceValue(long step, long scale) {
        double value = scale * java.lang.Math.exp(-0.055 * step) * java.lang.Math.cos(0.08 * step);
        return value;
    }


    /*  Detect if the floating view is collapsed or expanded */
    private boolean isViewCollapsed() {
        return mFloatingWidgetView == null || mFloatingWidgetView.findViewById(R.id.collapse_view).getVisibility() == View.VISIBLE;
    }


    /*  return status bar height on basis of device display metrics  */
    private int getStatusBarHeight() {
        return (int) Math.ceil(25 * getApplicationContext().getResources().getDisplayMetrics().density);
    }


    /*  Update Floating Widget view coordinates on Configuration change  */
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        getWindowManagerDefaultDisplay();

        WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {


            if (layoutParams.y + (mFloatingWidgetView.getHeight() + getStatusBarHeight()) &gt; szWindow.y) {
                layoutParams.y = szWindow.y - (mFloatingWidgetView.getHeight() + getStatusBarHeight());
                mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
            }

            if (layoutParams.x != 0 &amp;&amp; layoutParams.x &lt; szWindow.x) {
                resetPosition(szWindow.x);
            }

        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {

            if (layoutParams.x &gt; szWindow.x) {
                resetPosition(szWindow.x);
            }

        }

    }

    /*  on Floating widget click show expanded view  */
    private void onFloatingWidgetClick() {
        if (isViewCollapsed()) {
            //When user clicks on the image view of the collapsed layout,
            //visibility of the collapsed layout will be changed to "View.GONE"
            //and expanded view will become visible.
            collapsedView.setVisibility(View.GONE);
            expandedView.setVisibility(View.VISIBLE);

        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        /*  on destroy remove both view from window manager */

        if (mFloatingWidgetView != null)
            mWindowManager.removeView(mFloatingWidgetView);

        if (removeFloatingWidgetView != null)
            mWindowManager.removeView(removeFloatingWidgetView);

    }


}</pre>
<b>10</b>. Now to Handle Overdraw permission for displaying Floating View over other apps, we need to start the<em> FloatingWidgetService.java</em>.</p>
<p>Before that, we need to check if the application has <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission or not? For android version &lt;= API22, this permission is granted by default. But for the android versions running API&gt;22 ,we need to check for the permission run-time. If the permission is not available, we will open permission management screen to allow the user to grant permission using <strong>Settings.ACTION_MANAGE_OVERLAY_PERMISSION</strong> intent action. This will open below screen facilitate user to grant <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission.</p>
<div id="attachment_1220" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1220 size-large" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=576%2C1024" alt="Settings screen to grant the Draw Over Other App permission." srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Settings screen to grant the Draw Over Other App permission.</p></div>
<p>Below is code for the <em>MainActivity.java</em> that will display the Floating Widget when button is clicked by checking the <strong>SYSTEM_ALERT_WINDOW</strong> permission.</p><pre class="crayon-plain-tag">package com.floatingwidgetchathead_demo;

import android.content.Intent;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.provider.Settings;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    /*  Permission request code to draw over other apps  */
    private static final int DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE = 1222;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    /*  start floating widget service  */
    public void createFloatingWidget(View view) {
        //Check if the application has draw over other apps permission or not?
        //This permission is by default available for API&lt;23. But for API &gt; 23
        //you have to ask for the permission in runtime.
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {
            //If the draw over permission is not available open the settings screen
            //to grant the permission.
            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION,
                    Uri.parse("package:" + getPackageName()));
            startActivityForResult(intent, DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE);
        } else
            //If permission is granted start floating widget service
            startFloatingWidgetService();

    }

    /*  Start Floating widget service and finish current activity */
    private void startFloatingWidgetService() {
        startService(new Intent(MainActivity.this, FloatingWidgetService.class));
        finish();
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE) {
            //Check if the permission is granted or not.
            if (resultCode == RESULT_OK)
                //If permission granted start floating widget service
                startFloatingWidgetService();
            else
                //Permission is not available then display toast
                Toast.makeText(this,
                        getResources().getString(R.string.draw_other_app_permission_denied),
                        Toast.LENGTH_SHORT).show();

        } else {
            super.onActivityResult(requestCode, resultCode, data);
        }
    }
}</pre><p>
<b>11</b>. Finally add the <em>FloatingWidgetService.java</em> in your <em>AndroidManifest.xml</em>.</p><pre class="crayon-plain-tag">&lt;!--  Declare FloatingWidget Service over here and set enabled true --&gt;
        &lt;service
            android:name=".FloatingWidgetService"
            android:enabled="true"
            android:exported="false" /&gt;</pre><p>
<p class="graf graf--p graf-after--figure"><b>12</b>. Woohooo we are all ready. Now you can also create any kind of Floating Widget for your applications.</p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/FloatingWidgetChatHead_Demo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<figure id="9832" class="graf graf--figure graf--iframe graf-after--p">
<div class="aspectRatioPlaceholder is-locked"></div>
</figure>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/">Android Floating Widget like Facebook Messenger Chat Head</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">1211</post-id>	</item>
	</channel>
</rss>
