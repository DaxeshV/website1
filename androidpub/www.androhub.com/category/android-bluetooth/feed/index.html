<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Android Bluetooth &#8211; Androhub</title>
	<atom:link href="http://www.androhub.com/category/android-bluetooth/feed/" rel="self" type="application/rss+xml" />
	<link>http://www.androhub.com</link>
	<description>Meet Professor Dro!d !!</description>
	<lastBuildDate>Thu, 21 Dec 2017 20:24:53 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.5.12</generator>
<site xmlns="com-wordpress:feed-additions:1">113004364</site>	<item>
		<title>Android Bluetooth</title>
		<link>http://www.androhub.com/android-bluetooth/</link>
		<comments>http://www.androhub.com/android-bluetooth/#respond</comments>
		<pubDate>Thu, 23 Jul 2015 09:10:11 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Basics]]></category>
		<category><![CDATA[Android Bluetooth]]></category>
		<category><![CDATA[Android ListView]]></category>
		<category><![CDATA[android bluetooth]]></category>
		<category><![CDATA[bluetooth]]></category>
		<category><![CDATA[custom listview]]></category>
		<category><![CDATA[listview]]></category>
		<category><![CDATA[pair devices]]></category>

		<guid isPermaLink="false">http://androhub.com/?p=513</guid>
		<description><![CDATA[<p>Bluetooth is a way to send or receive data between two different devices. Android platform includes support for the Bluetooth framework that allows a device to wirelessly exchange data with other Bluetooth devices. Android provides Bluetooth API to perform these different operations. Scan for other Bluetooth devices Get a list of paired devices Connect to [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-bluetooth/">Android Bluetooth</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p><a href="http://developer.android.com/intl/ru/guide/topics/connectivity/bluetooth.html" target="_blank">Bluetooth </a>is a way to send or receive data between two different devices. Android platform includes support for the Bluetooth framework that allows a device to wirelessly exchange data with other Bluetooth devices.</p>
<p>Android provides Bluetooth API to perform these different operations.</p>
<ul class="list">
<li>Scan for other Bluetooth devices</li>
<li>Get a list of paired devices</li>
<li>Connect to other devices through service discovery</li>
</ul>
<p>Android provides <strong>BluetoothAdapter</strong> class to communicate with Bluetooth. Create an object of this calling by calling the static method <strong>getDefaultAdapter()</strong>. Its syntax is given below &#8211;</p><pre class="crayon-plain-tag">private BluetoothAdapter bluetoothAdapter;
bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();</pre><p>
In order to enable the Bluetooth of your device, call the intent with the following Bluetooth constant <strong>ACTION_REQUEST_ENABLE</strong>. Its syntax is &#8211;</p><pre class="crayon-plain-tag">Intent intent= new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
startActivityForResult(intent, 111);</pre><p>
Apart from this constant, there are other constants provided the API , that supports different tasks. They are listed below &#8211;</p>

<table id="tablepress-26" class="tablepress tablepress-id-26">
<thead>
<tr class="row-1 odd">
	<th class="column-1">Constant</th><th class="column-2">Description</th>
</tr>
</thead>
<tbody class="row-hover">
<tr class="row-2 even">
	<td class="column-1">ACTION_REQUEST_DISCOVERABLE</td><td class="column-2">This constant is used for turn on discovering of bluetooth.</td>
</tr>
<tr class="row-3 odd">
	<td class="column-1">ACTION_STATE_CHANGED</td><td class="column-2">This constant will notify that Bluetooth state has been changed.</td>
</tr>
<tr class="row-4 even">
	<td class="column-1">ACTION_FOUND</td><td class="column-2">This constant is used for receiving information about each device that is discovered.</td>
</tr>
</tbody>
</table>
<!-- #tablepress-26 from cache -->
<p>Once you enable the Bluetooth , you can get a list of paired devices by calling <strong>getBondedDevices()</strong> method. It returns a set of Bluetooth devices. Its syntax is &#8211;</p><pre class="crayon-plain-tag">private Set&lt;BluetoothDevice&gt; pairedDevices;
pairedDevices = bluetoothAdapter.getBondedDevices();</pre><p>
Apart form the paired Devices , there are other methods in the API that gives more control over Bluetooth. They are listed below &#8211;</p>

<table id="tablepress-27" class="tablepress tablepress-id-27">
<thead>
<tr class="row-1 odd">
	<th class="column-1">Method</th><th class="column-2">Description</th>
</tr>
</thead>
<tbody class="row-hover">
<tr class="row-2 even">
	<td class="column-1">enable()</td><td class="column-2">This method enables the adapter if not enabled.</td>
</tr>
<tr class="row-3 odd">
	<td class="column-1">isEnabled()</td><td class="column-2">This method returns true if adapter is enabled.</td>
</tr>
<tr class="row-4 even">
	<td class="column-1">disable()</td><td class="column-2">This method disables the adapter.</td>
</tr>
<tr class="row-5 odd">
	<td class="column-1">getName()</td><td class="column-2">This method returns the name of the Bluetooth adapter.</td>
</tr>
<tr class="row-6 even">
	<td class="column-1">setName(String name)</td><td class="column-2">This method changes the Bluetooth name.</td>
</tr>
<tr class="row-7 odd">
	<td class="column-1">getState()</td><td class="column-2">This method returns the current state of the Bluetooth Adapter.</td>
</tr>
<tr class="row-8 even">
	<td class="column-1">startDiscovery()</td><td class="column-2">This method starts the discovery process of the Bluetooth for 120 seconds.</td>
</tr>
</tbody>
</table>
<!-- #tablepress-27 from cache -->
<h2>Example</h2>
<p>In this tutorial, we are going to learn how to Enable, Disable, Enable Discovery, search nearby Bluetooth devices and Pair with other Bluetooth devices.</p>
<h3>Video Demo</h3>
<p><iframe  id="_ytid_29889" width="602" height="339" src="https://www.youtube.com/embed/_1_qtQPZzGY?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Eclipse by navigating to <strong>File ⇒ New Android ⇒ Application Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. This are some strings that i am going to use in this tutorial.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;

    &lt;string name="app_name"&gt;Bluetooth Demo&lt;/string&gt;
    &lt;string name="turn_on"&gt;Turn On&lt;/string&gt;
    &lt;string name="turn_off"&gt;Turn Off&lt;/string&gt;
    &lt;string name="make_visible"&gt;Visible&lt;/string&gt;
    &lt;string name="list_paired_devices"&gt;List Paired Devices&lt;/string&gt;
    &lt;string name="search_new_devices"&gt;Search New Devices&lt;/string&gt;
    &lt;string name="cancel"&gt;Cancel&lt;/string&gt;

&lt;/resources&gt;</pre><p>
<b>3</b>. To work on Bluetooth we have to give certain permission in Manifest file and add this line to your manifest.</p><pre class="crayon-plain-tag">&lt;!-- Uses permission required to use bluetooth --&gt;
    &lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt;
    &lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;</pre><p>
</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bluetooth_demo"
    android:versionCode="1"
    android:versionName="1.0" &gt;

    &lt;uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="22" /&gt;

    &lt;!-- Uses permission required to use bluetooth --&gt;
    &lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt;
    &lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;

    &lt;application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" &gt;
        &lt;activity
            android:name="com.bluetooth_demo.MainActivity"
            android:label="@string/app_name" &gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;

                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre><p>
<b>4</b>. Now, create a xml layout naming <em>activity_main.xml. </em>In this layout i put some buttons to work on Bluetooth and a ListView to show paired and new searched devices.</p><pre class="crayon-plain-tag">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="5dp" &gt;

    &lt;TextView
        android:id="@+id/bluetooth_status"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:textColor="#000000"
        android:textSize="17sp" /&gt;

    &lt;LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:orientation="horizontal" &gt;

        &lt;Button
            android:id="@+id/turnOn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/turn_on" /&gt;

        &lt;Button
            android:id="@+id/turnOff"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/turn_off" /&gt;

        &lt;Button
            android:id="@+id/make_visible"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/make_visible" /&gt;
    &lt;/LinearLayout&gt;

    &lt;LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:orientation="horizontal" &gt;

        &lt;Button
            android:id="@+id/show_paired_devices"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/list_paired_devices" /&gt;

        &lt;Button
            android:id="@+id/search_new_devices"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/search_new_devices" /&gt;
    &lt;/LinearLayout&gt;

    &lt;ListView
        android:id="@+id/list_devices"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" &gt;
    &lt;/ListView&gt;

&lt;/LinearLayout&gt;</pre><p>
<b>5</b>. We will display Bluetooth device name with device MAC address. So I am using custom listview for that. This is <em>customview.xml i.e</em> custom layout.</p>
<p>If you are new to Custom ListView then refer this <a href="http://androhub.com/android-listview/" target="_blank">tutorial</a>.</p><pre class="crayon-plain-tag">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="4dp"
    android:layout_marginTop="4dp" &gt;

    &lt;TextView
        android:id="@+id/devices_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:textColor="#000000"
        android:textSize="15sp" /&gt;

&lt;/LinearLayout&gt;</pre><p>
<b>6</b>. For pairing two Bluetooth devices I am using this Thread class. This class can be used to pair any bluetooth devices. Here <em>BluetoothSocket </em>is used to pair devices by <em>connect() </em>method. Before connecting we have to unregister all broadcast receivers and bluetooth discovery.</p><pre class="crayon-plain-tag">// This thread will do task for pairing devices
	private class ConnectThread extends Thread {
		private BluetoothSocket mmSocket; // Bluetooth Socket
		private final BluetoothDevice mmDevice;
		private final UUID MY_UUID = UUID
				.fromString("00001101-0000-1000-8000-00805f9b34fb"); // This is
																		// Unique
																		// Id
																		// for
																		// your
																		// device

		public ConnectThread(BluetoothDevice device) {
			BluetoothSocket tmp = null;
			mmDevice = device;
			try {
				// This methods are used to make pairing
				tmp = device.createRfcommSocketToServiceRecord(MY_UUID);

				Method m = device.getClass().getMethod("createRfcommSocket",
						new Class[] { int.class });
				tmp = (BluetoothSocket) m.invoke(device, 1);

			} catch (Exception e) {
				e.printStackTrace();

			}
			mmSocket = tmp;
		}

		public void run() {

			// Cancelling discovery is neccessary
			bluetooth_adapter.cancelDiscovery();// If bluetooth adapter is
												// already discovering then
												// cancel it
			try {

				// Also unregister receiver
				unregisterReceiver(reciever);
			} catch (IllegalArgumentException e) {
				e.printStackTrace();
			}
			try {
				mmSocket.connect();// Pair device
				Log.e(TAG, "Connection Establish"); // Via this Log you can
													// check the connection
													// status

			} catch (IOException connectException) {
				connectException.printStackTrace();
				try {
					mmSocket.close(); // If exception occurs close Socket
					Log.e(TAG, "Connection Failed");
				} catch (IOException closeException) {
					closeException.printStackTrace();
				}
				return;
			}

		}

		// On cancel display Log and close socket
		public void cancel() {
			try {
				Log.e(TAG, "Connection Failed on cancel");
				mmSocket.close();
			} catch (IOException e) {
			}
		}
	}</pre><p>
<b>7</b>. Finally come to your <em>MainActivity.java </em> and add the following code. In this java class i used above discussed methods of Bluetooth to work over Bluetooth and a Thread class to pair devices.</p><pre class="crayon-plain-tag">package com.bluetooth_demo;

import java.io.IOException;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Set;
import java.util.UUID;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity implements OnClickListener,
		OnItemClickListener {
	private static final int Request_enable_Bt = 1; // Varaible for Activtiy
													// result method

	private static Button turn_on, turn_off, paired_devices, search_devices,
			make_visible;
	private static TextView bluetooth_status;
	private static ListView list_devices;
	private static ArrayList&lt;BluetoothDevice&gt; bluetoothDevice_List;
	private static CustomAdapter BtArrayAdapter;

	private static final String TAG = MainActivity.class.getSimpleName();// TAG
																			// for
																			// logs

	// Bluetooth Variables
	private static BluetoothAdapter bluetooth_adapter;
	private static Set&lt;BluetoothDevice&gt; pairedDevices;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		init();
		checkBluetoothAdapter();// Check Bluetooth presence

	}

	// Initialize the views
	private void init() {

		turn_on = (Button) findViewById(R.id.turnOn);
		turn_off = (Button) findViewById(R.id.turnOff);
		paired_devices = (Button) findViewById(R.id.show_paired_devices);
		search_devices = (Button) findViewById(R.id.search_new_devices);
		make_visible = (Button) findViewById(R.id.make_visible);
		list_devices = (ListView) findViewById(R.id.list_devices);
		bluetooth_status = (TextView) findViewById(R.id.bluetooth_status);

	}

	// Check if bluetooth is present or not
	private void checkBluetoothAdapter() {
		bluetooth_adapter = BluetoothAdapter.getDefaultAdapter();
		if (bluetooth_adapter == null) {

			// If bluetooth doesn't present disable all buttons and display a
			// toast
			disableButtons();
			Toast.makeText(getApplicationContext(),
					"Your device does not support Bluetooth.",
					Toast.LENGTH_LONG).show();

		} else {
			// If bluetooth is there then check if it is ON or not for status
			if (bluetooth_adapter.isEnabled()) {
				bluetooth_status.setText("Status: Bluetooth Enabled.");
			} else {
				bluetooth_status.setText("Status: Bluetooth Disabled.");
			}

			setListeners();// Set listeners

		}
	}

	// Disable all buttons
	private void disableButtons() {
		turn_on.setEnabled(false);
		turn_off.setEnabled(false);
		paired_devices.setEnabled(false);
		search_devices.setEnabled(false);
		make_visible.setEnabled(false);
		bluetooth_status.setText("Status: - Bluetooth Not supported");
	}

	// Set click listeners
	private void setListeners() {
		turn_on.setOnClickListener(this);
		turn_off.setOnClickListener(this);
		make_visible.setOnClickListener(this);
		paired_devices.setOnClickListener(this);
		search_devices.setOnClickListener(this);
		list_devices.setOnItemClickListener(this);
	}

	// On button clicks call there representative methods
	@Override
	public void onClick(View v) {
		switch (v.getId()) {
		case R.id.turnOn:
			turnOn();
			break;
		case R.id.turnOff:
			turnOff();
			break;

		case R.id.make_visible:
			makeBluetoothVisible();
			break;

		case R.id.show_paired_devices:
			showPairedDevices();
			break;

		case R.id.search_new_devices:
			searchNewDevices();
			break;

		}

	}

	// Turn bluetooth ON
	private void turnOn() {
		boolean isBluetoothEnabled = isBluetoothEnabled();// Bluetooth enabled
															// or disabled
		if (!isBluetoothEnabled) {
			// If disabled Switch On bluetooth
			Intent in = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
			startActivityForResult(in, Request_enable_Bt);

		} else {

			// If it is already On then display a toast
			Toast.makeText(getApplicationContext(), "Bluetooth is already on",
					Toast.LENGTH_SHORT).show();
		}
	}

	@Override
	protected void onActivityResult(int requestCode, int resultCode, Intent data) {
		// On Activity result check the response code with send code
		if (requestCode == Request_enable_Bt) {

			// If bluetooth enabled/disabled then change status
			if (bluetooth_adapter.isEnabled()) {
				Toast.makeText(getApplicationContext(), "Bluetooth turned on",
						Toast.LENGTH_SHORT).show();
				bluetooth_status.setText("Status: Bluetooth Enabled.");
			} else {
				bluetooth_status.setText("Status: Bluetooth Disabled.");
				Toast.makeText(getApplicationContext(),
						"Bluetooth enabling cancelled.", Toast.LENGTH_SHORT)
						.show();

			}
		}
		super.onActivityResult(requestCode, resultCode, data);
	}

	// Show paired devices
	private void showPairedDevices() {
		boolean isBluetoothEnabled = isBluetoothEnabled();// Before shwoing
															// devices check if
															// bluetooth is on
															// or off
		if (isBluetoothEnabled) {
			pairedDevices = bluetooth_adapter.getBondedDevices();// Get bonded
																	// devices
																	// via this
																	// method
			bluetoothDevice_List = new ArrayList&lt;BluetoothDevice&gt;();
			for (BluetoothDevice device : pairedDevices)
				bluetoothDevice_List.add(device);// Add bonded devices to
													// arrayList

			BtArrayAdapter = new CustomAdapter(MainActivity.this,
					R.layout.customview, bluetoothDevice_List);// set adapter
			list_devices.setAdapter(BtArrayAdapter);// Set adapter over listview
			BtArrayAdapter.notifyDataSetChanged();// notify adapter

		}
	}

	// Search new Bluetooth Devices
	private void searchNewDevices() {
		boolean isBluetoothEnabled = isBluetoothEnabled();// If bluetooth is
															// enabled then
															// proceed further
		if (isBluetoothEnabled) {
			if (bluetooth_adapter.isDiscovering()) {// Check if bluetooth
													// adapter is already
													// discovering or not
				bluetooth_adapter.cancelDiscovery();// If already discovering
													// then cancel discovery
				search_devices.setText(R.string.search_new_devices);// Change
																	// button
																	// text

			} else {
				search_devices.setText(R.string.cancel);// If not discovering
														// then change button
														// text

				bluetooth_adapter.startDiscovery();// and start discovering
													// devices
				registerReceiver(reciever, new IntentFilter(
						BluetoothDevice.ACTION_FOUND));// Register broadcast
														// receiver for New
														// Device found
			}
		}
	}

	// Broadcast Receiver for New Device Found
	final BroadcastReceiver reciever = new BroadcastReceiver() {

		@Override
		public void onReceive(Context context, Intent intent) {

			String action = intent.getAction();// Get Sent Action
			if (BluetoothDevice.ACTION_FOUND.equals(action)) {// Check if sent
																// action is
																// equal to
																// device action
				BluetoothDevice device = intent
						.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);// Get
																			// new
																			// Device

				// add the name and the MAC address of the object to the
				// arrayAdapter
				// If it's already paired, skip it, because it's been listed
				// already
				if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
					bluetoothDevice_List = new ArrayList&lt;BluetoothDevice&gt;();
					bluetoothDevice_List.add(device);

					BtArrayAdapter = new CustomAdapter(MainActivity.this,
							R.layout.customview, bluetoothDevice_List);
					list_devices.setAdapter(BtArrayAdapter);
					BtArrayAdapter.notifyDataSetChanged();
					Toast.makeText(MainActivity.this, "Device found.",
							Toast.LENGTH_SHORT).show();
				} else {
					Toast.makeText(MainActivity.this, "No Devices found.",
							Toast.LENGTH_SHORT).show();
				}

				search_devices.setText(R.string.search_new_devices);// Change
																	// button
																	// text
																	// after
																	// searching
																	// devices

			}
			// Other Actions of Bluetooth devices
			else if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {

				// Device is now connected
			} else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED
					.equals(action)) {
				// Done searching

			} else if (BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED
					.equals(action)) {
				// Device is about to disconnect

			} else if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
				// Device has disconnected

			}

		}
	};

	// Make device discoverable
	private void makeBluetoothVisible() {
		boolean isBluetoothEnabled = isBluetoothEnabled();
		if (isBluetoothEnabled) {
			Intent in = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
			in.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);// Make
																			// device
																			// discoverable
																			// for
																			// 300sec
			startActivity(in);
		}
	}

	private void turnOff() {
		boolean isBluetoothEnabled = isBluetoothEnabled();
		if (isBluetoothEnabled) {
			bluetooth_adapter.disable(); // Switch off bluetooth
			bluetooth_status.setText("Status: Bluetooth Disabled."); // Change
																		// status
																		// text
			Toast.makeText(getApplicationContext(), "Bluetooth turned off",
					Toast.LENGTH_SHORT).show();
		}
	}

	// Method that return boolean value about device enabled or disabled
	private boolean isBluetoothEnabled() {
		if (!bluetooth_adapter.isEnabled()) {
			Toast.makeText(MainActivity.this,
					"Bluetooth is disabled. Please turn on first.",
					Toast.LENGTH_SHORT).show();
			return false; // if device is disabled
		}
		return true;// If device is enabled
	}

	// On listview item clicked
	@Override
	public void onItemClick(AdapterView&lt;&gt; parent, View view, int position,
			long id) {
		boolean isBluetoothEnabled = isBluetoothEnabled();// Before doing
															// anything check if
															// bluetooth is on
															// or off
		if (isBluetoothEnabled) {// If bluetooth ON
			// then check if selected device is already paired or not
			if (bluetoothDevice_List.get(position).getBondState() != BluetoothDevice.BOND_BONDED) {

				// If device not paired then start the thread to pair devices
				ConnectThread mConnectedThread = new ConnectThread(
						bluetoothDevice_List.get(position));
				mConnectedThread.start();
			} else {

				// else show a toast
				Toast.makeText(getApplicationContext(), "Already paired.",
						Toast.LENGTH_SHORT).show();
			}
		}

	}

	// This thread will do task for pairing devices
	private class ConnectThread extends Thread {
		private BluetoothSocket mmSocket; // Bluetooth Socket
		private final BluetoothDevice mmDevice;
		private final UUID MY_UUID = UUID
				.fromString("00001101-0000-1000-8000-00805f9b34fb"); // This is
																		// Unique
																		// Id
																		// for
																		// your
																		// device

		public ConnectThread(BluetoothDevice device) {
			BluetoothSocket tmp = null;
			mmDevice = device;
			try {
				// This methods are used to make pairing
				tmp = device.createRfcommSocketToServiceRecord(MY_UUID);

				Method m = device.getClass().getMethod("createRfcommSocket",
						new Class[] { int.class });
				tmp = (BluetoothSocket) m.invoke(device, 1);

			} catch (Exception e) {
				e.printStackTrace();

			}
			mmSocket = tmp;
		}

		public void run() {

			// Cancelling discovery is neccessary
			bluetooth_adapter.cancelDiscovery();// If bluetooth adapter is
												// already discovering then
												// cancel it
			try {

				// Also unregister receiver
				unregisterReceiver(reciever);
			} catch (IllegalArgumentException e) {
				e.printStackTrace();
			}
			try {
				mmSocket.connect();// Pair device
				Log.e(TAG, "Connection Establish"); // Via this Log you can
													// check the connection
													// status

			} catch (IOException connectException) {
				connectException.printStackTrace();
				try {
					mmSocket.close(); // If exception occurs close Socket
					Log.e(TAG, "Connection Failed");
				} catch (IOException closeException) {
					closeException.printStackTrace();
				}
				return;
			}

		}

		// On cancel display Log and close socket
		public void cancel() {
			try {
				Log.e(TAG, "Connection Failed on cancel");
				mmSocket.close();
			} catch (IOException e) {
			}
		}
	}

	// On destroy unregister receiver
	@Override
	protected void onDestroy() {

		super.onDestroy();

		// Try catch block is used because receiver can throw exception if
		// receiver not registered
		try {
			unregisterReceiver(reciever);
		} catch (IllegalArgumentException e) {
			e.printStackTrace();
		}
	}

	// Custom Adapter class for Custom ListView Items
	private class CustomAdapter extends ArrayAdapter&lt;BluetoothDevice&gt; {
		private Context context;
		private int resource;
		private ArrayList&lt;BluetoothDevice&gt; deviceName;

		public CustomAdapter(Context context, int resource,
				ArrayList&lt;BluetoothDevice&gt; deviceName) {
			super(context, resource);
			this.context = context;
			this.resource = resource;
			this.deviceName = deviceName;

		}

		@Override
		public int getCount() {
			return deviceName.size();// Array List size
		}

		@Override
		public View getView(int position, View convertView, ViewGroup parent) {
			LayoutInflater inflater = (LayoutInflater) context
					.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
			if (convertView == null) {
				convertView = inflater.inflate(resource, parent, false); // Inflate
																			// layout
				TextView deviceName = (TextView) convertView
						.findViewById(R.id.devices_name);// Find textView id

				// Set device name and device address over textview
				deviceName.setText(this.deviceName.get(position).getName()
						+ "n" + this.deviceName.get(position).getAddress());
			}
			return convertView;
		}
	}

}</pre><p>
<b>8</b>. Now, you are all done, run your app and you will get the output as shown in video.</p>
<p>Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" data-recalc-dims="1" /></p>
<p><strong><a href="http://androhub.com/downloads/Bluetooth_Demo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-bluetooth/">Android Bluetooth</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/android-bluetooth/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">513</post-id>	</item>
	</channel>
</rss>
