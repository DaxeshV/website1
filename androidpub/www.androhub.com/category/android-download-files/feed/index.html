<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Android Download Files &#8211; Androhub</title>
	<atom:link href="http://www.androhub.com/category/android-download-files/feed/" rel="self" type="application/rss+xml" />
	<link>http://www.androhub.com</link>
	<description>Meet Professor Dro!d !!</description>
	<lastBuildDate>Thu, 21 Dec 2017 20:24:53 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.5.12</generator>
<site xmlns="com-wordpress:feed-additions:1">113004364</site>	<item>
		<title>Android Download Files &#038; Save</title>
		<link>http://www.androhub.com/android-download-files-save/</link>
		<comments>http://www.androhub.com/android-download-files-save/#comments</comments>
		<pubDate>Thu, 29 Oct 2015 18:58:24 +0000</pubDate>
		<dc:creator><![CDATA[Dr. Droid]]></dc:creator>
				<category><![CDATA[Android Download Files]]></category>
		<category><![CDATA[Android Internet Connection]]></category>
		<category><![CDATA[check if sd card is present]]></category>
		<category><![CDATA[check internet connection]]></category>
		<category><![CDATA[create directory]]></category>
		<category><![CDATA[create directory in SD Card]]></category>
		<category><![CDATA[download doc files]]></category>
		<category><![CDATA[download files]]></category>
		<category><![CDATA[download image files]]></category>
		<category><![CDATA[download mp3 files]]></category>
		<category><![CDATA[download pdf files]]></category>
		<category><![CDATA[download video files]]></category>
		<category><![CDATA[Open directory in SD Card]]></category>
		<category><![CDATA[SD Card]]></category>

		<guid isPermaLink="false">http://androhub.com/?p=728</guid>
		<description><![CDATA[<p>In this tutorial we are going to learn how to download pdf, doc , video, mp3, zip ,etc. files from server and save them in device memory. Below are certain things that we are going to learn in this tutorial :  1. Download Files &#8211; Download Files from Server Url. 2. Save Files &#8211; Create [&#8230;]</p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-download-files-save/">Android Download Files &#038; Save</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></description>
				<content:encoded><![CDATA[<p>In this tutorial we are going to learn how to download pdf, doc , video, mp3, zip ,etc. files from server and save them in device memory.</p>
<p>Below are certain things that we are going to learn in this tutorial :</p>
<p><strong> 1. Download Files &#8211;</strong> Download Files from Server Url.</p>
<p><strong>2. Save Files &#8211;</strong> Create Folder in device and save the dowloaded files.</p>
<p><strong>3. Download Multiple Files &#8211;</strong> Download Many Files at a time.</p>
<h3>VIDEO DEMO</h3>
<p><iframe  id="_ytid_67060" width="602" height="339" src="https://www.youtube.com/embed/FSggUwC4KeQ?enablejsapi=1&#038;autoplay=0&#038;cc_load_policy=0&#038;iv_load_policy=1&#038;loop=0&#038;modestbranding=0&#038;rel=1&#038;showinfo=1&#038;fs=1&#038;theme=dark&#038;color=red&#038;autohide=2&#038;controls=2&#038;playsinline=0&#038;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New Android ⇒ Application Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <b>res=&gt;values=strings.xml </b>and add the following strings to it.</p><pre class="crayon-plain-tag">&lt;resources&gt;
    &lt;string name="app_name"&gt;Android Download Demo&lt;/string&gt;

    &lt;string name="download_Pdf"&gt;Download pdf&lt;/string&gt;
    &lt;string name="download_Doc"&gt;Download Doc&lt;/string&gt;
    &lt;string name="download_zip"&gt;Download Zip&lt;/string&gt;
    &lt;string name="download_video"&gt;Download Video&lt;/string&gt;
    &lt;string name="download_mp3"&gt;Download MP3&lt;/string&gt;
    &lt;string name="openFolder"&gt;Open Downloaded Folder&lt;/string&gt;
    &lt;string name="downloadStarted"&gt;Download Started…&lt;/string&gt;
    &lt;string name="downloadCompleted"&gt;Download Completed…&lt;/string&gt;
    &lt;string name="downloadFailed"&gt;Download Failed…&lt;/string&gt;
    &lt;string name="downloadAgain"&gt;Download Again&lt;/string&gt;

&lt;/resources&gt;</pre><p>
<b>3</b>. Create a xml layout naming <em>activity_main.xml</em> and add the following code. In this  layout there are some Buttons for showing downloading different type of files.</p><pre class="crayon-plain-tag">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#eeeeee"
    android:orientation="vertical"
    android:padding="5dp"&gt;

    &lt;!--  Download Pdf Layout  --&gt;
    &lt;Button
        android:id="@+id/downloadPdf"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/download_Pdf" /&gt;

    &lt;!--  Download Doc Layout  --&gt;
    &lt;Button
        android:id="@+id/downloadDoc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/download_Doc" /&gt;

    &lt;!--  Download Zip File Layout  --&gt;
    &lt;Button
        android:id="@+id/downloadZip"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/download_zip" /&gt;

    &lt;!--  Download Video File Layout  --&gt;
    &lt;Button
        android:id="@+id/downloadVideo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/download_video" /&gt;

    &lt;!--  Download MP3 File Layout  --&gt;
    &lt;Button
        android:id="@+id/downloadMp3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/download_mp3" /&gt;

    &lt;!--  Open Downloaded Folder  --&gt;
    &lt;Button
        android:id="@+id/openDownloadedFolder"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:text="@string/openFolder" /&gt;

&lt;/LinearLayout&gt;</pre><p>
<b>4</b>. Create a <em>Utils.java</em> class and write all download urls here.</p><pre class="crayon-plain-tag">package com.androiddownloaddemo;

/**
 * Created by SONU on 29/10/15.
 */
public class Utils {

    //String Values to be Used in App
    public static final String downloadDirectory = "Androhub Downloads";
    public static final String mainUrl = "http://androhub.com/demo/";
    public static final String downloadPdfUrl = "http://androhub.com/demo/demo.pdf";
    public static final String downloadDocUrl = "http://androhub.com/demo/demo.doc";
    public static final String downloadZipUrl = "http://androhub.com/demo/demo.zip";
    public static final String downloadVideoUrl = "http://androhub.com/demo/demo.mp4";
    public static final String downloadMp3Url = "http://androhub.com/demo/demo.mp3";
}</pre><p>
<b>5</b>. Create a <em>CheckForSDCard.java</em><i> </i>class for checking if <em>SDCard</em> is present or not.</p><pre class="crayon-plain-tag">package com.androiddownloaddemo;

import android.os.Environment;

public class CheckForSDCard {
    //Check If SD Card is present or not method
    public boolean isSDCardPresent() {
        if (Environment.getExternalStorageState().equals(

                Environment.MEDIA_MOUNTED)) {
            return true;
        }
        return false;
    }
}</pre><p>
<b>6</b>. Now create a DownloadTask.java and add the following code. In this code AsyncTask is used for downloading data from server. There are several main steps in doInBackground(Void&#8230;arg0) that are listed below :</p>
<p>1. Converting download url into URL:</p><pre class="crayon-plain-tag">URL url = new URL(downloadUrl);</pre><p>
2. Opening Url Connection for data downloading:</p><pre class="crayon-plain-tag">HttpURLConnection c = (HttpURLConnection) url.openConnection();</pre><p>
3. Setting request method to server:</p><pre class="crayon-plain-tag">c.setRequestMethod(&quot;GET&quot;);</pre><p>
4. Connect the open connection:</p><pre class="crayon-plain-tag">c.connect();</pre><p>
5. Create a directory in SD Card if not present:</p><pre class="crayon-plain-tag">File apkStorage = new File(
        Environment.getExternalStorageDirectory() + &quot;/&quot;
                + Utils.downloadDirectory);</pre><p>
</p><pre class="crayon-plain-tag">if (!apkStorage.exists()) {
    apkStorage.mkdir();
    Log.e(TAG, &quot;Directory Created.&quot;);
}</pre><p>
6. Create an Output file i.e. download file inside above created directory:</p><pre class="crayon-plain-tag">String downloadFileName = downloadUrl.replace(Utils.mainUrl, &quot;&quot;);//Create file name by picking download file name from URL</pre><p>
</p><pre class="crayon-plain-tag">File outputFile = new File(apkStorage, downloadFileName);</pre><p>
</p><pre class="crayon-plain-tag">if (!outputFile.exists()) {
    outputFile.createNewFile();
    Log.e(TAG, &quot;File Created&quot;);
}</pre><p>
Note: Give extension to your outputFile like .pdf, .mp3, .mp4 etc.</p>
<p>7. Download File and write it over the <em>outputFile</em> created:</p><pre class="crayon-plain-tag">FileOutputStream fos = new FileOutputStream(outputFile);//Get OutputStream for NewFile Location

InputStream is = c.getInputStream();//Get InputStream for connection

byte[] buffer = new byte[1024];//Set buffer type
int len1 = 0;//init length
while ((len1 = is.read(buffer)) != -1) {
    fos.write(buffer, 0, len1);//Write new file
}</pre><p>
8. Close all connection after downloading:</p><pre class="crayon-plain-tag">fos.close();
is.close();</pre><p>
Full Code of DownloadTask.java</p><pre class="crayon-plain-tag">package com.androiddownloaddemo;

import android.content.Context;
import android.os.AsyncTask;
import android.os.Environment;
import android.os.Handler;
import android.util.Log;
import android.widget.Button;
import android.widget.Toast;

import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

/**
 * Created by SONU on 29/10/15.
 */
public class DownloadTask {

    private static final String TAG = "Download Task";
    private Context context;
    private Button buttonText;
    private String downloadUrl = "", downloadFileName = "";

    public DownloadTask(Context context, Button buttonText, String downloadUrl) {
        this.context = context;
        this.buttonText = buttonText;
        this.downloadUrl = downloadUrl;

        downloadFileName = downloadUrl.replace(Utils.mainUrl, "");//Create file name by picking download file name from URL
        Log.e(TAG, downloadFileName);

        //Start Downloading Task
        new DownloadingTask().execute();
    }

    private class DownloadingTask extends AsyncTask&lt;Void, Void, Void&gt; {

        File apkStorage = null;
        File outputFile = null;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            buttonText.setEnabled(false);
            buttonText.setText(R.string.downloadStarted);//Set Button Text when download started
        }

        @Override
        protected void onPostExecute(Void result) {
            try {
                if (outputFile != null) {
                    buttonText.setEnabled(true);
                    buttonText.setText(R.string.downloadCompleted);//If Download completed then change button text
                } else {
                    buttonText.setText(R.string.downloadFailed);//If download failed change button text
                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            buttonText.setEnabled(true);
                            buttonText.setText(R.string.downloadAgain);//Change button text again after 3sec
                        }
                    }, 3000);

                    Log.e(TAG, "Download Failed");

                }
            } catch (Exception e) {
                e.printStackTrace();

                //Change button text if exception occurs
                buttonText.setText(R.string.downloadFailed);
                new Handler().postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        buttonText.setEnabled(true);
                        buttonText.setText(R.string.downloadAgain);
                    }
                }, 3000);
                Log.e(TAG, "Download Failed with Exception - " + e.getLocalizedMessage());

            }


            super.onPostExecute(result);
        }

        @Override
        protected Void doInBackground(Void... arg0) {
            try {
                URL url = new URL(downloadUrl);//Create Download URl
                HttpURLConnection c = (HttpURLConnection) url.openConnection();//Open Url Connection
                c.setRequestMethod("GET");//Set Request Method to "GET" since we are grtting data
                c.connect();//connect the URL Connection

                //If Connection response is not OK then show Logs
                if (c.getResponseCode() != HttpURLConnection.HTTP_OK) {
                    Log.e(TAG, "Server returned HTTP " + c.getResponseCode()
                            + " " + c.getResponseMessage());

                }


                //Get File if SD card is present
                if (new CheckForSDCard().isSDCardPresent()) {

                    apkStorage = new File(
                            Environment.getExternalStorageDirectory() + "/"
                                    + Utils.downloadDirectory);
                } else
                    Toast.makeText(context, "Oops!! There is no SD Card.", Toast.LENGTH_SHORT).show();

                //If File is not present create directory
                if (!apkStorage.exists()) {
                    apkStorage.mkdir();
                    Log.e(TAG, "Directory Created.");
                }

                outputFile = new File(apkStorage, downloadFileName);//Create Output file in Main File

                //Create New File if not present
                if (!outputFile.exists()) {
                    outputFile.createNewFile();
                    Log.e(TAG, "File Created");
                }

                FileOutputStream fos = new FileOutputStream(outputFile);//Get OutputStream for NewFile Location

                InputStream is = c.getInputStream();//Get InputStream for connection

                byte[] buffer = new byte[1024];//Set buffer type
                int len1 = 0;//init length
                while ((len1 = is.read(buffer)) != -1) {
                    fos.write(buffer, 0, len1);//Write new file
                }

                //Close all connection after doing task
                fos.close();
                is.close();

            } catch (Exception e) {

                //Read exception if something went wrong
                e.printStackTrace();
                outputFile = null;
                Log.e(TAG, "Download Error Exception " + e.getMessage());
            }

            return null;
        }
    }
}</pre><p>
<b>7</b>. Now create <em>MainActivity.java</em> and add the following code. In this code i am starting AsyncTask on button click.<br />
But before downloading it is necessary there should be a proper internet connection. So for this I had created a method naming isInternetConnected() that will return true or false.</p>
<p>If you are new in how to detect internet connection then check <a href="http://androhub.com/android-detect-internet-connection-using-broadcast-receiver/" target="_blank">Detect Internet Connection Tutorial</a>.</p>
<p>Last Button is for Opening  downloaded folder and the code for opening download folder is below:</p><pre class="crayon-plain-tag">//Open downloaded folder
private void openDownloadedFolder() {
    //First check if SD Card is present or not
    if (new CheckForSDCard().isSDCardPresent()) {

        //Get Download Directory File
        File apkStorage = new File(
                Environment.getExternalStorageDirectory() + &quot;/&quot;
                        + Utils.downloadDirectory);

        //If file is not present then display Toast
        if (!apkStorage.exists())
            Toast.makeText(MainActivity.this, &quot;Right now there is no directory. Please download some file first.&quot;, Toast.LENGTH_SHORT).show();

        else {

            //If directory is present Open Folder

            /** Note: Directory will open only if there is a app to open directory like File Manager, etc.  **/

            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
            Uri uri = Uri.parse(Environment.getExternalStorageDirectory().getPath()
                    + &quot;/&quot; + Utils.downloadDirectory);
            intent.setDataAndType(uri, &quot;file/*&quot;);
            startActivity(Intent.createChooser(intent, &quot;Open Download Folder&quot;));
        }

    } else
        Toast.makeText(MainActivity.this, &quot;Oops!! There is no SD Card.&quot;, Toast.LENGTH_SHORT).show();

}</pre><p>
Full MainActivity.java Code</p><pre class="crayon-plain-tag">package com.androiddownloaddemo;

import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import java.io.File;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {
    private static Button downloadPdf, downloadDoc, downloadZip, downloadVideo, downloadMp3, openDownloadedFolder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initViews();
        setListeners();
    }

    //Initialize al Views
    private void initViews() {
        downloadPdf = (Button) findViewById(R.id.downloadPdf);
        downloadDoc = (Button) findViewById(R.id.downloadDoc);
        downloadZip = (Button) findViewById(R.id.downloadZip);
        downloadVideo = (Button) findViewById(R.id.downloadVideo);
        downloadMp3 = (Button) findViewById(R.id.downloadMp3);
        openDownloadedFolder = (Button) findViewById(R.id.openDownloadedFolder);

    }

    //Set Listeners to Buttons
    private void setListeners() {
        downloadPdf.setOnClickListener(this);
        downloadDoc.setOnClickListener(this);
        downloadZip.setOnClickListener(this);
        downloadVideo.setOnClickListener(this);
        downloadMp3.setOnClickListener(this);
        openDownloadedFolder.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        //Before starting any download check internet connection availability
        switch (view.getId()) {
            case R.id.downloadPdf:
                if (isConnectingToInternet())
                    new DownloadTask(MainActivity.this, downloadPdf, Utils.downloadPdfUrl);
                else
                    Toast.makeText(MainActivity.this, "Oops!! There is no internet connection. Please enable internet connection and try again.", Toast.LENGTH_SHORT).show();
                break;
            case R.id.downloadDoc:
                if (isConnectingToInternet())
                    new DownloadTask(MainActivity.this, downloadDoc, Utils.downloadDocUrl);
                else
                    Toast.makeText(MainActivity.this, "Oops!! There is no internet connection. Please enable internet connection and try again.", Toast.LENGTH_SHORT).show();
                break;
            case R.id.downloadZip:
                if (isConnectingToInternet())
                    new DownloadTask(MainActivity.this, downloadZip, Utils.downloadZipUrl);
                else
                    Toast.makeText(MainActivity.this, "Oops!! There is no internet connection. Please enable internet connection and try again.", Toast.LENGTH_SHORT).show();
                break;
            case R.id.downloadVideo:
                if (isConnectingToInternet())
                    new DownloadTask(MainActivity.this, downloadVideo, Utils.downloadVideoUrl);
                else
                    Toast.makeText(MainActivity.this, "Oops!! There is no internet connection. Please enable internet connection and try again.", Toast.LENGTH_SHORT).show();
                break;
            case R.id.downloadMp3:
                if (isConnectingToInternet())
                    new DownloadTask(MainActivity.this, downloadMp3, Utils.downloadMp3Url);
                else
                    Toast.makeText(MainActivity.this, "Oops!! There is no internet connection. Please enable internet connection and try again.", Toast.LENGTH_SHORT).show();
                break;
            case R.id.openDownloadedFolder:
                openDownloadedFolder();
                break;

        }

    }

    //Open downloaded folder
    private void openDownloadedFolder() {
        //First check if SD Card is present or not
        if (new CheckForSDCard().isSDCardPresent()) {

            //Get Download Directory File
            File apkStorage = new File(
                    Environment.getExternalStorageDirectory() + "/"
                            + Utils.downloadDirectory);

            //If file is not present then display Toast
            if (!apkStorage.exists())
                Toast.makeText(MainActivity.this, "Right now there is no directory. Please download some file first.", Toast.LENGTH_SHORT).show();

            else {

                //If directory is present Open Folder

                /** Note: Directory will open only if there is a app to open directory like File Manager, etc.  **/

                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                Uri uri = Uri.parse(Environment.getExternalStorageDirectory().getPath()
                        + "/" + Utils.downloadDirectory);
                intent.setDataAndType(uri, "file/*");
                startActivity(Intent.createChooser(intent, "Open Download Folder"));
            }

        } else
            Toast.makeText(MainActivity.this, "Oops!! There is no SD Card.", Toast.LENGTH_SHORT).show();

    }

    //Check if internet is present or not
    private boolean isConnectingToInternet() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connectivityManager
                .getActiveNetworkInfo();
        if (networkInfo != null &amp;&amp; networkInfo.isConnected())
            return true;
        else
            return false;
    }


}</pre><p>
<b>8</b>. Finally come to <em>AndroidManifest.xml</em> file and add below several permissions to <em>Manifest</em> file.</p><pre class="crayon-plain-tag">&amp;lt;!--  Permission required for Downloading Files  --&amp;gt;
&amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&amp;gt;

&amp;lt;!--  Permission required for Checking Internet Connection  --&amp;gt;
&amp;lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&amp;gt;

&amp;lt;!--  Permission required for Reading Writing SD Card/Memory  --&amp;gt;
&amp;lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&amp;gt;
&amp;lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&amp;gt;</pre><p>
<b>9</b>. Finally, all done you can use above steps for downloading any kind of files.</p>
<p>Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" data-recalc-dims="1" /></p>
<p><strong><a href="http://androhub.com/downloads/AndroidDownload_Demo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<p>The post <a rel="nofollow" href="http://www.androhub.com/android-download-files-save/">Android Download Files &#038; Save</a> appeared first on <a rel="nofollow" href="http://www.androhub.com">Androhub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://www.androhub.com/android-download-files-save/feed/</wfw:commentRss>
		<slash:comments>13</slash:comments>
<enclosure url="http://androhub.com/demo/demo.mp4" length="1597733" type="video/mp4" />
<enclosure url="http://androhub.com/demo/demo.mp3" length="3194915" type="audio/mpeg" />
	<post-id xmlns="com-wordpress:feed-additions:1">728</post-id>	</item>
	</channel>
</rss>
