<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
	
<!-- Mirrored from www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Jan 2018 03:28:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta charset="UTF-8" />
		<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0'>
		<title>Android Floating Widget like Facebook Messenger Chat Head - AndrohubAndrohub</title>
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="pingback" href="http://www.androhub.com/xmlrpc.php" />
					<link rel="shortcut icon" href="http://www.androhub.com/wp-content/uploads/2016/05/app_icon_small.png" type="image/x-icon" />
						
<!-- This site is optimized with the Yoast SEO plugin v4.4 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Android Floating Widget like Facebook Messenger Chat Head - Androhub" />
<meta property="og:description" content="Floating widgets are the views that float over the screen. We all love the chat heads (or chat bubbles) from the popular Facebook Messenger. This provides very handy and easy access to the chat conversation screen no matter on which screen you are. Chat heads are very convenient for multitasking as a user can work &hellip;" />
<meta property="og:url" content="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/" />
<meta property="og:site_name" content="Androhub" />
<meta property="article:publisher" content="https://www.facebook.com/androhubtutorial/" />
<meta property="article:author" content="facebook.com/sonu.surender" />
<meta property="article:tag" content="chat head" />
<meta property="article:tag" content="floating" />
<meta property="article:tag" content="floating chat head" />
<meta property="article:tag" content="Floating widget" />
<meta property="article:tag" content="messenger chat head" />
<meta property="article:tag" content="servcie" />
<meta property="article:section" content="Android Advanced" />
<meta property="article:published_time" content="2017-03-29T14:32:07+00:00" />
<meta property="article:modified_time" content="2017-03-29T14:46:46+00:00" />
<meta property="og:updated_time" content="2017-03-29T14:46:46+00:00" />
<meta property="og:image" content="http://www.androhub.com/wp-content/uploads/2017/03/floating_widget_banner.jpg" />
<meta property="og:image:width" content="795" />
<meta property="og:image:height" content="413" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="Floating widgets are the views that float over the screen. We all love the chat heads (or chat bubbles) from the popular Facebook Messenger. This provides very handy and easy access to the chat conversation screen no matter on which screen you are. Chat heads are very convenient for multitasking as a user can work [&hellip;]" />
<meta name="twitter:title" content="Android Floating Widget like Facebook Messenger Chat Head - Androhub" />
<meta name="twitter:site" content="@sonusurender0" />
<meta name="twitter:image" content="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/floating_widget_banner.jpg?fit=795%2C413" />
<meta name="twitter:creator" content="@sonusurender0" />
<!-- / Yoast SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="Androhub &raquo; Feed" href="http://www.androhub.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Androhub &raquo; Comments Feed" href="http://www.androhub.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Androhub &raquo; Android Floating Widget like Facebook Messenger Chat Head Comments Feed" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.androhub.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.12"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='http://www.androhub.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://www.androhub.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://www.androhub.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='normalize-css'  href='http://www.androhub.com/wp-content/themes/circles/css/normalize.css' type='text/css' media='all' />
<link rel='stylesheet' id='prettyPhoto-css'  href='http://www.androhub.com/wp-content/themes/circles/css/prettyPhoto.css' type='text/css' media='all' />
<link rel='stylesheet' id='grid-system-css'  href='http://www.androhub.com/wp-content/themes/circles/css/grid-system.css' type='text/css' media='all' />
<link rel='stylesheet' id='main-css'  href='http://www.androhub.com/wp-content/themes/circles/css/main.css' type='text/css' media='all' />
<link rel='stylesheet' id='shortcodes-css'  href='http://www.androhub.com/wp-content/themes/circles/css/shortcodes.css' type='text/css' media='all' />
<link rel='stylesheet' id='widgets-css'  href='http://www.androhub.com/wp-admin/css/widgets.min.css?ver=4.5.12' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='http://www.androhub.com/wp-content/themes/circles/css/font-awesome.css' type='text/css' media='all' />
<link rel='stylesheet' id='icomoon-css'  href='http://www.androhub.com/wp-content/themes/circles/css/icomoon.css' type='text/css' media='all' />
<link rel='stylesheet' id='responsiveness-css'  href='http://www.androhub.com/wp-content/themes/circles/css/media.php?switch_menu_to_mobile=' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='http://www.androhub.com/wp-content/themes/circles/style.css?ver=4.5.12' type='text/css' media='all' />
<!-- Inline jetpack_facebook_likebox -->
<style id='jetpack_facebook_likebox-inline-css' type='text/css'>
.widget_facebook_likebox {
	overflow: hidden;
}

</style>
<link rel='stylesheet' id='tablepress-default-css'  href='http://www.androhub.com/wp-content/plugins/tablepress/css/default.min.css?ver=1.7' type='text/css' media='all' />
<link rel='stylesheet' id='__EPYT__style-css'  href='http://www.androhub.com/wp-content/plugins/youtube-embed-plus/styles/ytprefs.min.css?ver=4.5.12' type='text/css' media='all' />
<style id='__EPYT__style-inline-css' type='text/css'>

                .epyt-gallery-thumb {
                        width: 33.333%;
                }
                
</style>
<link rel='stylesheet' id='social-logos-css'  href='http://www.androhub.com/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='http://www.androhub.com/wp-content/plugins/jetpack/css/jetpack.css?ver=4.4.2' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var _EPYT_ = {"ajaxurl":"http:\/\/www.androhub.com\/wp-admin\/admin-ajax.php","security":"83453349b8","gallery_scrolloffset":"20","eppathtoscripts":"http:\/\/www.androhub.com\/wp-content\/plugins\/youtube-embed-plus\/scripts\/","epresponsiveselector":"[\"iframe.__youtube_prefs_widget__\"]","epdovol":"1","version":"11.8.5","evselector":"iframe.__youtube_prefs__[src], iframe[src*=\"youtube.com\/embed\/\"], iframe[src*=\"youtube-nocookie.com\/embed\/\"]","ajax_compat":"","stopMobileBuffer":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/jetpack/modules/related-posts/related-posts.js?ver=20150408'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.androhub.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/image-captcha/assets/image-captcha.js?ver=4.5.12'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/youtube-embed-plus/scripts/ytprefs.min.js?ver=4.5.12'></script>
<link rel='https://api.w.org/' href='http://www.androhub.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.androhub.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.androhub.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.5.12" />
<link rel='shortlink' href='http://wp.me/p7E9B2-jx' />
<link rel="alternate" type="application/json+oembed" href="http://www.androhub.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androhub.com%2Fandroid-floating-widget-like-facebook-messenger-chat-head%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://www.androhub.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.androhub.com%2Fandroid-floating-widget-like-facebook-messenger-chat-head%2F&amp;format=xml" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'>
<link rel='dns-prefetch' href='http://i0.wp.com/'>
<link rel='dns-prefetch' href='http://i1.wp.com/'>
<link rel='dns-prefetch' href='http://i2.wp.com/'>
<style type='text/css'>img#wpstats{display:none}</style><!--[if lt IE 9]><script src="http://www.androhub.com/wp-content/themes/circles/js/html5.js"></script><![endif]--><!--[if lt IE 7]><script src="http://www.androhub.com/wp-content/themes/circles/js/icomoon.js"></script><![endif]-->	<script type="text/javascript">
		var ajaxurl = 'http://www.androhub.com/wp-admin/admin-ajax.php';
	</script>
				<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,800,300,700" rel="stylesheet" type="text/css">
					<link href="http://fonts.googleapis.com/css?family=Noto+Sans:400,800,300,700" rel="stylesheet" type="text/css">
			<style type="text/css">
					body,
			article .column_post-body,
			.post-body-text,
			.post-area 
			{ font-family: 'Noto Sans'; }
		
		
					.headline h1 { font-family: 'Noto Sans'; }
		
		
					.menu .menu-item a,
			.menu .page_item a { font-family: 'Noto Sans'; }
		
		
					.post-area h1, .post-body-text h1,
			.post-area h2, .post-body-text h2,
			.post-area h3, .post-body-text h3,
			.post-area h4, .post-body-text h4,
			.post-area h5, .post-body-text h5,
			.post-area h6, .post-body-text h6, aside h5 {
				font-family: 'Noto Sans';
			}
		
		
		
		
		
		
		
		
		#logo {
											}
		
			</style>
	<style type="text/css" id="dynamic-styles">
				
			
	
	
			
			
			
			
		
			
		
	
			
	
	
	
	
	
	
	
		</style>
			<style type="text/css">
			div.wrapper.menu-bg {
    display: none;
}
.right-sidebar h3{
    margin-top: 15px;
    margin-bottom: 1px;
}

footer .wrapper.grey {
    display: none;
}
.form-allowed-tags {
    display: none;
}
.headline.marble h1 {
    display: none;
}

.wrapper.headline {
    height: 36px;
}
.header-image {
    height: 50px;
    background-position: center;
}
.header-image {
    height: 50px;
}
.logo img {
    position: absolute;
    top: -18px;
    height: 87px;
    width: 270px;
    z-index: 105;
}
.marble {
    background-color: #91C448 !important;
}
.marble .page-path span,.marble .page-path a {
    color: #FFFFFF;
}
.widget_search {
    margin-bottom: 15px;
}
.grid_12 {
    margin: -8px 1.25%;
}		</style>
			<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		
<style id="custom-css-css">.phone-icon{right:522px;position:absolute;top:33px;display:inline-block;height:16px;padding:1px 0;font-size:13px;font-weight:700;margin-right:10px;padding-left:25px;background:url(http://www.androhub.com/downloads/ic_phone.png);background-position:left center;background-repeat:no-repeat}.email-icon{right:319px;position:absolute;top:33px;display:inline-block;height:16px;padding:1px 0;font-size:13px;font-weight:700;margin-right:10px;padding-left:25px;background:url(http://www.androhub.com/downloads/ic_email.png);background-position:left center;background-repeat:no-repeat}</style>
	</head>
	<body class="single single-post postid-1211 single-format-standard w1170 sticky-menu-on nice-scroll">
    
			<div class="preloading-screen" style=" background: #fff center no-repeat fixed">
			<div class="spinners">
				<div class="bounce1"></div>
			</div>
		</div>
					<header class='page-header'>
	
		
	<div class='wrapper wrapper-bg'>
		<div class='container'>
			<div class='grid_12'>
				<div class='logo'>
																					<a href='http://www.androhub.com/' title="Androhub" rel="home"><img src="http://androhub.com/wp-content/uploads/2016/05/andro_new.png" class="" alt="Androhub" /></a>
				</div>
				
<!-- Header Contact -->
<div class="phone-icon">
<span>+91 9008091580</span>
</div>

<div class="email-icon">
<span>surender@androhub.com</span>
</div>
<!--  Exit  -->


				<ul class='socials'>
											<li>
							<span class="tran02slinear"></span>
							<a class='facebook tran02slinear' href='https://www.facebook.com/sonu.surender' title="Facebook" target="_blank"></a>
						</li>
																<li>
							<span class="tran02slinear"></span>
							<a class='twitter tran02slinear' href='https://twitter.com/sonusurender0' title="Twitter" target="_blank"></a>
						</li>
																										<li>
							<span class="tran02slinear"></span>
							<a class='youtube tran02slinear' href='https://www.youtube.com/channel/UCHJh3E9mtRzbM3WVVl9glJg' title="Youtube" target="_blank"></a>
						</li>
																										<li>
							<span class="tran02slinear"></span>
							<a class='google-plus tran02slinear' href='https://plus.google.com/u/0/+SurenderKumarandrohub' title="Google+" target="_blank"></a>
						</li>
																<li>
							<span class="tran02slinear"></span>
							<a class='linkedin tran02slinear' href='https://in.linkedin.com/in/surender-kumar-681472a8' title="LinkedIn" target="_blank"></a>
						</li>
														</ul>
			</div>
		</div>
	</div>
	<div class='absolute'>
		<div class='wrapper menu-bg custom-menu-bg border-bottom-black-tr'>
			<div class='container'>
										<a id="menu-btn" href="#"></a>

						<nav class="menu"><ul><li ><a href="http://www.androhub.com/">Home</a></li></ul></nav>

					<ul class='socials mobile-socials'>
											<li>
							<span class="tran02slinear"></span>
							<a class='facebook tran02slinear' href='https://www.facebook.com/sonu.surender' title="Facebook" target="_blank"></a>
						</li>
																<li>
							<span class="tran02slinear"></span>
							<a class='twitter tran02slinear' href='https://twitter.com/sonusurender0' title="Twitter" target="_blank"></a>
						</li>
																										<li>
							<span class="tran02slinear"></span>
							<a class='youtube tran02slinear' href='https://www.youtube.com/channel/UCHJh3E9mtRzbM3WVVl9glJg' title="Youtube" target="_blank"></a>
						</li>
																										<li>
							<span class="tran02slinear"></span>
							<a class='google-plus tran02slinear' href='https://plus.google.com/u/0/+SurenderKumarandrohub' title="Google+" target="_blank"></a>
						</li>
																<li>
							<span class="tran02slinear"></span>
							<a class='linkedin tran02slinear' href='https://in.linkedin.com/in/surender-kumar-681472a8' title="LinkedIn" target="_blank"></a>
						</li>
														</ul>
			</div>
		</div>
			<div class='wrapper headline  marble border-bottom-black-tr'>
		<div class='container'>
			<div class='grid_12'>
									<h1>Blog</h1>
													<div class='page-path'>
						<div id="crumbs" xmlns:v="http://rdf.data-vocabulary.org/#"><span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="http://www.androhub.com/">Home</a></span> <span class="delimiter">|</span> <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="http://www.androhub.com/category/android-advanced/">Android Advanced</a></span> <span class="delimiter">|</span> <span class="current">Android Floating Widget like Facebook Messenger Chat Head</span></div>					</div>
							</div>
		</div>
	</div>
	</div>
</header><div class='wrapper header-image '></div>
<div class='wrapper'>
	<div class='container main'>
						<div class='post-area grid_9'>
			<div class='posts-container'>
													<article id="post-1211" class="post  center post-1211 type-post status-publish format-standard has-post-thumbnail hentry category-android-advanced tag-chat-head tag-floating tag-floating-chat-head tag-floating-widget tag-messenger-chat-head tag-servcie">
		<header>
		<a href='http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/'><h2>Android Floating Widget like Facebook Messenger Chat Head</h2></a>
	</header>
	<footer>
	<div class='post-helper-absolute'>
		<div class='avatar big'>
			<img alt='' src='http://2.gravatar.com/avatar/ebab67fae339761312d475ef8e13e63d?s=61&amp;d=mm&amp;r=g' srcset='http://2.gravatar.com/avatar/ebab67fae339761312d475ef8e13e63d?s=122&amp;d=mm&amp;r=g 2x' class='avatar avatar-61 photo' height='61' width='61' />		</div>
		<div class='post-comments'>
			<span>3</span>
		</div>
		<div class='post-author'>
			By			<span>
				<a href="http://www.androhub.com/author/droid/" title="Posts by Dr. Droid" rel="author">Dr. Droid</a>			</span>
		</div>
		<div class='post-type'>
			<span></span>
		</div>
	</div>
	<div class='post-date'>
		<span>March 29, 2017</span>
	</div>
			<div class='post-category'>
			<span>
				<a href="http://www.androhub.com/category/android-advanced/" rel="category tag">Android Advanced</a>			</span>
		</div>
		<div class='separator'>
	</div>
</footer>	<div class="post-body clearfix">
					<article class='item-con-t1'>
				<div class='container-t1'>
					<div class='container-t1-margin'>
						<img src="http://www.androhub.com/wp-content/uploads/freshizer/65f4f9a571e294a65ee7650f23c9b2ea_floating_widget_banner-863-430-c.jpg" class="wp-post-image" width="863" height="430" alt="Android Floating Widget like Facebook Messenger Chat Head"  />					</div>
				</div>
				<div class='blue-line'></div>
			</article>
				<div class='post-body-text'>
			<p>Floating widgets are the views that float over the screen. We all love the chat heads (or chat bubbles) from the popular <a href="https://www.messenger.com/" target="_blank">Facebook Messenger</a>. This provides very handy and easy access to the chat conversation screen no matter on which screen you are. Chat heads are very convenient for multitasking as a user can work and chat at the same time. That means if you are using the any app on your phone and if any new message arrives, you can open the conversation and replay the message without switching app. Pretty cool!!!</p>
<h2>Understanding the basics</h2>
<ol>
<li>Floating widget is nothing but the view that is drawn over other applications. Android system allows applications to draw over other application if the application has <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission. We are going to use the <a href="http://www.androhub.com/android-services/" target="_blank">background service</a> to add the floating widget into the view hierarchy of the current screen. So, this floating view is always on top of application windows.</li>
<li>To drag the view across the screen we are going to override <strong>OnTouchListener()</strong> to listen to drag events and change the position of the view has in the screen.</li>
</ol>
<h2>Example</h2>
<p>In this tutorial, we are going to learn how to create simple chat head and allow user to drag them across the screen. So that user can adjust the position of the floating widget in the screen.</p>
<h2>VIDEO DEMO</h2>
<p><iframe  id="_ytid_72782" width="602" height="339" src="https://www.youtube.com/embed/B5zRaD7B504?enablejsapi=1&amp;autoplay=0&amp;cc_load_policy=0&amp;iv_load_policy=1&amp;loop=0&amp;modestbranding=0&amp;rel=1&amp;showinfo=1&amp;fs=1&amp;theme=dark&amp;color=red&amp;autohide=2&amp;controls=2&amp;playsinline=0&amp;" class="__youtube_prefs__" title="YouTube player"  allowfullscreen data-no-lazy="1" data-skipgform_ajax_framebjll=""></iframe></p>
<p><strong>1</strong>. Create a new project in Android Studio by navigating to <strong>File ⇒ New ⇒ New Project</strong> and fill required details. By default my activity is <em>MainActivity.java</em>.</p>
<p><b>2</b>. Open <strong>res ⇒ values ⇒ strings.xml</strong> and add below string values. These are some strings that we are going to use in our project.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d0b194624008" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">strings.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;resources&gt;
    &lt;string name="app_name"&gt;Floating Widget Demo&lt;/string&gt;
    &lt;string name="create_floating_widget"&gt;Create Floating Widget&lt;/string&gt;
    &lt;string name="floating_widget_label"&gt;Floating Widget Label&lt;/string&gt;
    &lt;string name="floating_widget_details"&gt;Floating Widget Details&lt;/string&gt;
    &lt;string name="draw_other_app_permission_denied"&gt;Draw over other app permission not available. App won\'t work without permission. Please try again.&lt;/string&gt;
&lt;/resources&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d0b194624008-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d0b194624008-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d0b194624008-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d0b194624008-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d0b194624008-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d0b194624008-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d0b194624008-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d0b194624008-1"><span class="crayon-o">&lt;</span><span class="crayon-v">resources</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d0b194624008-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-t">string</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"app_name"</span><span class="crayon-o">&gt;</span><span class="crayon-e">Floating </span><span class="crayon-e">Widget </span><span class="crayon-v">Demo</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-t">string</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d0b194624008-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-t">string</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"create_floating_widget"</span><span class="crayon-o">&gt;</span><span class="crayon-e">Create </span><span class="crayon-e">Floating </span><span class="crayon-v">Widget</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-t">string</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d0b194624008-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-t">string</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"floating_widget_label"</span><span class="crayon-o">&gt;</span><span class="crayon-e">Floating </span><span class="crayon-e">Widget </span><span class="crayon-v">Label</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-t">string</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d0b194624008-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-t">string</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"floating_widget_details"</span><span class="crayon-o">&gt;</span><span class="crayon-e">Floating </span><span class="crayon-e">Widget </span><span class="crayon-v">Details</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-t">string</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d0b194624008-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-t">string</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"draw_other_app_permission_denied"</span><span class="crayon-o">&gt;</span><span class="crayon-e">Draw </span><span class="crayon-e">over </span><span class="crayon-e">other </span><span class="crayon-e">app </span><span class="crayon-e">permission </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">available</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">App </span><span class="crayon-v">won</span><span class="crayon-sy">\</span>'<span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-e">work </span><span class="crayon-e">without </span><span class="crayon-v">permission</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Please </span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-v">again</span><span class="crayon-sy">.</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-t">string</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d0b194624008-7"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">resources</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0040 seconds] -->
<p>
<b>3</b>. Add <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission to the AndroidManifest.xml file. This permission allows an app to create windows, shown on top of all other apps.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d1d501196380" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">AndroidManifest.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
 &lt;!--  Permission required to draw floating widget over other apps  --&gt;
    &lt;uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d1d501196380-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d1d501196380-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d1d501196380-1"><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">Permission </span><span class="crayon-e">required </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">draw </span><span class="crayon-e">floating </span><span class="crayon-e">widget </span><span class="crayon-e">over </span><span class="crayon-e">other </span><span class="crayon-v">apps</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d1d501196380-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-v">uses</span><span class="crayon-o">-</span><span class="crayon-e">permission </span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"android.permission.SYSTEM_ALERT_WINDOW"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0013 seconds] -->
<p>
<b>4</b>. Create a new layout naming <em>floating_widget_layout.xml</em> for the floating widget view. This layout will contain two main views.</p>
<p><strong>Collapsed view:</strong><br />
The floating widget will remain collapsed when the view is launched. When the user clicks on this view, an expanded view will open.</p>
<p><strong>Expanded View:</strong><br />
This view will contain all the views that you want to display when user clicks on Floating Widget.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d26019148225" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">floating_widget_layout.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"&gt;

    &lt;!--   Root container of Floating Widget View  --&gt;
    &lt;RelativeLayout
        android:id="+id/root_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"&gt;

        &lt;!--  View while view is collapsed  --&gt;

        &lt;RelativeLayout
            android:id="+id/collapse_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="visible"&gt;

            &lt;!--   ImageView of floating widget  --&gt;
            &lt;ImageView
                android:id="+id/collapsed_iv"
                android:layout_width="70dp"
                android:layout_height="70dp"
                android:layout_marginTop="8dp"
                android:src="mipmap/ic_launcher_round"
                tools:ignore="ContentDescription" /&gt;

            &lt;!--   Close button to close Floating Widget View  --&gt;
            &lt;ImageView
                android:id="+id/close_floating_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:layout_marginTop="5dp"
                android:background="drawable/circle_shape"
                android:src="drawable/ic_close_white_24dp"
                tools:ignore="ContentDescription" /&gt;
        &lt;/RelativeLayout&gt;

        &lt;!--   View while view is expanded   --&gt;
        &lt;LinearLayout
            android:id="+id/expanded_container"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="android:color/white"
            android:gravity="center"
            android:orientation="horizontal"
            android:padding="8dp"
            android:visibility="gone"&gt;

            &lt;ImageView
                android:id="+id/floating_widget_image_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="mipmap/ic_launcher" /&gt;

            &lt;LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:orientation="vertical"&gt;

                &lt;TextView
                    android:id="+id/floating_widget_title_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:text="string/floating_widget_label"
                    android:textColor="android:color/black"
                    android:textSize="14sp" /&gt;

                &lt;TextView
                    android:id="+id/floating_widget_detail_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:text="string/floating_widget_details"
                    android:textColor="android:color/darker_gray"
                    android:textSize="11sp" /&gt;
            &lt;/LinearLayout&gt;

            &lt;!--  ImageView to Close Expanded View  --&gt;
            &lt;ImageView
                android:id="+id/close_expanded_view"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:padding="10dp"
                android:src="drawable/ic_close_black_24dp" /&gt;

            &lt;!--  ImageView to Open Activity  --&gt;
            &lt;ImageView
                android:id="+id/open_activity_button"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:padding="10dp"
                android:src="drawable/ic_aspect_ratio_black_24dp" /&gt;
        &lt;/LinearLayout&gt;
    &lt;/RelativeLayout&gt;
&lt;/FrameLayout&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-28">28</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-30">30</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-32">32</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-34">34</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-36">36</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-38">38</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-40">40</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-42">42</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-44">44</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-46">46</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-48">48</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-50">50</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-52">52</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-54">54</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-56">56</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-58">58</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-60">60</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-62">62</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-64">64</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-66">66</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-68">68</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-70">70</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-72">72</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-74">74</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-76">76</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-78">78</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-80">80</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-82">82</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-84">84</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-86">86</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-88">88</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-90">90</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-92">92</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-94">94</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-96">96</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-98">98</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-100">100</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-102">102</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d26019148225-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d26019148225-104">104</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"utf-8"</span><span class="crayon-ta">?&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-2"><span class="crayon-o">&lt;</span><span class="crayon-e">FrameLayout </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">tools</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/tools"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-6">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">Root </span><span class="crayon-e">container </span><span class="crayon-e">of </span><span class="crayon-e">Floating </span><span class="crayon-e">Widget </span><span class="crayon-v">View</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">RelativeLayout</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-9"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/root_container"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-12">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">View </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-e">view </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-v">collapsed</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-14">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">RelativeLayout</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-16"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/collapse_view"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">orientation</span><span class="crayon-o">=</span><span class="crayon-s">"vertical"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">visibility</span><span class="crayon-o">=</span><span class="crayon-s">"visible"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">ImageView </span><span class="crayon-e">of </span><span class="crayon-e">floating </span><span class="crayon-v">widget</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">ImageView</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-24"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/collapsed_iv"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"70dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"70dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginTop</span><span class="crayon-o">=</span><span class="crayon-s">"8dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"mipmap/ic_launcher_round"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tools</span><span class="crayon-o">:</span><span class="crayon-v">ignore</span><span class="crayon-o">=</span><span class="crayon-s">"ContentDescription"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-30">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">Close </span><span class="crayon-e">button </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">close </span><span class="crayon-e">Floating </span><span class="crayon-e">Widget </span><span class="crayon-v">View</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">ImageView</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-33"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/close_floating_view"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginLeft</span><span class="crayon-o">=</span><span class="crayon-s">"50dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginTop</span><span class="crayon-o">=</span><span class="crayon-s">"5dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">background</span><span class="crayon-o">=</span><span class="crayon-s">"drawable/circle_shape"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"drawable/ic_close_white_24dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tools</span><span class="crayon-o">:</span><span class="crayon-v">ignore</span><span class="crayon-o">=</span><span class="crayon-s">"ContentDescription"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">RelativeLayout</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-42">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">View </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-e">view </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-v">expanded</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">LinearLayout</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-45"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/expanded_container"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">background</span><span class="crayon-o">=</span><span class="crayon-s">"android:color/white"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">gravity</span><span class="crayon-o">=</span><span class="crayon-s">"center"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">orientation</span><span class="crayon-o">=</span><span class="crayon-s">"horizontal"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">padding</span><span class="crayon-o">=</span><span class="crayon-s">"8dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">visibility</span><span class="crayon-o">=</span><span class="crayon-s">"gone"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-53">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">ImageView</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-55"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/floating_widget_image_view"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"mipmap/ic_launcher"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-59">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">LinearLayout</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-61"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_marginLeft</span><span class="crayon-o">=</span><span class="crayon-s">"5dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">orientation</span><span class="crayon-o">=</span><span class="crayon-s">"vertical"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-65">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">TextView</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-67"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/floating_widget_title_label"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">gravity</span><span class="crayon-o">=</span><span class="crayon-s">"center_vertical"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"string/floating_widget_label"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">textColor</span><span class="crayon-o">=</span><span class="crayon-s">"android:color/black"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">textSize</span><span class="crayon-o">=</span><span class="crayon-s">"14sp"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-74">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">TextView</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-76"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/floating_widget_detail_label"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">gravity</span><span class="crayon-o">=</span><span class="crayon-s">"center_vertical"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"string/floating_widget_details"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">textColor</span><span class="crayon-o">=</span><span class="crayon-s">"android:color/darker_gray"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">textSize</span><span class="crayon-o">=</span><span class="crayon-s">"11sp"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">LinearLayout</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-84">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">ImageView </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">Close </span><span class="crayon-e">Expanded </span><span class="crayon-v">View</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">ImageView</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-87"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/close_expanded_view"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_weight</span><span class="crayon-o">=</span><span class="crayon-s">"1"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">padding</span><span class="crayon-o">=</span><span class="crayon-s">"10dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"drawable/ic_close_black_24dp"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-93">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">ImageView </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">Open </span><span class="crayon-v">Activity</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">ImageView</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-96"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/open_activity_button"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_weight</span><span class="crayon-o">=</span><span class="crayon-s">"1"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">padding</span><span class="crayon-o">=</span><span class="crayon-s">"10dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"drawable/ic_aspect_ratio_black_24dp"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">LinearLayout</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d26019148225-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">RelativeLayout</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d26019148225-104"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">FrameLayout</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0292 seconds] -->
<p>
<div id="attachment_1217" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1217 size-large" src="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=576%2C1024" alt="Collapse View Screenshot" srcset="https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=576%2C1024 576w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=169%2C300 169w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?resize=768%2C1365 768w, https://i1.wp.com/www.androhub.com/wp-content/uploads/2017/03/collapse_view_floating_widget.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Collapse View Screenshot</p></div>
<p>&nbsp;</p>
<div id="attachment_1218" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1218 size-large" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=576%2C1024" alt="Expanded View Screenshot" srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/expand_view_floating_widget.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Expanded View Screenshot</p></div>
<p><b>5</b>. For chat head if you long press it and drag to bottom a remove layout shows with close image. So we have to create the same layout naming <em>remove_floating_widget_layout.xml</em> and add the ImageView with cross image to it. This view will be displayed when user hold/long press the chat head.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d39302751261" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">remove_floating_widget_layout.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="+id/remove_relativelayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="10dp"&gt;

    &lt;ImageView
        android:id="+id/remove_img"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:background="drawable/white_circle_shape"
        android:padding="10dp"
        android:src="drawable/ic_close_white_24dp" /&gt;

&lt;/RelativeLayout&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d39302751261-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d39302751261-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"utf-8"</span><span class="crayon-ta">?&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-2"><span class="crayon-o">&lt;</span><span class="crayon-e">RelativeLayout </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/remove_relativelayout"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"match_parent"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"wrap_content"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">padding</span><span class="crayon-o">=</span><span class="crayon-s">"10dp"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">ImageView</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-9"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">id</span><span class="crayon-o">=</span><span class="crayon-s">"+id/remove_img"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_width</span><span class="crayon-o">=</span><span class="crayon-s">"60dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">layout_height</span><span class="crayon-o">=</span><span class="crayon-s">"60dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">background</span><span class="crayon-o">=</span><span class="crayon-s">"drawable/white_circle_shape"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">padding</span><span class="crayon-o">=</span><span class="crayon-s">"10dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">src</span><span class="crayon-o">=</span><span class="crayon-s">"drawable/ic_close_white_24dp"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d39302751261-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d39302751261-16"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">RelativeLayout</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0041 seconds] -->
<p>
<b>6</b>. Below are the custom drawables and vector drawables that i am using in this project.</p>
<ul>
<li><strong>circle_shape.xml</strong></li>
</ul>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d42263357948" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">circle_shape.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"&gt;
    &lt;solid android:color="android:color/black" /&gt;

&lt;/shape&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d42263357948-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d42263357948-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d42263357948-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d42263357948-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d42263357948-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d42263357948-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d42263357948-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"utf-8"</span><span class="crayon-ta">?&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d42263357948-2"><span class="crayon-o">&lt;</span><span class="crayon-e">shape </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d42263357948-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">shape</span><span class="crayon-o">=</span><span class="crayon-s">"oval"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d42263357948-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">solid </span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">color</span><span class="crayon-o">=</span><span class="crayon-s">"android:color/black"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d42263357948-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d42263357948-6"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">shape</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0027 seconds] -->

<ul>
<li><strong>ic_aspect_ratio_black_24dp.xml</strong></li>
</ul>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d4a213888396" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">ic_aspect_ratio_black_24dp.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0"&gt;
    &lt;path
        android:fillColor="#FF000000"
        android:pathData="M19,12h-2v3h-3v2h5v-5zM7,9h3L10,7L5,7v5h2L7,9zM21,3L3,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h18c1.1,0 2,-0.9 2,-2L23,5c0,-1.1 -0.9,-2 -2,-2zM21,19.01L3,19.01L3,4.99h18v14.02z"/&gt;
&lt;/vector&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d4a213888396-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d4a213888396-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d4a213888396-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d4a213888396-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d4a213888396-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d4a213888396-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d4a213888396-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d4a213888396-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d4a213888396-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d4a213888396-1"><span class="crayon-o">&lt;</span><span class="crayon-e">vector </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d4a213888396-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">width</span><span class="crayon-o">=</span><span class="crayon-s">"24dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d4a213888396-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">height</span><span class="crayon-o">=</span><span class="crayon-s">"24dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d4a213888396-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">viewportWidth</span><span class="crayon-o">=</span><span class="crayon-s">"24.0"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d4a213888396-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">viewportHeight</span><span class="crayon-o">=</span><span class="crayon-s">"24.0"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d4a213888396-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">path</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d4a213888396-7"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">fillColor</span><span class="crayon-o">=</span><span class="crayon-s">"#FF000000"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d4a213888396-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">pathData</span><span class="crayon-o">=</span><span class="crayon-s">"M19,12h-2v3h-3v2h5v-5zM7,9h3L10,7L5,7v5h2L7,9zM21,3L3,3c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h18c1.1,0 2,-0.9 2,-2L23,5c0,-1.1 -0.9,-2 -2,-2zM21,19.01L3,19.01L3,4.99h18v14.02z"</span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d4a213888396-9"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">vector</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->

<ul>
<li><strong>ic_close_black_24dp.xml</strong></li>
</ul>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d52595995436" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">ic_close_black_24dp.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;vector xmlns:android="http://schemas.android.com/apk/res/android"
        android:width="24dp"
        android:height="24dp"
        android:viewportWidth="24.0"
        android:viewportHeight="24.0"&gt;
    &lt;path
        android:fillColor="#FF000000"
        android:pathData="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"/&gt;
&lt;/vector&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d52595995436-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d52595995436-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d52595995436-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d52595995436-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d52595995436-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d52595995436-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d52595995436-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d52595995436-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d52595995436-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d52595995436-1"><span class="crayon-o">&lt;</span><span class="crayon-e">vector </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d52595995436-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">width</span><span class="crayon-o">=</span><span class="crayon-s">"24dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d52595995436-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">height</span><span class="crayon-o">=</span><span class="crayon-s">"24dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d52595995436-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">viewportWidth</span><span class="crayon-o">=</span><span class="crayon-s">"24.0"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d52595995436-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">viewportHeight</span><span class="crayon-o">=</span><span class="crayon-s">"24.0"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d52595995436-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">path</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d52595995436-7"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">fillColor</span><span class="crayon-o">=</span><span class="crayon-s">"#FF000000"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d52595995436-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">pathData</span><span class="crayon-o">=</span><span class="crayon-s">"M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"</span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d52595995436-9"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">vector</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->

<ul>
<li><strong>ic_close_white_24dp.xml</strong></li>
</ul>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d5a259037384" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">ic_close_white_24dp.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportHeight="24.0"
    android:viewportWidth="24.0"&gt;
    &lt;path
        android:fillColor="#FFFFFFFF"
        android:pathData="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z" /&gt;
&lt;/vector&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d5a259037384-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d5a259037384-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d5a259037384-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d5a259037384-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d5a259037384-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d5a259037384-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d5a259037384-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d5a259037384-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d5a259037384-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d5a259037384-1"><span class="crayon-o">&lt;</span><span class="crayon-e">vector </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d5a259037384-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">width</span><span class="crayon-o">=</span><span class="crayon-s">"24dp"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d5a259037384-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">height</span><span class="crayon-o">=</span><span class="crayon-s">"24dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d5a259037384-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">viewportHeight</span><span class="crayon-o">=</span><span class="crayon-s">"24.0"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d5a259037384-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">viewportWidth</span><span class="crayon-o">=</span><span class="crayon-s">"24.0"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d5a259037384-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">path</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d5a259037384-7"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">fillColor</span><span class="crayon-o">=</span><span class="crayon-s">"#FFFFFFFF"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d5a259037384-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">pathData</span><span class="crayon-o">=</span><span class="crayon-s">"M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d5a259037384-9"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">vector</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->

<ul>
<li><strong>white_circle_shape.xml</strong></li>
</ul>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d62752228838" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">white_circle_shape.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-mixed-highlight" title="Contains Mixed Languages"></span><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"&gt;
    &lt;stroke
        android:width="1dp"
        android:color="android:color/white" /&gt;


&lt;/shape&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d62752228838-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d62752228838-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d62752228838-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d62752228838-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d62752228838-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d62752228838-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d62752228838-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d62752228838-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d62752228838-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d62752228838-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"utf-8"</span><span class="crayon-ta">?&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d62752228838-2"><span class="crayon-o">&lt;</span><span class="crayon-e">shape </span><span class="crayon-v">xmlns</span><span class="crayon-o">:</span><span class="crayon-v">android</span><span class="crayon-o">=</span><span class="crayon-s">"http://schemas.android.com/apk/res/android"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d62752228838-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">shape</span><span class="crayon-o">=</span><span class="crayon-s">"oval"</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d62752228838-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">stroke</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d62752228838-5"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">width</span><span class="crayon-o">=</span><span class="crayon-s">"1dp"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d62752228838-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">color</span><span class="crayon-o">=</span><span class="crayon-s">"android:color/white"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d62752228838-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d62752228838-8">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d62752228838-9"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">shape</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0061 seconds] -->

<b>7</b>. Now create a service class called <em>FloatingWidgetService.java</em>. Whenever you want to display a chat head, start the service using <strong>startService()</strong> command. In <strong>onCreate()</strong> of the service we will add the layout of the chat head at the t<strong>op-left corner</strong> of the window.</p>
<p>In this class we are adding both Floating Widget View and Remove View to Window manager and initially hiding Remove View and showing only Collapse View of Floating Widget.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d6a072775324" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">FloatingWidgetService.java</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
public class FloatingWidgetService extends Service implements View.OnClickListener {
    private WindowManager mWindowManager;
    private View mFloatingWidgetView, collapsedView, expandedView;
    private ImageView remove_image_view;
    private View removeFloatingWidgetView;

    public FloatingWidgetService() {
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        //init WindowManager
        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

        //Init LayoutInflater
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        addRemoveView(inflater);
        addFloatingWidgetView(inflater);
    }


    /*  Add Remove View to Window Manager  */
    private View addRemoveView(LayoutInflater inflater) {
        //Inflate the removing view layout we created
        removeFloatingWidgetView = inflater.inflate(R.layout.remove_floating_widget_layout, null);

        //Add the view to the window.
        WindowManager.LayoutParams paramRemove = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        paramRemove.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially the Removing widget view is not visible, so set visibility to GONE
        removeFloatingWidgetView.setVisibility(View.GONE);
        remove_image_view = (ImageView) removeFloatingWidgetView.findViewById(R.id.remove_img);

        //Add the view to the window
        mWindowManager.addView(removeFloatingWidgetView, paramRemove);
        return remove_image_view;
    }

    /*  Add Floating Widget View to Window Manager  */
    private void addFloatingWidgetView(LayoutInflater inflater) {
        //Inflate the floating view layout we created
        mFloatingWidgetView = inflater.inflate(R.layout.floating_widget_layout, null);

        //Add the view to the window.
        final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        params.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially view will be added to top-left corner, you change x-y coordinates according to your need
        params.x = 0;
        params.y = 100;

        //Add the view to the window
        mWindowManager.addView(mFloatingWidgetView, params);

        //find id of collapsed view layout
        collapsedView = mFloatingWidgetView.findViewById(R.id.collapse_view);

        //find id of the expanded view layout
        expandedView = mFloatingWidgetView.findViewById(R.id.expanded_container);
    }

 @Override
    public void onDestroy() {
        super.onDestroy();

        /*  on destroy remove both view from window manager */

        if (mFloatingWidgetView != null)
            mWindowManager.removeView(mFloatingWidgetView);

        if (removeFloatingWidgetView != null)
            mWindowManager.removeView(removeFloatingWidgetView);

    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-28">28</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-30">30</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-32">32</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-34">34</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-36">36</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-38">38</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-40">40</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-42">42</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-44">44</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-46">46</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-48">48</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-50">50</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-52">52</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-54">54</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-56">56</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-58">58</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-60">60</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-62">62</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-64">64</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-66">66</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-68">68</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-70">70</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-72">72</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-74">74</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-76">76</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-78">78</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-80">80</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-82">82</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-84">84</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-86">86</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-88">88</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-90">90</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-92">92</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-94">94</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-96">96</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d6a072775324-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d6a072775324-98">98</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">FloatingWidgetService </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">Service </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-i">OnClickListener</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">WindowManager </span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">collapsedView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">expandedView</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">ImageView </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-6">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">FloatingWidgetService</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-i">Nullable</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-12"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">IBinder </span><span class="crayon-e">onBind</span><span class="crayon-sy">(</span><span class="crayon-e">Intent </span><span class="crayon-v">intent</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-17"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//init WindowManager</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">getSystemService</span><span class="crayon-sy">(</span><span class="crayon-v">WINDOW_SERVICE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-22">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Init LayoutInflater</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">LayoutInflater</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">getSystemService</span><span class="crayon-sy">(</span><span class="crayon-v">LAYOUT_INFLATER_SERVICE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">addRemoveView</span><span class="crayon-sy">(</span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">addFloatingWidgetView</span><span class="crayon-sy">(</span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-29">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-30">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Add Remove View to Window Manager&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-e">addRemoveView</span><span class="crayon-sy">(</span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Inflate the removing view layout we created</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inflater</span><span class="crayon-sy">.</span><span class="crayon-e">inflate</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">remove_floating_widget_layout</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">paramRemove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_PHONE</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_NOT_FOCUSABLE</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_WATCH_OUTSIDE_TOUCH</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_LAYOUT_NO_LIMITS</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">PixelFormat</span><span class="crayon-sy">.</span><span class="crayon-v">TRANSLUCENT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-43">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Specify the view position</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramRemove</span><span class="crayon-sy">.</span><span class="crayon-v">gravity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">TOP</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">LEFT</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-46">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Initially the Removing widget view is not visible, so set visibility to GONE</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">ImageView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">remove_img</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-50">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">addView</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">paramRemove</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-55">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Add Floating Widget View to Window Manager&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">addFloatingWidgetView</span><span class="crayon-sy">(</span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Inflate the floating view layout we created</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inflater</span><span class="crayon-sy">.</span><span class="crayon-e">inflate</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">floating_widget_layout</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-60">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">params</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_PHONE</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_NOT_FOCUSABLE</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">PixelFormat</span><span class="crayon-sy">.</span><span class="crayon-v">TRANSLUCENT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-68">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Specify the view position</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">gravity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">TOP</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">LEFT</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-71">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Initially view will be added to top-left corner, you change x-y coordinates according to your need</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-75">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">addView</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-78">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//find id of collapsed view layout</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">collapsedView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">collapse_view</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-81">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//find id of the expanded view layout</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">expandedView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">expanded_container</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-85">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-86"><span class="crayon-h"> </span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-87"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onDestroy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onDestroy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-89">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;on destroy remove both view from window manager */</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-91">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">removeView</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-94">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">removeView</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d6a072775324-97">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d6a072775324-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0220 seconds] -->
<p>
<b>8</b>. To drag the chat head along with the user’s touch, we have to override <strong>OnTouchListener()</strong>. Whenever the user touches the chat head, we will record the initial x and y coordinates, and when the user moves the finger, the application will calculate the new X and Y coordinate and move the chat head.</p>
<p>The below code is performing various process:</p>
<ul>
<li>Triggering long click if user hold or press chat head for long time.</li>
<li>If long click event occurs then displaying Remove View visibility.</li>
<li>Trigger on click event for Chat Head.</li>
<li>Stoping Floating widget service if user drag and drop the Floating View into Remove View.</li>
</ul>
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d7a997188624" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">onTouchListener</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
 //Drag and move floating view using user's touch action.
        mFloatingWidgetView.findViewById(R.id.root_container).setOnTouchListener(new View.OnTouchListener() {

            long time_start = 0, time_end = 0;

            boolean isLongClick = false;//variable to judge if user click long press
            boolean inBounded = false;//variable to judge if floating view is bounded to remove view
            int remove_img_width = 0, remove_img_height = 0;

            Handler handler_longClick = new Handler();
            Runnable runnable_longClick = new Runnable() {
                @Override
                public void run() {
                    //On Floating Widget Long Click

                    //Set isLongClick as true
                    isLongClick = true;

                    //Set remove widget view visibility to VISIBLE
                    removeFloatingWidgetView.setVisibility(View.VISIBLE);

                    onFloatingWidgetLongClick();
                }
            };

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                //Get Floating widget view params
                WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

                //get the touch location coordinates
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();

                int x_cord_Destination, y_cord_Destination;

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        time_start = System.currentTimeMillis();

                        handler_longClick.postDelayed(runnable_longClick, 600);

                        remove_img_width = remove_image_view.getLayoutParams().width;
                        remove_img_height = remove_image_view.getLayoutParams().height;

                        x_init_cord = x_cord;
                        y_init_cord = y_cord;

                        //remember the initial position.
                        x_init_margin = layoutParams.x;
                        y_init_margin = layoutParams.y;

                        return true;
                    case MotionEvent.ACTION_UP:
                        isLongClick = false;
                        removeFloatingWidgetView.setVisibility(View.GONE);
                        remove_image_view.getLayoutParams().height = remove_img_height;
                        remove_image_view.getLayoutParams().width = remove_img_width;
                        handler_longClick.removeCallbacks(runnable_longClick);

                        //If user drag and drop the floating widget view into remove view then stop the service
                        if (inBounded) {
                            stopSelf();
                            inBounded = false;
                            break;
                        }


                        //Get the difference between initial coordinate and current coordinate
                        int x_diff = x_cord - x_init_cord;
                        int y_diff = y_cord - y_init_cord;

                        //The check for x_diff &lt;5 &amp;&amp; y_diff&lt; 5 because sometime elements moves a little while clicking.
                        //So that is click event.
                        if (Math.abs(x_diff) &lt; 5 &amp;&amp; Math.abs(y_diff) &lt; 5) {
                            time_end = System.currentTimeMillis();

                            //Also check the difference between start time and end time should be less than 300ms
                            if ((time_end - time_start) &lt; 300)
                                onFloatingWidgetClick();

                        }

                        y_cord_Destination = y_init_margin + y_diff;

                        int barHeight = getStatusBarHeight();
                        if (y_cord_Destination &lt; 0) {
                            y_cord_Destination = 0;
                        } else if (y_cord_Destination + (mFloatingWidgetView.getHeight() + barHeight) &gt; szWindow.y) {
                            y_cord_Destination = szWindow.y - (mFloatingWidgetView.getHeight() + barHeight);
                        }

                        layoutParams.y = y_cord_Destination;

                        inBounded = false;

                        //reset position if user drags the floating view
                        resetPosition(x_cord);

                        return true;
                    case MotionEvent.ACTION_MOVE:
                        int x_diff_move = x_cord - x_init_cord;
                        int y_diff_move = y_cord - y_init_cord;

                        x_cord_Destination = x_init_margin + x_diff_move;
                        y_cord_Destination = y_init_margin + y_diff_move;

                        //If user long click the floating view, update remove view
                        if (isLongClick) {
                            int x_bound_left = szWindow.x / 2 - (int) (remove_img_width * 1.5);
                            int x_bound_right = szWindow.x / 2 + (int) (remove_img_width * 1.5);
                            int y_bound_top = szWindow.y - (int) (remove_img_height * 1.5);

                            //If Floating view comes under Remove View update Window Manager
                            if ((x_cord &gt;= x_bound_left &amp;&amp; x_cord &lt;= x_bound_right) &amp;&amp; y_cord &gt;= y_bound_top) {
                                inBounded = true;

                                int x_cord_remove = (int) ((szWindow.x - (remove_img_height * 1.5)) / 2);
                                int y_cord_remove = (int) (szWindow.y - ((remove_img_width * 1.5) + getStatusBarHeight()));

                                if (remove_image_view.getLayoutParams().height == remove_img_height) {
                                    remove_image_view.getLayoutParams().height = (int) (remove_img_height * 1.5);
                                    remove_image_view.getLayoutParams().width = (int) (remove_img_width * 1.5);

                                    WindowManager.LayoutParams param_remove = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();
                                    param_remove.x = x_cord_remove;
                                    param_remove.y = y_cord_remove;

                                    mWindowManager.updateViewLayout(removeFloatingWidgetView, param_remove);
                                }

                                layoutParams.x = x_cord_remove + (Math.abs(removeFloatingWidgetView.getWidth() - mFloatingWidgetView.getWidth())) / 2;
                                layoutParams.y = y_cord_remove + (Math.abs(removeFloatingWidgetView.getHeight() - mFloatingWidgetView.getHeight())) / 2;

                                //Update the layout with new X &amp; Y coordinate
                                mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                                break;
                            } else {
                                //If Floating window gets out of the Remove view update Remove view again
                                inBounded = false;
                                remove_image_view.getLayoutParams().height = remove_img_height;
                                remove_image_view.getLayoutParams().width = remove_img_width;
                                onFloatingWidgetClick();
                            }

                        }


                        layoutParams.x = x_cord_Destination;
                        layoutParams.y = y_cord_Destination;

                        //Update the layout with new X &amp; Y coordinate
                        mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                        return true;
                }
                return false;
            }
        });</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-28">28</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-30">30</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-32">32</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-34">34</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-36">36</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-38">38</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-40">40</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-42">42</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-44">44</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-46">46</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-48">48</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-50">50</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-52">52</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-54">54</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-56">56</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-58">58</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-60">60</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-62">62</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-64">64</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-66">66</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-68">68</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-70">70</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-72">72</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-74">74</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-76">76</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-78">78</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-80">80</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-82">82</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-84">84</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-86">86</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-88">88</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-90">90</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-92">92</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-94">94</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-96">96</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-98">98</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-100">100</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-102">102</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-104">104</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-106">106</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-108">108</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-110">110</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-112">112</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-114">114</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-116">116</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-118">118</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-120">120</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-122">122</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-124">124</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-126">126</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-128">128</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-130">130</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-132">132</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-134">134</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-136">136</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-138">138</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-140">140</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-142">142</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-144">144</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-146">146</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-148">148</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-150">150</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-152">152</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-154">154</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-156">156</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d7a997188624-158">158</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d7a997188624-159">159</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-1"><span class="crayon-h"> </span><span class="crayon-c">//Drag and move floating view using user's touch action.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">root_container</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">setOnTouchListener</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-e">OnTouchListener</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">time_start</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">time_end</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-v">isLongClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span><span class="crayon-c">//variable to judge if user click long press</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span><span class="crayon-c">//variable to judge if floating view is bounded to remove view</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Handler </span><span class="crayon-v">handler_longClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Handler</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Runnable </span><span class="crayon-v">runnable_longClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Runnable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-13"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//On Floating Widget Long Click</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Set isLongClick as true</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLongClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-18">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Set remove widget view visibility to VISIBLE</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">onFloatingWidgetLongClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-27"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">onTouch</span><span class="crayon-sy">(</span><span class="crayon-i">View</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">MotionEvent </span><span class="crayon-v">event</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-28">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Get Floating widget view params</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">layoutParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-31">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get the touch location coordinates</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">getRawX</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">getRawY</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_Destination</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-37">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">getAction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_DOWN</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">time_start</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-e">currentTimeMillis</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-41">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">handler_longClick</span><span class="crayon-sy">.</span><span class="crayon-e">postDelayed</span><span class="crayon-sy">(</span><span class="crayon-v">runnable_longClick</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">600</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-43">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_img_width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_img_height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-46">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">x_init_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_init_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-49">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//remember the initial position.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">x_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-53">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_UP</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLongClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_width</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">handler_longClick</span><span class="crayon-sy">.</span><span class="crayon-e">removeCallbacks</span><span class="crayon-sy">(</span><span class="crayon-v">runnable_longClick</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-61">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If user drag and drop the floating widget view into remove view then stop the service</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">inBounded</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">stopSelf</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-68">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Get the difference between initial coordinate and current coordinate</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_diff</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">x_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_diff</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">y_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-73">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//The check for x_diff &lt;5 &amp;&amp; y_diff&lt; 5 because sometime elements moves a little while clicking.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//So that is click event.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">x_diff</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">y_diff</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">time_end</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-e">currentTimeMillis</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-78">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Also check the difference between start time and end time should be less than 300ms</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">time_end</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">time_start</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">300</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">onFloatingWidgetClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-82">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-84">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">y_diff</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-86">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">barHeight</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">barHeight</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">barHeight</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-93">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-95">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-97">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//reset position if user drags the floating view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">resetPosition</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-100">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_MOVE</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_diff_move</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">x_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_diff_move</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">y_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-105">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">x_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">x_diff_move</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">y_diff_move</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-108">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If user long click the floating view, update remove view</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">isLongClick</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_left</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_right</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_bound_top</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_height *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-114">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If Floating view comes under Remove View update Window Manager</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_left</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_right</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">y_bound_top</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-118">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_height *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-121">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_height *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-125">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">param_remove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">param_remove</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_remove</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">param_remove</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_remove</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-129">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">param_remove</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-132">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-135">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update the layout with new X &amp; Y coordinate</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If Floating window gets out of the Remove view update Remove view again</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_width</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">onFloatingWidgetClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-146">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-148">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-149">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-152">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update the layout with new X &amp; Y coordinate</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d7a997188624-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d7a997188624-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0458 seconds] -->

Method responsible for updating Remove View Window on Floating widget long click.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d91219641770" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">onFloatingWidgetLongClick</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
    /*  on Floating Widget Long Click, increase the size of remove view as it look like taking focus */
    private void onFloatingWidgetLongClick() {
        //Get remove Floating view params
        WindowManager.LayoutParams removeParams = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();

        //get x and y coordinates of remove view
        int x_cord = (szWindow.x - removeFloatingWidgetView.getWidth()) / 2;
        int y_cord = szWindow.y - (removeFloatingWidgetView.getHeight() + getStatusBarHeight());


        removeParams.x = x_cord;
        removeParams.y = y_cord;

        //Update Remove view params
        mWindowManager.updateViewLayout(removeFloatingWidgetView, removeParams);
    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d91219641770-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d91219641770-16">16</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;on Floating Widget Long Click, increase the size of remove view as it look like taking focus */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFloatingWidgetLongClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Get remove Floating view params</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">removeParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get x and y coordinates of remove view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-10">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update Remove view params</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d91219641770-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">removeParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d91219641770-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0048 seconds] -->

This method will reset the position when user drag and place the Floating View to another place. This method help to prevent the Floating View not to be placed in centre of the screen. It will always place the Floating View to Left or Right of the screen depending on user dragging.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3d9b920866389" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">resetPosition</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
    /*  Reset position of Floating Widget view on dragging  */
    private void resetPosition(int x_cord_now) {
        if (x_cord_now &lt;= szWindow.x / 2) {
            isLeft = true;
            moveToLeft(x_cord_now);
        } else {
            isLeft = false;
            moveToRight(x_cord_now);
        }

    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3d9b920866389-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d9b920866389-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d9b920866389-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d9b920866389-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d9b920866389-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d9b920866389-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d9b920866389-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d9b920866389-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d9b920866389-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3d9b920866389-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3d9b920866389-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3d9b920866389-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Reset position of Floating Widget view on dragging&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d9b920866389-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">resetPosition</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_now</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d9b920866389-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">x_cord_now</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d9b920866389-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLeft</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d9b920866389-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">moveToLeft</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord_now</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d9b920866389-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d9b920866389-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLeft</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d9b920866389-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">moveToRight</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord_now</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3d9b920866389-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3d9b920866389-10">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3d9b920866389-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0028 seconds] -->

This method will move the Floating View to Left of the Screen when user drags.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3da3390113889" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">moveToLeft</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
/*  Method to move the Floating widget view to Left  */
    private void moveToLeft(final int current_x_cord) {
        final int x = szWindow.x - current_x_cord;

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = 0 - (int) (current_x_cord * current_x_cord * step);

                //If you want bounce effect uncomment below line and comment above line
                // mParams.x = 0 - (int) (double) bounceValue(step, x);


                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = 0;

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3da3390113889-28">28</div><div class="crayon-num" data-line="crayon-5a4d01fbb3da3390113889-29">29</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-1"><span class="crayon-c">/*&nbsp;&nbsp;Method to move the Floating widget view to Left&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">moveToLeft</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">current_x_cord</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">current_x_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-4">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CountDownTimer</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get params of Floating Widget view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">mParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-8">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onTick</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If you want bounce effect uncomment below line and comment above line</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// mParams.x = 0 - (int) (double) bounceValue(step, x);</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-16">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFinish</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-24">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3da3390113889-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3da3390113889-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0073 seconds] -->

This method will move the Floating View to Right of the Screen when user drags.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3dac944258994" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">moveToRight</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
    /*  Method to move the Floating widget view to Right  */
    private void moveToRight(final int current_x_cord) {

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = (int) (szWindow.x + (current_x_cord * current_x_cord * step) - mFloatingWidgetView.getWidth());

                //If you want bounce effect uncomment below line and comment above line
                //  mParams.x = szWindow.x + (int) (double) bounceValue(step, x_cord_now) - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = szWindow.x - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dac944258994-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dac944258994-27">27</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Method to move the Floating widget view to Right&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">moveToRight</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">current_x_cord</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CountDownTimer</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get params of Floating Widget view</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">mParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onTick</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-10">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-12">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If you want bounce effect uncomment below line and comment above line</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//&nbsp;&nbsp;mParams.x = szWindow.x + (int) (double) bounceValue(step, x_cord_now) - mFloatingWidgetView.getWidth();</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFinish</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-22">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dac944258994-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dac944258994-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0074 seconds] -->

This method will return the status bar height according to device display metrics.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3db6100766444" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">getStatusBarHeight</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
  /*  return status bar height on basis of device display metrics  */
    private int getStatusBarHeight() {
        return (int) Math.ceil(25 * getApplicationContext().getResources().getDisplayMetrics().density);
    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3db6100766444-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3db6100766444-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3db6100766444-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3db6100766444-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3db6100766444-1"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;return status bar height on basis of device display metrics&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3db6100766444-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3db6100766444-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">ceil</span><span class="crayon-sy">(</span><span class="crayon-cn">25</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">getApplicationContext</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getResources</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getDisplayMetrics</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">density</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3db6100766444-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->

When user click the Floating Widget the below method will trigger and display the Expanded View.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3dbd246222528" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">onFloatingWidgetClick</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
/*  on Floating widget click show expanded view  */
    private void onFloatingWidgetClick() {
        if (isViewCollapsed()) {
            //When user clicks on the image view of the collapsed layout,
            //visibility of the collapsed layout will be changed to "View.GONE"
            //and expanded view will become visible.
            collapsedView.setVisibility(View.GONE);
            expandedView.setVisibility(View.VISIBLE);

        }
    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3dbd246222528-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dbd246222528-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dbd246222528-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dbd246222528-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dbd246222528-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dbd246222528-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dbd246222528-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dbd246222528-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dbd246222528-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dbd246222528-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dbd246222528-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3dbd246222528-1"><span class="crayon-c">/*&nbsp;&nbsp;on Floating widget click show expanded view&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dbd246222528-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFloatingWidgetClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dbd246222528-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">isViewCollapsed</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dbd246222528-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//When user clicks on the image view of the collapsed layout,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dbd246222528-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//visibility of the collapsed layout will be changed to "View.GONE"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dbd246222528-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//and expanded view will become visible.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dbd246222528-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">collapsedView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dbd246222528-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">expandedView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dbd246222528-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dbd246222528-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dbd246222528-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0023 seconds] -->

Method to check if Collapse View is visible or not.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3dc5515920720" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">isViewCollapsed</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
  /*  Detect if the floating view is collapsed or expanded */
    private boolean isViewCollapsed() {
        return mFloatingWidgetView == null || mFloatingWidgetView.findViewById(R.id.collapse_view).getVisibility() == View.VISIBLE;
    }</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3dc5515920720-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dc5515920720-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dc5515920720-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dc5515920720-4">4</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3dc5515920720-1"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Detect if the floating view is collapsed or expanded */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dc5515920720-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">isViewCollapsed</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dc5515920720-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">collapse_view</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getVisibility</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dc5515920720-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0019 seconds] -->

Also, implement click listener to close the chat head by stopping the service when the user clicks on the close icon at the top-right of the chat head.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3dcd834544367" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">stopService</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
 //close the service and remove the from from the window
stopSelf();</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3dcd834544367-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dcd834544367-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3dcd834544367-1"><span class="crayon-h"> </span><span class="crayon-c">//close the service and remove the from from the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dcd834544367-2"><span class="crayon-e">stopSelf</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->

<b>9</b>. Finally the <em>FloatingWidgetService.java</em> will look like below. There are some extra click events as well to close the expanded view and open the activity from expanded view.<br />
<!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3dd5775458620" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">FloatingWidgetService.java</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
package com.floatingwidgetchathead_demo;

import android.app.Service;
import android.content.Intent;
import android.content.res.Configuration;
import android.graphics.PixelFormat;
import android.graphics.Point;
import android.os.Build;
import android.os.CountDownTimer;
import android.os.Handler;
import android.os.IBinder;
import android.support.annotation.Nullable;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.WindowManager;
import android.widget.ImageView;

/**
 * Created by sonu on 28/03/17.
 */

public class FloatingWidgetService extends Service implements View.OnClickListener {
    private WindowManager mWindowManager;
    private View mFloatingWidgetView, collapsedView, expandedView;
    private ImageView remove_image_view;
    private Point szWindow = new Point();
    private View removeFloatingWidgetView;

    private int x_init_cord, y_init_cord, x_init_margin, y_init_margin;

    //Variable to check if the Floating widget view is on left side or in right side
    // initially we are displaying Floating widget view to Left side so set it to true
    private boolean isLeft = true;

    public FloatingWidgetService() {
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        //init WindowManager
        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

        getWindowManagerDefaultDisplay();

        //Init LayoutInflater
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

        addRemoveView(inflater);
        addFloatingWidgetView(inflater);
        implementClickListeners();
        implementTouchListenerToFloatingWidgetView();
    }


    /*  Add Remove View to Window Manager  */
    private View addRemoveView(LayoutInflater inflater) {
        //Inflate the removing view layout we created
        removeFloatingWidgetView = inflater.inflate(R.layout.remove_floating_widget_layout, null);

        //Add the view to the window.
        WindowManager.LayoutParams paramRemove = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        paramRemove.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially the Removing widget view is not visible, so set visibility to GONE
        removeFloatingWidgetView.setVisibility(View.GONE);
        remove_image_view = (ImageView) removeFloatingWidgetView.findViewById(R.id.remove_img);

        //Add the view to the window
        mWindowManager.addView(removeFloatingWidgetView, paramRemove);
        return remove_image_view;
    }

    /*  Add Floating Widget View to Window Manager  */
    private void addFloatingWidgetView(LayoutInflater inflater) {
        //Inflate the floating view layout we created
        mFloatingWidgetView = inflater.inflate(R.layout.floating_widget_layout, null);

        //Add the view to the window.
        final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
                PixelFormat.TRANSLUCENT);

        //Specify the view position
        params.gravity = Gravity.TOP | Gravity.LEFT;

        //Initially view will be added to top-left corner, you change x-y coordinates according to your need
        params.x = 0;
        params.y = 100;

        //Add the view to the window
        mWindowManager.addView(mFloatingWidgetView, params);

        //find id of collapsed view layout
        collapsedView = mFloatingWidgetView.findViewById(R.id.collapse_view);

        //find id of the expanded view layout
        expandedView = mFloatingWidgetView.findViewById(R.id.expanded_container);
    }

    private void getWindowManagerDefaultDisplay() {
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB_MR2)
            mWindowManager.getDefaultDisplay().getSize(szWindow);
        else {
            int w = mWindowManager.getDefaultDisplay().getWidth();
            int h = mWindowManager.getDefaultDisplay().getHeight();
            szWindow.set(w, h);
        }
    }

    /*  Implement Touch Listener to Floating Widget Root View  */
    private void implementTouchListenerToFloatingWidgetView() {
        //Drag and move floating view using user's touch action.
        mFloatingWidgetView.findViewById(R.id.root_container).setOnTouchListener(new View.OnTouchListener() {

            long time_start = 0, time_end = 0;

            boolean isLongClick = false;//variable to judge if user click long press
            boolean inBounded = false;//variable to judge if floating view is bounded to remove view
            int remove_img_width = 0, remove_img_height = 0;

            Handler handler_longClick = new Handler();
            Runnable runnable_longClick = new Runnable() {
                @Override
                public void run() {
                    //On Floating Widget Long Click

                    //Set isLongClick as true
                    isLongClick = true;

                    //Set remove widget view visibility to VISIBLE
                    removeFloatingWidgetView.setVisibility(View.VISIBLE);

                    onFloatingWidgetLongClick();
                }
            };

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                //Get Floating widget view params
                WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

                //get the touch location coordinates
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();

                int x_cord_Destination, y_cord_Destination;

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        time_start = System.currentTimeMillis();

                        handler_longClick.postDelayed(runnable_longClick, 600);

                        remove_img_width = remove_image_view.getLayoutParams().width;
                        remove_img_height = remove_image_view.getLayoutParams().height;

                        x_init_cord = x_cord;
                        y_init_cord = y_cord;

                        //remember the initial position.
                        x_init_margin = layoutParams.x;
                        y_init_margin = layoutParams.y;

                        return true;
                    case MotionEvent.ACTION_UP:
                        isLongClick = false;
                        removeFloatingWidgetView.setVisibility(View.GONE);
                        remove_image_view.getLayoutParams().height = remove_img_height;
                        remove_image_view.getLayoutParams().width = remove_img_width;
                        handler_longClick.removeCallbacks(runnable_longClick);

                        //If user drag and drop the floating widget view into remove view then stop the service
                        if (inBounded) {
                            stopSelf();
                            inBounded = false;
                            break;
                        }


                        //Get the difference between initial coordinate and current coordinate
                        int x_diff = x_cord - x_init_cord;
                        int y_diff = y_cord - y_init_cord;

                        //The check for x_diff &lt;5 &amp;&amp; y_diff&lt; 5 because sometime elements moves a little while clicking.
                        //So that is click event.
                        if (Math.abs(x_diff) &lt; 5 &amp;&amp; Math.abs(y_diff) &lt; 5) {
                            time_end = System.currentTimeMillis();

                            //Also check the difference between start time and end time should be less than 300ms
                            if ((time_end - time_start) &lt; 300)
                                onFloatingWidgetClick();

                        }

                        y_cord_Destination = y_init_margin + y_diff;

                        int barHeight = getStatusBarHeight();
                        if (y_cord_Destination &lt; 0) {
                            y_cord_Destination = 0;
                        } else if (y_cord_Destination + (mFloatingWidgetView.getHeight() + barHeight) &gt; szWindow.y) {
                            y_cord_Destination = szWindow.y - (mFloatingWidgetView.getHeight() + barHeight);
                        }

                        layoutParams.y = y_cord_Destination;

                        inBounded = false;

                        //reset position if user drags the floating view
                        resetPosition(x_cord);

                        return true;
                    case MotionEvent.ACTION_MOVE:
                        int x_diff_move = x_cord - x_init_cord;
                        int y_diff_move = y_cord - y_init_cord;

                        x_cord_Destination = x_init_margin + x_diff_move;
                        y_cord_Destination = y_init_margin + y_diff_move;

                        //If user long click the floating view, update remove view
                        if (isLongClick) {
                            int x_bound_left = szWindow.x / 2 - (int) (remove_img_width * 1.5);
                            int x_bound_right = szWindow.x / 2 + (int) (remove_img_width * 1.5);
                            int y_bound_top = szWindow.y - (int) (remove_img_height * 1.5);

                            //If Floating view comes under Remove View update Window Manager
                            if ((x_cord &gt;= x_bound_left &amp;&amp; x_cord &lt;= x_bound_right) &amp;&amp; y_cord &gt;= y_bound_top) {
                                inBounded = true;

                                int x_cord_remove = (int) ((szWindow.x - (remove_img_height * 1.5)) / 2);
                                int y_cord_remove = (int) (szWindow.y - ((remove_img_width * 1.5) + getStatusBarHeight()));

                                if (remove_image_view.getLayoutParams().height == remove_img_height) {
                                    remove_image_view.getLayoutParams().height = (int) (remove_img_height * 1.5);
                                    remove_image_view.getLayoutParams().width = (int) (remove_img_width * 1.5);

                                    WindowManager.LayoutParams param_remove = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();
                                    param_remove.x = x_cord_remove;
                                    param_remove.y = y_cord_remove;

                                    mWindowManager.updateViewLayout(removeFloatingWidgetView, param_remove);
                                }

                                layoutParams.x = x_cord_remove + (Math.abs(removeFloatingWidgetView.getWidth() - mFloatingWidgetView.getWidth())) / 2;
                                layoutParams.y = y_cord_remove + (Math.abs(removeFloatingWidgetView.getHeight() - mFloatingWidgetView.getHeight())) / 2;

                                //Update the layout with new X &amp; Y coordinate
                                mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                                break;
                            } else {
                                //If Floating window gets out of the Remove view update Remove view again
                                inBounded = false;
                                remove_image_view.getLayoutParams().height = remove_img_height;
                                remove_image_view.getLayoutParams().width = remove_img_width;
                                onFloatingWidgetClick();
                            }

                        }


                        layoutParams.x = x_cord_Destination;
                        layoutParams.y = y_cord_Destination;

                        //Update the layout with new X &amp; Y coordinate
                        mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
                        return true;
                }
                return false;
            }
        });
    }

    private void implementClickListeners() {
        mFloatingWidgetView.findViewById(R.id.close_floating_view).setOnClickListener(this);
        mFloatingWidgetView.findViewById(R.id.close_expanded_view).setOnClickListener(this);
        mFloatingWidgetView.findViewById(R.id.open_activity_button).setOnClickListener(this);
    }


    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.close_floating_view:
                //close the service and remove the from from the window
                stopSelf();
                break;
            case R.id.close_expanded_view:
                collapsedView.setVisibility(View.VISIBLE);
                expandedView.setVisibility(View.GONE);
                break;
            case R.id.open_activity_button:
                //open the activity and stop service
                Intent intent = new Intent(FloatingWidgetService.this, MainActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent);

                //close the service and remove view from the view hierarchy
                stopSelf();
                break;
        }
    }

    /*  on Floating Widget Long Click, increase the size of remove view as it look like taking focus */
    private void onFloatingWidgetLongClick() {
        //Get remove Floating view params
        WindowManager.LayoutParams removeParams = (WindowManager.LayoutParams) removeFloatingWidgetView.getLayoutParams();

        //get x and y coordinates of remove view
        int x_cord = (szWindow.x - removeFloatingWidgetView.getWidth()) / 2;
        int y_cord = szWindow.y - (removeFloatingWidgetView.getHeight() + getStatusBarHeight());


        removeParams.x = x_cord;
        removeParams.y = y_cord;

        //Update Remove view params
        mWindowManager.updateViewLayout(removeFloatingWidgetView, removeParams);
    }

    /*  Reset position of Floating Widget view on dragging  */
    private void resetPosition(int x_cord_now) {
        if (x_cord_now &lt;= szWindow.x / 2) {
            isLeft = true;
            moveToLeft(x_cord_now);
        } else {
            isLeft = false;
            moveToRight(x_cord_now);
        }

    }


    /*  Method to move the Floating widget view to Left  */
    private void moveToLeft(final int current_x_cord) {
        final int x = szWindow.x - current_x_cord;

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = 0 - (int) (current_x_cord * current_x_cord * step);

                //If you want bounce effect uncomment below line and comment above line
                // mParams.x = 0 - (int) (double) bounceValue(step, x);


                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = 0;

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }

    /*  Method to move the Floating widget view to Right  */
    private void moveToRight(final int current_x_cord) {

        new CountDownTimer(500, 5) {
            //get params of Floating Widget view
            WindowManager.LayoutParams mParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

            public void onTick(long t) {
                long step = (500 - t) / 5;

                mParams.x = (int) (szWindow.x + (current_x_cord * current_x_cord * step) - mFloatingWidgetView.getWidth());

                //If you want bounce effect uncomment below line and comment above line
                //  mParams.x = szWindow.x + (int) (double) bounceValue(step, x_cord_now) - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }

            public void onFinish() {
                mParams.x = szWindow.x - mFloatingWidgetView.getWidth();

                //Update window manager for Floating Widget
                mWindowManager.updateViewLayout(mFloatingWidgetView, mParams);
            }
        }.start();
    }

    /*  Get Bounce value if you want to make bounce effect to your Floating Widget */
    private double bounceValue(long step, long scale) {
        double value = scale * java.lang.Math.exp(-0.055 * step) * java.lang.Math.cos(0.08 * step);
        return value;
    }


    /*  Detect if the floating view is collapsed or expanded */
    private boolean isViewCollapsed() {
        return mFloatingWidgetView == null || mFloatingWidgetView.findViewById(R.id.collapse_view).getVisibility() == View.VISIBLE;
    }


    /*  return status bar height on basis of device display metrics  */
    private int getStatusBarHeight() {
        return (int) Math.ceil(25 * getApplicationContext().getResources().getDisplayMetrics().density);
    }


    /*  Update Floating Widget view coordinates on Configuration change  */
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        getWindowManagerDefaultDisplay();

        WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mFloatingWidgetView.getLayoutParams();

        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {


            if (layoutParams.y + (mFloatingWidgetView.getHeight() + getStatusBarHeight()) &gt; szWindow.y) {
                layoutParams.y = szWindow.y - (mFloatingWidgetView.getHeight() + getStatusBarHeight());
                mWindowManager.updateViewLayout(mFloatingWidgetView, layoutParams);
            }

            if (layoutParams.x != 0 &amp;&amp; layoutParams.x &lt; szWindow.x) {
                resetPosition(szWindow.x);
            }

        } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {

            if (layoutParams.x &gt; szWindow.x) {
                resetPosition(szWindow.x);
            }

        }

    }

    /*  on Floating widget click show expanded view  */
    private void onFloatingWidgetClick() {
        if (isViewCollapsed()) {
            //When user clicks on the image view of the collapsed layout,
            //visibility of the collapsed layout will be changed to "View.GONE"
            //and expanded view will become visible.
            collapsedView.setVisibility(View.GONE);
            expandedView.setVisibility(View.VISIBLE);

        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        /*  on destroy remove both view from window manager */

        if (mFloatingWidgetView != null)
            mWindowManager.removeView(mFloatingWidgetView);

        if (removeFloatingWidgetView != null)
            mWindowManager.removeView(removeFloatingWidgetView);

    }


}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-28">28</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-30">30</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-32">32</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-34">34</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-36">36</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-38">38</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-40">40</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-42">42</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-44">44</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-46">46</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-48">48</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-50">50</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-52">52</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-54">54</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-56">56</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-58">58</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-60">60</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-62">62</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-64">64</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-66">66</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-68">68</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-70">70</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-72">72</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-74">74</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-76">76</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-78">78</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-80">80</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-82">82</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-84">84</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-86">86</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-88">88</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-90">90</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-92">92</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-94">94</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-96">96</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-98">98</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-100">100</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-102">102</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-104">104</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-106">106</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-108">108</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-110">110</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-112">112</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-114">114</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-116">116</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-118">118</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-120">120</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-122">122</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-124">124</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-126">126</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-128">128</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-130">130</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-132">132</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-134">134</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-136">136</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-138">138</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-140">140</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-142">142</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-144">144</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-146">146</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-148">148</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-150">150</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-152">152</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-154">154</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-156">156</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-158">158</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-160">160</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-162">162</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-164">164</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-166">166</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-168">168</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-170">170</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-172">172</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-174">174</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-176">176</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-178">178</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-180">180</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-181">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-182">182</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-183">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-184">184</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-185">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-186">186</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-187">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-188">188</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-189">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-190">190</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-191">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-192">192</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-193">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-194">194</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-195">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-196">196</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-197">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-198">198</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-199">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-200">200</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-201">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-202">202</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-203">203</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-204">204</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-205">205</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-206">206</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-207">207</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-208">208</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-209">209</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-210">210</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-211">211</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-212">212</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-213">213</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-214">214</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-215">215</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-216">216</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-217">217</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-218">218</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-219">219</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-220">220</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-221">221</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-222">222</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-223">223</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-224">224</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-225">225</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-226">226</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-227">227</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-228">228</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-229">229</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-230">230</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-231">231</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-232">232</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-233">233</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-234">234</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-235">235</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-236">236</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-237">237</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-238">238</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-239">239</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-240">240</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-241">241</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-242">242</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-243">243</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-244">244</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-245">245</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-246">246</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-247">247</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-248">248</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-249">249</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-250">250</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-251">251</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-252">252</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-253">253</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-254">254</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-255">255</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-256">256</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-257">257</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-258">258</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-259">259</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-260">260</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-261">261</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-262">262</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-263">263</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-264">264</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-265">265</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-266">266</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-267">267</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-268">268</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-269">269</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-270">270</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-271">271</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-272">272</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-273">273</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-274">274</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-275">275</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-276">276</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-277">277</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-278">278</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-279">279</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-280">280</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-281">281</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-282">282</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-283">283</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-284">284</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-285">285</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-286">286</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-287">287</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-288">288</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-289">289</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-290">290</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-291">291</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-292">292</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-293">293</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-294">294</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-295">295</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-296">296</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-297">297</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-298">298</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-299">299</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-300">300</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-301">301</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-302">302</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-303">303</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-304">304</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-305">305</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-306">306</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-307">307</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-308">308</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-309">309</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-310">310</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-311">311</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-312">312</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-313">313</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-314">314</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-315">315</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-316">316</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-317">317</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-318">318</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-319">319</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-320">320</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-321">321</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-322">322</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-323">323</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-324">324</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-325">325</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-326">326</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-327">327</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-328">328</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-329">329</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-330">330</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-331">331</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-332">332</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-333">333</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-334">334</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-335">335</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-336">336</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-337">337</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-338">338</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-339">339</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-340">340</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-341">341</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-342">342</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-343">343</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-344">344</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-345">345</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-346">346</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-347">347</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-348">348</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-349">349</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-350">350</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-351">351</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-352">352</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-353">353</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-354">354</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-355">355</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-356">356</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-357">357</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-358">358</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-359">359</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-360">360</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-361">361</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-362">362</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-363">363</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-364">364</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-365">365</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-366">366</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-367">367</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-368">368</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-369">369</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-370">370</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-371">371</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-372">372</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-373">373</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-374">374</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-375">375</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-376">376</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-377">377</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-378">378</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-379">379</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-380">380</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-381">381</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-382">382</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-383">383</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-384">384</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-385">385</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-386">386</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-387">387</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-388">388</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-389">389</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-390">390</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-391">391</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-392">392</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-393">393</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-394">394</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-395">395</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-396">396</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-397">397</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-398">398</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-399">399</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-400">400</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-401">401</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-402">402</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-403">403</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-404">404</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-405">405</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-406">406</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-407">407</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-408">408</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-409">409</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-410">410</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-411">411</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-412">412</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-413">413</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-414">414</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-415">415</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-416">416</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-417">417</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-418">418</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-419">419</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-420">420</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-421">421</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-422">422</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-423">423</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-424">424</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-425">425</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-426">426</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-427">427</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-428">428</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-429">429</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-430">430</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-431">431</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-432">432</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-433">433</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-434">434</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-435">435</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-436">436</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-437">437</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-438">438</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-439">439</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-440">440</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-441">441</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-442">442</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-443">443</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-444">444</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-445">445</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-446">446</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-447">447</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-448">448</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-449">449</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-450">450</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-451">451</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-452">452</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-453">453</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-454">454</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-455">455</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-456">456</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-457">457</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-458">458</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-459">459</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-460">460</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-461">461</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-462">462</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-463">463</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-464">464</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-465">465</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-466">466</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-467">467</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-468">468</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-469">469</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-470">470</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-471">471</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-472">472</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-473">473</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-474">474</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-475">475</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-476">476</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-477">477</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-478">478</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-479">479</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-480">480</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-481">481</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-482">482</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-483">483</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-484">484</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-485">485</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-486">486</div><div class="crayon-num" data-line="crayon-5a4d01fbb3dd5775458620-487">487</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3dd5775458620-488">488</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-1"><span class="crayon-t">package</span><span class="crayon-h"> </span><span class="crayon-v">com</span><span class="crayon-sy">.</span><span class="crayon-v">floatingwidgetchathead_demo</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-2">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-3"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">Service</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-4"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">content</span><span class="crayon-sy">.</span><span class="crayon-v">Intent</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-5"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">content</span><span class="crayon-sy">.</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-v">Configuration</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-6"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">graphics</span><span class="crayon-sy">.</span><span class="crayon-v">PixelFormat</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-7"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">graphics</span><span class="crayon-sy">.</span><span class="crayon-v">Point</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-8"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">Build</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-9"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">CountDownTimer</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-10"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">Handler</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-11"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">IBinder</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-12"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">support</span><span class="crayon-sy">.</span><span class="crayon-v">annotation</span><span class="crayon-sy">.</span><span class="crayon-v">Nullable</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-13"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-v">Gravity</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-14"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutInflater</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-15"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-16"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-v">View</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-17"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-18"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">widget</span><span class="crayon-sy">.</span><span class="crayon-v">ImageView</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-20"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-21"><span class="crayon-c"> * Created by sonu on 28/03/17.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-22"><span class="crayon-c"> */</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-24"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">FloatingWidgetService </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">Service </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-i">OnClickListener</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">WindowManager </span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">collapsedView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">expandedView</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">ImageView </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">Point </span><span class="crayon-v">szWindow</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Point</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-30">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_init_cord</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y_init_cord</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">x_init_margin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y_init_margin</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-32">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Variable to check if the Floating widget view is on left side or in right side</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// initially we are displaying Floating widget view to Left side so set it to true</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-v">isLeft</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-36">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">FloatingWidgetService</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-i">Nullable</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-42"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-e">IBinder </span><span class="crayon-e">onBind</span><span class="crayon-sy">(</span><span class="crayon-e">Intent </span><span class="crayon-v">intent</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-45">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-47"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-49">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//init WindowManager</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">getSystemService</span><span class="crayon-sy">(</span><span class="crayon-v">WINDOW_SERVICE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-52">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">getWindowManagerDefaultDisplay</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-54">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Init LayoutInflater</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">LayoutInflater</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">getSystemService</span><span class="crayon-sy">(</span><span class="crayon-v">LAYOUT_INFLATER_SERVICE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-57">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">addRemoveView</span><span class="crayon-sy">(</span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">addFloatingWidgetView</span><span class="crayon-sy">(</span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">implementClickListeners</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">implementTouchListenerToFloatingWidgetView</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-63">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-64">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Add Remove View to Window Manager&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">View </span><span class="crayon-e">addRemoveView</span><span class="crayon-sy">(</span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Inflate the removing view layout we created</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inflater</span><span class="crayon-sy">.</span><span class="crayon-e">inflate</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">remove_floating_widget_layout</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">paramRemove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_PHONE</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_NOT_FOCUSABLE</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_WATCH_OUTSIDE_TOUCH</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_LAYOUT_NO_LIMITS</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">PixelFormat</span><span class="crayon-sy">.</span><span class="crayon-v">TRANSLUCENT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-77">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Specify the view position</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">paramRemove</span><span class="crayon-sy">.</span><span class="crayon-v">gravity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">TOP</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">LEFT</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-80">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Initially the Removing widget view is not visible, so set visibility to GONE</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">ImageView</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">remove_img</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-84">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">addView</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">paramRemove</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-89">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Add Floating Widget View to Window Manager&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">addFloatingWidgetView</span><span class="crayon-sy">(</span><span class="crayon-e">LayoutInflater </span><span class="crayon-v">inflater</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Inflate the floating view layout we created</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">inflater</span><span class="crayon-sy">.</span><span class="crayon-e">inflate</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">floating_widget_layout</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-94">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">params</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">WRAP_CONTENT</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">TYPE_PHONE</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_NOT_FOCUSABLE</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">PixelFormat</span><span class="crayon-sy">.</span><span class="crayon-v">TRANSLUCENT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-102">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Specify the view position</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">gravity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">TOP</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">Gravity</span><span class="crayon-sy">.</span><span class="crayon-v">LEFT</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-105">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Initially view will be added to top-left corner, you change x-y coordinates according to your need</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-109">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Add the view to the window</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">addView</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-112">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//find id of collapsed view layout</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">collapsedView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">collapse_view</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-115">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//find id of the expanded view layout</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">expandedView</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">expanded_container</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-119">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">getWindowManagerDefaultDisplay</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Build</span><span class="crayon-sy">.</span><span class="crayon-v">VERSION</span><span class="crayon-sy">.</span><span class="crayon-v">SDK_INT</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">Build</span><span class="crayon-sy">.</span><span class="crayon-v">VERSION_CODES</span><span class="crayon-sy">.</span><span class="crayon-v">HONEYCOMB_MR2</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">getDefaultDisplay</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getSize</span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">w</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">getDefaultDisplay</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">h</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">getDefaultDisplay</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-e">set</span><span class="crayon-sy">(</span><span class="crayon-v">w</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">h</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-129">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Implement Touch Listener to Floating Widget Root View&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">implementTouchListenerToFloatingWidgetView</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Drag and move floating view using user's touch action.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">root_container</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">setOnTouchListener</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-e">OnTouchListener</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-134">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">time_start</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">time_end</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-136">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-v">isLongClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span><span class="crayon-c">//variable to judge if user click long press</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span><span class="crayon-c">//variable to judge if floating view is bounded to remove view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-140">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Handler </span><span class="crayon-v">handler_longClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Handler</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Runnable </span><span class="crayon-v">runnable_longClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Runnable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-144"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//On Floating Widget Long Click</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-146">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Set isLongClick as true</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLongClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-149">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Set remove widget view visibility to VISIBLE</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-152">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">onFloatingWidgetLongClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-156">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-158"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">onTouch</span><span class="crayon-sy">(</span><span class="crayon-i">View</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">MotionEvent </span><span class="crayon-v">event</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-159">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Get Floating widget view params</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">layoutParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-162">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get the touch location coordinates</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">getRawX</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-165"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">getRawY</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-166">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_Destination</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-168">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">event</span><span class="crayon-sy">.</span><span class="crayon-e">getAction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_DOWN</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">time_start</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-e">currentTimeMillis</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-172">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">handler_longClick</span><span class="crayon-sy">.</span><span class="crayon-e">postDelayed</span><span class="crayon-sy">(</span><span class="crayon-v">runnable_longClick</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">600</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-174">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-175"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_img_width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-176"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_img_height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-177">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-178"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">x_init_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-179"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_init_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-180">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-181"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//remember the initial position.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-182"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">x_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-183"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-184">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-185"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-186"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_UP</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-187"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLongClick</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-188"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-189"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-190"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_width</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-191"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">handler_longClick</span><span class="crayon-sy">.</span><span class="crayon-e">removeCallbacks</span><span class="crayon-sy">(</span><span class="crayon-v">runnable_longClick</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-192">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-193"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If user drag and drop the floating widget view into remove view then stop the service</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-194"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">inBounded</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-195"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">stopSelf</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-196"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-197"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-198"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-199">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-200">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-201"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Get the difference between initial coordinate and current coordinate</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-202"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_diff</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">x_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-203"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_diff</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">y_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-204">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-205"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//The check for x_diff &lt;5 &amp;&amp; y_diff&lt; 5 because sometime elements moves a little while clicking.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-206"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//So that is click event.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-207"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">x_diff</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">y_diff</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-208"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">time_end</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">System</span><span class="crayon-sy">.</span><span class="crayon-e">currentTimeMillis</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-209">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-210"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Also check the difference between start time and end time should be less than 300ms</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-211"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">time_end</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">time_start</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">300</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-212"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">onFloatingWidgetClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-213">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-214"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-215">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-216"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">y_diff</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-217">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-218"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">barHeight</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-219"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-220"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-221"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">barHeight</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-222"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">barHeight</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-223"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-224">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-225"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-226">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-227"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-228">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-229"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//reset position if user drags the floating view</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-230"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">resetPosition</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-231">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-232"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-233"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">MotionEvent</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_MOVE</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-234"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_diff_move</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">x_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-235"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_diff_move</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">y_init_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-236">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-237"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">x_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">x_diff_move</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-238"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">y_cord_Destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_init_margin</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">y_diff_move</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-239">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-240"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If user long click the floating view, update remove view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-241"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">isLongClick</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-242"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_left</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-243"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_right</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-244"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_bound_top</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_height *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-245">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-246"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If Floating view comes under Remove View update Window Manager</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-247"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_left</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-v">x_bound_right</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">y_bound_top</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-248"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-249">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-250"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_height *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-251"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-252">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-253"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-254"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_height *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-255"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">remove_img_width *</span><span class="crayon-h"> </span><span class="crayon-cn">1.5</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-256">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-257"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">param_remove</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-258"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">param_remove</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_remove</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-259"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">param_remove</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_remove</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-260">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-261"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">param_remove</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-262"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-263">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-264"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-265"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_remove</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">abs</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-266">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-267"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update the layout with new X &amp; Y coordinate</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-268"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-269"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-270"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-271"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If Floating window gets out of the Remove view update Remove view again</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-272"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">inBounded</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-273"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_height</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-274"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">remove_image_view</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">width</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">remove_img_width</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-275"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">onFloatingWidgetClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-276"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-277">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-278"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-279">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-280">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-281"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-282"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord_Destination</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-283">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-284"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update the layout with new X &amp; Y coordinate</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-285"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-286"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-287"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-288"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-289"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-290"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-291"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-292">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-293"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">implementClickListeners</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-294"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">close_floating_view</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">setOnClickListener</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-295"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">close_expanded_view</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">setOnClickListener</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-296"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">open_activity_button</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">setOnClickListener</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-297"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-298">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-299">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-300"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-301"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onClick</span><span class="crayon-sy">(</span><span class="crayon-i">View</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-302"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">.</span><span class="crayon-e">getId</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-303"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">close_floating_view</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-304"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//close the service and remove the from from the window</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-305"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">stopSelf</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-306"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-307"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">close_expanded_view</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-308"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">collapsedView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-309"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">expandedView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-310"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-311"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">case</span><span class="crayon-h"> </span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">open_activity_button</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-312"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//open the activity and stop service</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-313"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Intent </span><span class="crayon-v">intent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Intent</span><span class="crayon-sy">(</span><span class="crayon-v">FloatingWidgetService</span><span class="crayon-sy">.</span><span class="crayon-v">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">MainActivity</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-314"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">intent</span><span class="crayon-sy">.</span><span class="crayon-e">addFlags</span><span class="crayon-sy">(</span><span class="crayon-v">Intent</span><span class="crayon-sy">.</span><span class="crayon-v">FLAG_ACTIVITY_NEW_TASK</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-315"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startActivity</span><span class="crayon-sy">(</span><span class="crayon-v">intent</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-316">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-317"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//close the service and remove view from the view hierarchy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-318"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">stopSelf</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-319"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">break</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-320"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-321"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-322">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-323"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;on Floating Widget Long Click, increase the size of remove view as it look like taking focus */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-324"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFloatingWidgetLongClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-325"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Get remove Floating view params</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-326"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">removeParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-327">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-328"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get x and y coordinates of remove view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-329"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-330"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-331">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-332">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-333"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">x_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-334"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">removeParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">y_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-335">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-336"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update Remove view params</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-337"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">removeParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-338"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-339">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-340"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Reset position of Floating Widget view on dragging&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-341"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">resetPosition</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x_cord_now</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-342"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">x_cord_now</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-343"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLeft</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-344"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">moveToLeft</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord_now</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-345"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-346"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">isLeft</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-347"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">moveToRight</span><span class="crayon-sy">(</span><span class="crayon-v">x_cord_now</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-348"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-349">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-350"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-351">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-352">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-353"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Method to move the Floating widget view to Left&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-354"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">moveToLeft</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">current_x_cord</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-355"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">current_x_cord</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-356">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-357"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CountDownTimer</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-358"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get params of Floating Widget view</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-359"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">mParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-360">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-361"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onTick</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-362"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-363">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-364"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-365">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-366"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If you want bounce effect uncomment below line and comment above line</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-367"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// mParams.x = 0 - (int) (double) bounceValue(step, x);</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-368">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-369">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-370"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-371"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-372"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-373">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-374"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFinish</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-375"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-376">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-377"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-378"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-379"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-380"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-381"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-382">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-383"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Method to move the Floating widget view to Right&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-384"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">moveToRight</span><span class="crayon-sy">(</span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">current_x_cord</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-385">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-386"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CountDownTimer</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-387"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//get params of Floating Widget view</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-388"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">mParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-389">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-390"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onTick</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-391"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">t</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-392">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-393"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-e ">current_x_cord *</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-394">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-395"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If you want bounce effect uncomment below line and comment above line</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-396"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//&nbsp;&nbsp;mParams.x = szWindow.x + (int) (double) bounceValue(step, x_cord_now) - mFloatingWidgetView.getWidth();</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-397">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-398"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-399"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-400"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-401">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-402"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFinish</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-403"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getWidth</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-404">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-405"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Update window manager for Floating Widget</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-406"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-407"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-408"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-409"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-410">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-411"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Get Bounce value if you want to make bounce effect to your Floating Widget */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-412"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-e">bounceValue</span><span class="crayon-sy">(</span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">scale</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-413"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">double</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e ">scale *</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">lang</span><span class="crayon-sy">.</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">exp</span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">0.055</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">lang</span><span class="crayon-sy">.</span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">cos</span><span class="crayon-sy">(</span><span class="crayon-cn">0.08</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">step</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-414"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-415"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-416">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-417">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-418"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Detect if the floating view is collapsed or expanded */</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-419"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">isViewCollapsed</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-420"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-h"> </span><span class="crayon-o">||</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">findViewById</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">.</span><span class="crayon-v">collapse_view</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getVisibility</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-421"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-422">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-423">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-424"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;return status bar height on basis of device display metrics&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-425"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-426"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">Math</span><span class="crayon-sy">.</span><span class="crayon-e">ceil</span><span class="crayon-sy">(</span><span class="crayon-cn">25</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">getApplicationContext</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getResources</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getDisplayMetrics</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-v">density</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-427"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-428">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-429">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-430"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Update Floating Widget view coordinates on Configuration change&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-431"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-432"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onConfigurationChanged</span><span class="crayon-sy">(</span><span class="crayon-e">Configuration </span><span class="crayon-v">newConfig</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-433"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onConfigurationChanged</span><span class="crayon-sy">(</span><span class="crayon-v">newConfig</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-434">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-435"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">getWindowManagerDefaultDisplay</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-436">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-437"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">LayoutParams </span><span class="crayon-v">layoutParams</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">WindowManager</span><span class="crayon-sy">.</span><span class="crayon-v">LayoutParams</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getLayoutParams</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-438">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-439"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">newConfig</span><span class="crayon-sy">.</span><span class="crayon-v">orientation</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">Configuration</span><span class="crayon-sy">.</span><span class="crayon-v">ORIENTATION_LANDSCAPE</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-440">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-441">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-442"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-443"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">y</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">.</span><span class="crayon-e">getHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getStatusBarHeight</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-444"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">updateViewLayout</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-445"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-446">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-447"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-448"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">resetPosition</span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-449"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-450">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-451"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">newConfig</span><span class="crayon-sy">.</span><span class="crayon-v">orientation</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">Configuration</span><span class="crayon-sy">.</span><span class="crayon-v">ORIENTATION_PORTRAIT</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-452">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-453"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">layoutParams</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-454"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">resetPosition</span><span class="crayon-sy">(</span><span class="crayon-v">szWindow</span><span class="crayon-sy">.</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-455"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-456">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-457"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-458">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-459"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-460">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-461"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;on Floating widget click show expanded view&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-462"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onFloatingWidgetClick</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-463"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">isViewCollapsed</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-464"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//When user clicks on the image view of the collapsed layout,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-465"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//visibility of the collapsed layout will be changed to "View.GONE"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-466"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//and expanded view will become visible.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-467"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">collapsedView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">GONE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-468"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">expandedView</span><span class="crayon-sy">.</span><span class="crayon-e">setVisibility</span><span class="crayon-sy">(</span><span class="crayon-v">View</span><span class="crayon-sy">.</span><span class="crayon-v">VISIBLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-469">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-470"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-471"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-472">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-473"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-474"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onDestroy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-475"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onDestroy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-476">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-477"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;on destroy remove both view from window manager */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-478">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-479"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-480"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">removeView</span><span class="crayon-sy">(</span><span class="crayon-v">mFloatingWidgetView</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-481">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-482"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-483"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mWindowManager</span><span class="crayon-sy">.</span><span class="crayon-e">removeView</span><span class="crayon-sy">(</span><span class="crayon-v">removeFloatingWidgetView</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-484">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-485"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-486">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3dd5775458620-487">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3dd5775458620-488"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.1197 seconds] -->

<b>10</b>. Now to Handle Overdraw permission for displaying Floating View over other apps, we need to start the<em> FloatingWidgetService.java</em>.</p>
<p>Before that, we need to check if the application has <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission or not? For android version &lt;= API22, this permission is granted by default. But for the android versions running API&gt;22 ,we need to check for the permission run-time. If the permission is not available, we will open permission management screen to allow the user to grant permission using <strong>Settings.ACTION_MANAGE_OVERLAY_PERMISSION</strong> intent action. This will open below screen facilitate user to grant <strong>android.permission.SYSTEM_ALERT_WINDOW</strong> permission.</p>
<div id="attachment_1220" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-1220 size-large" src="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=576%2C1024" alt="Settings screen to grant the Draw Over Other App permission." srcset="https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=576%2C1024 576w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=169%2C300 169w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?resize=768%2C1365 768w, https://i2.wp.com/www.androhub.com/wp-content/uploads/2017/03/over_draw_permission.jpg?w=1080 1080w" sizes="(max-width: 576px) 100vw, 576px" data-recalc-dims="1" /><p class="wp-caption-text">Settings screen to grant the Draw Over Other App permission.</p></div>
<p>Below is code for the <em>MainActivity.java</em> that will display the Floating Widget when button is clicked by checking the <strong>SYSTEM_ALERT_WINDOW</strong> permission.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3e05484163206" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">MainActivity.java</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
package com.floatingwidgetchathead_demo;

import android.content.Intent;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.provider.Settings;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    /*  Permission request code to draw over other apps  */
    private static final int DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE = 1222;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    /*  start floating widget service  */
    public void createFloatingWidget(View view) {
        //Check if the application has draw over other apps permission or not?
        //This permission is by default available for API&lt;23. But for API &gt; 23
        //you have to ask for the permission in runtime.
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !Settings.canDrawOverlays(this)) {
            //If the draw over permission is not available open the settings screen
            //to grant the permission.
            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION,
                    Uri.parse("package:" + getPackageName()));
            startActivityForResult(intent, DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE);
        } else
            //If permission is granted start floating widget service
            startFloatingWidgetService();

    }

    /*  Start Floating widget service and finish current activity */
    private void startFloatingWidgetService() {
        startService(new Intent(MainActivity.this, FloatingWidgetService.class));
        finish();
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE) {
            //Check if the permission is granted or not.
            if (resultCode == RESULT_OK)
                //If permission granted start floating widget service
                startFloatingWidgetService();
            else
                //Permission is not available then display toast
                Toast.makeText(this,
                        getResources().getString(R.string.draw_other_app_permission_denied),
                        Toast.LENGTH_SHORT).show();

        } else {
            super.onActivityResult(requestCode, resultCode, data);
        }
    }
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-6">6</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-8">8</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-10">10</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-12">12</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-14">14</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-16">16</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-18">18</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-20">20</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-22">22</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-24">24</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-26">26</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-28">28</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-30">30</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-32">32</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-34">34</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-36">36</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-38">38</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-40">40</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-42">42</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-44">44</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-46">46</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-48">48</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-50">50</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-52">52</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-54">54</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-56">56</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-58">58</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-60">60</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-62">62</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e05484163206-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e05484163206-64">64</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-1"><span class="crayon-t">package</span><span class="crayon-h"> </span><span class="crayon-v">com</span><span class="crayon-sy">.</span><span class="crayon-v">floatingwidgetchathead_demo</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-2">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-3"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">content</span><span class="crayon-sy">.</span><span class="crayon-v">Intent</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-4"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">Uri</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-5"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">Build</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-6"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">Bundle</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-7"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">provider</span><span class="crayon-sy">.</span><span class="crayon-v">Settings</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-8"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">support</span><span class="crayon-sy">.</span><span class="crayon-v">v7</span><span class="crayon-sy">.</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">AppCompatActivity</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-9"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">view</span><span class="crayon-sy">.</span><span class="crayon-v">View</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-10"><span class="crayon-e">import </span><span class="crayon-v">android</span><span class="crayon-sy">.</span><span class="crayon-v">widget</span><span class="crayon-sy">.</span><span class="crayon-v">Toast</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-12"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">MainActivity</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">AppCompatActivity</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Permission request code to draw over other apps&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1222</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-16">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-17">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-19"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-e">Bundle </span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onCreate</span><span class="crayon-sy">(</span><span class="crayon-v">savedInstanceState</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">setContentView</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-v">layout</span><span class="crayon-sy">.</span><span class="crayon-v">activity_main</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;start floating widget service&nbsp;&nbsp;*/</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">createFloatingWidget</span><span class="crayon-sy">(</span><span class="crayon-e">View </span><span class="crayon-v">view</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Check if the application has draw over other apps permission or not?</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//This permission is by default available for API&lt;23. But for API &gt; 23</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//you have to ask for the permission in runtime.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">Build</span><span class="crayon-sy">.</span><span class="crayon-v">VERSION</span><span class="crayon-sy">.</span><span class="crayon-v">SDK_INT</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">Build</span><span class="crayon-sy">.</span><span class="crayon-v">VERSION_CODES</span><span class="crayon-sy">.</span><span class="crayon-v">M</span><span class="crayon-h"> </span><span class="crayon-o">&amp;&amp;</span><span class="crayon-h"> </span><span class="crayon-o">!</span><span class="crayon-v">Settings</span><span class="crayon-sy">.</span><span class="crayon-e">canDrawOverlays</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If the draw over permission is not available open the settings screen</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//to grant the permission.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Intent </span><span class="crayon-v">intent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Intent</span><span class="crayon-sy">(</span><span class="crayon-v">Settings</span><span class="crayon-sy">.</span><span class="crayon-v">ACTION_MANAGE_OVERLAY_PERMISSION</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Uri</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-s">"package:"</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">getPackageName</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startActivityForResult</span><span class="crayon-sy">(</span><span class="crayon-v">intent</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If permission is granted start floating widget service</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startFloatingWidgetService</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-38">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-40">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*&nbsp;&nbsp;Start Floating widget service and finish current activity */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">startFloatingWidgetService</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startService</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">Intent</span><span class="crayon-sy">(</span><span class="crayon-v">MainActivity</span><span class="crayon-sy">.</span><span class="crayon-v">this</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FloatingWidgetService</span><span class="crayon-sy">.</span><span class="crayon-t">class</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">finish</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-46">&nbsp;</div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">@</span><span class="crayon-e">Override</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-48"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">protected</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">onActivityResult</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">requestCode</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">resultCode</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Intent </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">requestCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">DRAW_OVER_OTHER_APP_PERMISSION_REQUEST_CODE</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Check if the permission is granted or not.</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">resultCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">RESULT_OK</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//If permission granted start floating widget service</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">startFloatingWidgetService</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Permission is not available then display toast</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-e">makeText</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">getResources</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getString</span><span class="crayon-sy">(</span><span class="crayon-v">R</span><span class="crayon-sy">.</span><span class="crayon-t">string</span><span class="crayon-sy">.</span><span class="crayon-v">draw_other_app_permission_denied</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">Toast</span><span class="crayon-sy">.</span><span class="crayon-v">LENGTH_SHORT</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">show</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-59">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">super</span><span class="crayon-sy">.</span><span class="crayon-e">onActivityResult</span><span class="crayon-sy">(</span><span class="crayon-v">requestCode</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resultCode</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e05484163206-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e05484163206-64"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0096 seconds] -->
<p>
<b>11</b>. Finally add the <em>FloatingWidgetService.java</em> in your <em>AndroidManifest.xml</em>.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a4d01fbb3e14233718118" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">AndroidManifest.xml</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
 &lt;!--  Declare FloatingWidget Service over here and set enabled true --&gt;
        &lt;service
            android:name=".FloatingWidgetService"
            android:enabled="true"
            android:exported="false" /&gt;</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a4d01fbb3e14233718118-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e14233718118-2">2</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e14233718118-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a4d01fbb3e14233718118-4">4</div><div class="crayon-num" data-line="crayon-5a4d01fbb3e14233718118-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a4d01fbb3e14233718118-1"><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-o">--</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">Declare</span><span class="crayon-h"> </span><span class="crayon-e">FloatingWidget </span><span class="crayon-e">Service </span><span class="crayon-e">over </span><span class="crayon-e">here </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">set </span><span class="crayon-e">enabled </span><span class="crayon-t">true</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">&gt;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e14233718118-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">service</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e14233718118-3"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">".FloatingWidgetService"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a4d01fbb3e14233718118-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">enabled</span><span class="crayon-o">=</span><span class="crayon-s">"true"</span></div><div class="crayon-line" id="crayon-5a4d01fbb3e14233718118-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">android</span><span class="crayon-o">:</span><span class="crayon-v">exported</span><span class="crayon-o">=</span><span class="crayon-s">"false"</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>
<p class="graf graf--p graf-after--figure"><b>12</b>. Woohooo we are all ready. Now you can also create any kind of Floating Widget for your applications.</p>
<p class="graf graf--p graf-after--figure">Thanks. <img class="wp-smiley" src="https://i2.wp.com/androhub.com/wp-includes/images/smilies/icon_smile.gif?w=602" alt=":)" width="13" height="13" /></p>
<p><strong><a href="http://androhub.com/downloads/FloatingWidgetChatHead_Demo.zip" target="_blank">Download Source Code – &gt;</a></strong></p>
<figure id="9832" class="graf graf--figure graf--iframe graf-after--p">
<div class="aspectRatioPlaceholder is-locked"></div>
</figure>
<p>&nbsp;</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-1211" class="share-twitter sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=twitter" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-1211" class="share-facebook sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=facebook" target="_blank" title="Click to share on Facebook"><span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-1211" class="share-google-plus-1 sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=google-plus-1" target="_blank" title="Click to share on Google+"><span></span><span class="sharing-screen-reader-text">Click to share on Google+ (Opens in new window)</span></a></li><li class="share-jetpack-whatsapp"><a rel="nofollow" data-shared="" class="share-jetpack-whatsapp sd-button share-icon no-text" href="whatsapp://send?text=Android%20Floating%20Widget%20like%20Facebook%20Messenger%20Chat%20Head http%3A%2F%2Fwww.androhub.com%2Fandroid-floating-widget-like-facebook-messenger-chat-head%2F" target="_blank" title="Click to share on WhatsApp"><span></span><span class="sharing-screen-reader-text">Click to share on WhatsApp (Opens in new window)</span></a></li><li class="share-linkedin"><a rel="nofollow" data-shared="sharing-linkedin-1211" class="share-linkedin sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=linkedin" target="_blank" title="Click to share on LinkedIn"><span></span><span class="sharing-screen-reader-text">Click to share on LinkedIn (Opens in new window)</span></a></li><li class="share-email"><a rel="nofollow" data-shared="" class="share-email sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=email" target="_blank" title="Click to email this to a friend"><span></span><span class="sharing-screen-reader-text">Click to email this to a friend (Opens in new window)</span></a></li><li class="share-print"><a rel="nofollow" data-shared="" class="share-print sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/#print" target="_blank" title="Click to print"><span></span><span class="sharing-screen-reader-text">Click to print (Opens in new window)</span></a></li><li class="share-tumblr"><a rel="nofollow" data-shared="" class="share-tumblr sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=tumblr" target="_blank" title="Click to share on Tumblr"><span></span><span class="sharing-screen-reader-text">Click to share on Tumblr (Opens in new window)</span></a></li><li class="share-pinterest"><a rel="nofollow" data-shared="sharing-pinterest-1211" class="share-pinterest sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=pinterest" target="_blank" title="Click to share on Pinterest"><span></span><span class="sharing-screen-reader-text">Click to share on Pinterest (Opens in new window)</span></a></li><li class="share-pocket"><a rel="nofollow" data-shared="" class="share-pocket sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=pocket" target="_blank" title="Click to share on Pocket"><span></span><span class="sharing-screen-reader-text">Click to share on Pocket (Opens in new window)</span></a></li><li class="share-telegram"><a rel="nofollow" data-shared="" class="share-telegram sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=telegram" target="_blank" title="Click to share on Telegram"><span></span><span class="sharing-screen-reader-text">Click to share on Telegram (Opens in new window)</span></a></li><li class="share-skype"><a rel="nofollow" data-shared="sharing-skype-1211" class="share-skype sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=skype" target="_blank" title="Share on Skype"><span></span><span class="sharing-screen-reader-text">Share on Skype (Opens in new window)</span></a></li><li class="share-reddit"><a rel="nofollow" data-shared="" class="share-reddit sd-button share-icon no-text" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?share=reddit" target="_blank" title="Click to share on Reddit"><span></span><span class="sharing-screen-reader-text">Click to share on Reddit (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div>

<div id='jp-relatedposts' class='jp-relatedposts' >
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</div>					</div>
	</div>
</article>

	<section class='about'>
		<h4>About the author</h4>
		<div class='separator'>
			<div></div>
		</div>
		<article class='about-content'>
			<footer>
				<div class='about-helper-absolute'>
					<div class='avatar'>
						<img alt='' src='http://2.gravatar.com/avatar/ebab67fae339761312d475ef8e13e63d?s=61&amp;d=mm&amp;r=g' srcset='http://2.gravatar.com/avatar/ebab67fae339761312d475ef8e13e63d?s=122&amp;d=mm&amp;r=g 2x' class='avatar avatar-61 photo' height='61' width='61' />					</div>
				</div>
			</footer>
			<div class='about-body'>
				<p>I am an Android developer for whom Android is the one and only love. I work as a freelancer which gets me and Android closer. I always love to share my learnings and love to learn from others knowledge too.</p>
			</div>
		</article>
	</section>
					
	
			<section class='comments'>
			<div class='comments-header'>
				<h1></h1>
				<span class='number-of-comments'>COMMENTS (<span>3</span>)</span>
			</div>
			<div class='separator'>
				<div></div>
			</div>
			
				<article class="comment even thread-even depth-1 comment" id="li-comment-400">
		<footer>
			<div class='comment-helper-absolute'>
				<div class='avatar'>
					<img alt='' src='http://2.gravatar.com/avatar/8a5e45564bf61584217aa8077a59c742?s=61&amp;d=mm&amp;r=g' srcset='http://2.gravatar.com/avatar/8a5e45564bf61584217aa8077a59c742?s=122&amp;d=mm&amp;r=g 2x' class='avatar avatar-61 photo' height='61' width='61' />				</div>
				<div class='post-author'>
					By					<span>
						Neeraja					</span>
				</div>
			</div>
			<div class='post-date'>
				<time pubdate datetime="2017-08-30T11:56:44+00:00"><span class="comment-day">August 30, 2017</span><span class="comment-time">at 11:56 am</span></time>
			</div>
			<span class="comment-reply"><a rel='nofollow' class='comment-reply-link' href='http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?replytocom=400#respond' onclick='return addComment.moveForm( "comment-400", "400", "respond", "1211" )' aria-label='Reply to Neeraja'>Reply</a></span>
		</footer>
		<div class='comment-body'>
						<p>How can we make the widget to appear even after removing the app from &#8216;recent apps&#8217;? I want the service to be running until even after closing the app. And, the widget should be active until user manually removes it. How can we achieve this?</p>
		</div>
	</article>
	<ul class="children">
	<article class="comment byuser comment-author-droid bypostauthor odd alt depth-2 comment" id="li-comment-401">
		<footer>
			<div class='comment-helper-absolute'>
				<div class='avatar'>
					<img alt='' src='http://2.gravatar.com/avatar/ebab67fae339761312d475ef8e13e63d?s=61&amp;d=mm&amp;r=g' srcset='http://2.gravatar.com/avatar/ebab67fae339761312d475ef8e13e63d?s=122&amp;d=mm&amp;r=g 2x' class='avatar avatar-61 photo' height='61' width='61' />				</div>
				<div class='post-author'>
					By					<span>
						<a href='http://androhub.com/' rel='external nofollow' class='url'>Dr. Droid</a>					</span>
				</div>
			</div>
			<div class='post-date'>
				<time pubdate datetime="2017-08-30T15:13:46+00:00"><span class="comment-day">August 30, 2017</span><span class="comment-time">at 3:13 pm</span></time>
			</div>
			<span class="comment-reply"><a rel='nofollow' class='comment-reply-link' href='http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?replytocom=401#respond' onclick='return addComment.moveForm( "comment-401", "401", "respond", "1211" )' aria-label='Reply to Dr. Droid'>Reply</a></span>
		</footer>
		<div class='comment-body'>
						<p>Hi Neeraja,</p>
<p>Put the below code into your service class, this code will your widget run even after you close your app or clear app from recent:</p>
<p>@Override<br />
public int onStartCommand(Intent intent, int flags, int startId) {<br />
    return START_STICKY;<br />
}</p>
<p>Thanks</p>
		</div>
	</article>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<article class="comment even thread-odd thread-alt depth-1 comment" id="li-comment-411">
		<footer>
			<div class='comment-helper-absolute'>
				<div class='avatar'>
					<img alt='' src='http://1.gravatar.com/avatar/7f5a6d262dfe80299614961ca16e1c00?s=61&amp;d=mm&amp;r=g' srcset='http://1.gravatar.com/avatar/7f5a6d262dfe80299614961ca16e1c00?s=122&amp;d=mm&amp;r=g 2x' class='avatar avatar-61 photo' height='61' width='61' />				</div>
				<div class='post-author'>
					By					<span>
						Yusuf					</span>
				</div>
			</div>
			<div class='post-date'>
				<time pubdate datetime="2017-09-07T12:46:50+00:00"><span class="comment-day">September 7, 2017</span><span class="comment-time">at 12:46 pm</span></time>
			</div>
			<span class="comment-reply"><a rel='nofollow' class='comment-reply-link' href='http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/?replytocom=411#respond' onclick='return addComment.moveForm( "comment-411", "411", "respond", "1211" )' aria-label='Reply to Yusuf'>Reply</a></span>
		</footer>
		<div class='comment-body'>
						<p>Thanks for this awesome tutorial. Sir can you answer me please. I have EditText in my expanded view, is it possible to open soft keyboard when edittext focused? I can&#8217;t open the soft keyboard in OS home screen</p>
		</div>
	</article>
	</li><!-- #comment-## -->

					</section>
	
	
	<section class='leave-comment'>
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/#respond" style="display:none;">Cancel Comment</a></small></h3>				<form action="http://www.androhub.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<div class="separator"><div></div></div>
			<div class="input-field text-area">
				<div>
					Comment
					<span>(required)</span>
				</div>
				<div class="input-style dlight-grey sc-input">
					<textarea aria-required="true" rows="1" cols="1" name="comment" id="comment"  aria-required='true'></textarea>
				</div>
			</div><div><p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code class=&quot;&quot; title=&quot;&quot; data-url=&quot;&quot;&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre class=&quot;&quot; title=&quot;&quot; data-url=&quot;&quot;&gt; &lt;span class=&quot;&quot; title=&quot;&quot; data-url=&quot;&quot;&gt; </code></p></div>
					<div class="input-field">
						<div>
							Name <span>(required)</span>
						</div>
						<div class="input-style dlight-grey sc-input">
							<input id="author" type="text"  aria-required='true' size="20" value="" name="author">
						</div>
					</div>

					<div class="input-field">
						<div>
							Email <span>(required)</span>
						</div>
						<div class="input-style dlight-grey sc-input">
							<input id="email" name="email" type="text" value="" size="20" aria-required='true' />
						</div>
					</div>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="SENT" /> <input type='hidden' name='comment_post_ID' value='1211' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="b0f172d566" /></p>
    <style type="text/css">
      .comment-image-captcha {
        margin-bottom: 20px;
      }
      .comment-image-captcha table {
        border-width: 0;
        border: 0;
        padding: 0;
        margin: 0;
      }
      .comment-image-captcha td {
        border-width: 0;
        vertical-align: middle !important;
        padding: 0;
        margin: 0;
        background-color: transparent !important;
      }
      .comment-image-captcha div {
        margin: 0;
      }
      .image-captcha {
        display: none;
      }
      #image-captcha-input {
        width: 100% !important;
        box-sizing: border-box;
        height: auto !important;;
      }
      #image-captcha-refresh {
        width: 20px;
        height: 20px;
        cursor: pointer;
        position: relative;
      }
      #image-captcha-block{
        margin-right: 10px;
        background-color: #ffffff;
      }
      #image-captcha-refresh img {
        width: 20px;
      }
    </style>
    <div class="comment-image-captcha">
      <table style="width: 100%;" class="image-captcha">
        <tr>
          <td style="width: 77px; vertical-align: bottom;">
            <div id="image-captcha-block" style="border: 1px solid #DDDDDD; width: 75px; height: 75px;"><img style="padding: 5px;" src="http://www.androhub.com/wp-content/plugins/image-captcha/images/06-57.png"></div>
          </td>
          <td style="vertical-align: bottom;">
            <table style="width: 100%">
              <tr>
                <td colspan="2"><label for="image-captcha-input">Object in the image</label></td>
              </tr>
              <tr>
                <td style="vertical-align: bottom;">
                  <input style="margin-bottom: 0px;" type="text" class="input" id="image-captcha-input" name="image-captcha-input">
                </td>
                <td style="vertical-align: middle; width: 35px; text-align: center;">
                  <span id="image-captcha-refresh"><img src="http://www.androhub.com/wp-content/plugins/image-captcha/assets/refresh.png"></span>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
    <!--<div class="comment-image-captcha">
      <table class="image-captcha">
          <tr>
            <td style="width: 77px; vertical-align: bottom">

            </td>
            <td style="vertical-align: bottom;">
              <label for="image-captcha-input">Object in the image</label>
              <table style="display: block;">
                <tr>
                  <td><input style="margin-bottom: 0px;" type="text" value="" class="input" id="image-captcha-input" name="image-captcha-input"></td>
                  <td><div id="image-captcha-refresh"><img src="http://www.androhub.com/wp-content/plugins/image-captcha/assets/refresh.png"></div></td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </div>--><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="13"/></p>				</form>
					</div><!-- #respond -->
			</section>							</div>
		</div>
				<aside class='right-sidebar grid_3'>
	<section id="search-2" class="widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://www.androhub.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></section><section id="facebook-likebox-2" class="widget_facebook_likebox">		<div id="fb-root"></div>
		<div class="fb-page" data-href="https://www.facebook.com/androhubtutorial/" data-width="340"  data-height="432" data-hide-cover="false" data-show-facepile="true" data-show-posts="false">
		<div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/androhubtutorial/"><a href="https://www.facebook.com/androhubtutorial/"></a></blockquote></div>
		</div>
		</section>			<section id="wp_subscribe-2" class="wp_subscribe">	
		<div id="wp-subscribe" class="wp-subscribe-wrap wp-subscribe wp-subscribe-1" data-thanks_page="0" data-thanks_page_url="" data-thanks_page_new_window="0">

			<h4 class="title"></h4>

			<p class="text">Subscribe to our mailing list and get interesting stuff and updates to your email inbox. We don't Spam.</p>

			
			<form action="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head?name=android-floating-widget-like-facebook-messenger-chat-head" method="post" class="wp-subscribe-form wp-subscribe-mailchimp" id="wp-subscribe-form-1">

				
				<input class="regular-text email-field" type="text" name="email" placeholder="Enter your email here">

				<input type="hidden" name="form_type" value="widget">

				<input type="hidden" name="service" value="mailchimp">

				<input type="hidden" name="widget" value="wp_subscribe-2">

				<input class="submit" type="submit" name="submit" value="Sign Up Now">

			</form>

			
			<div class="wp-subscribe-loader">
				<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
					<path fill="" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">
						<animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"/>
					</path>
				</svg>
			</div>

			<p class="thanks">Thank you for subscribing.</p>
			<p class="error">Something went wrong.</p>
			<div class="clear"></div>

			<p class="footer-text">We respect your privacy and take protecting it seriously.</p>

		</div>

			</section>	
		<section id="recent-posts-2" class="widget_recent_entries">		<h3>Recent Posts</h3>		<ul>
					<li>
				<a href="http://www.androhub.com/authenticate-using-google-sign-in-on-android/">Authenticate Using Google Sign-In on Android</a>
						</li>
					<li>
				<a href="http://www.androhub.com/implementing-android-app-shortcuts/">Implementing Android App Shortcuts</a>
						</li>
					<li>
				<a href="http://www.androhub.com/implement-youtube-player-fragment-android-app/">How to implement Youtube Player Fragment in Android App</a>
						</li>
					<li>
				<a href="http://www.androhub.com/how-to-show-youtube-video-thumbnail-play-youtube-video-in-android-app/">How to show Youtube Video Thumbnail &#038; Play Youtube Video in Android App</a>
						</li>
					<li>
				<a href="http://www.androhub.com/android-confirm-credential-security-lock/">Android Confirm Credential (Security Lock)</a>
						</li>
				</ul>
		</section>		<section id="recent-comments-2" class="widget_recent_comments"><h3>Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://androhub.com/' rel='external nofollow' class='url'>Dr. Droid</a></span> on <a href="http://www.androhub.com/android-expandablelistview/#comment-478">Android ExpandableListView</a></li><li class="recentcomments"><span class="comment-author-link">Mrittunjay</span> on <a href="http://www.androhub.com/android-expandablelistview/#comment-477">Android ExpandableListView</a></li><li class="recentcomments"><span class="comment-author-link">Lawrence</span> on <a href="http://www.androhub.com/android-download-files-save/#comment-476">Android Download Files &#038; Save</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://androhub.com/' rel='external nofollow' class='url'>Dr. Droid</a></span> on <a href="http://www.androhub.com/login-signup-and-forgot-password-screen-design-android/#comment-475">Login, SignUp and Forgot Password Screen Design Android</a></li><li class="recentcomments"><span class="comment-author-link">fawad azam</span> on <a href="http://www.androhub.com/login-signup-and-forgot-password-screen-design-android/#comment-474">Login, SignUp and Forgot Password Screen Design Android</a></li></ul></section><section id="archives-2" class="widget_archive"><h3>Archives</h3>		<ul>
			<li><a href='http://www.androhub.com/2017/12/'>December 2017</a></li>
	<li><a href='http://www.androhub.com/2017/11/'>November 2017</a></li>
	<li><a href='http://www.androhub.com/2017/10/'>October 2017</a></li>
	<li><a href='http://www.androhub.com/2017/07/'>July 2017</a></li>
	<li><a href='http://www.androhub.com/2017/06/'>June 2017</a></li>
	<li><a href='http://www.androhub.com/2017/05/'>May 2017</a></li>
	<li><a href='http://www.androhub.com/2017/04/'>April 2017</a></li>
	<li><a href='http://www.androhub.com/2017/03/'>March 2017</a></li>
	<li><a href='http://www.androhub.com/2017/02/'>February 2017</a></li>
	<li><a href='http://www.androhub.com/2017/01/'>January 2017</a></li>
	<li><a href='http://www.androhub.com/2016/08/'>August 2016</a></li>
	<li><a href='http://www.androhub.com/2016/07/'>July 2016</a></li>
	<li><a href='http://www.androhub.com/2016/06/'>June 2016</a></li>
	<li><a href='http://www.androhub.com/2016/04/'>April 2016</a></li>
	<li><a href='http://www.androhub.com/2016/03/'>March 2016</a></li>
	<li><a href='http://www.androhub.com/2015/12/'>December 2015</a></li>
	<li><a href='http://www.androhub.com/2015/11/'>November 2015</a></li>
	<li><a href='http://www.androhub.com/2015/10/'>October 2015</a></li>
	<li><a href='http://www.androhub.com/2015/09/'>September 2015</a></li>
	<li><a href='http://www.androhub.com/2015/08/'>August 2015</a></li>
	<li><a href='http://www.androhub.com/2015/07/'>July 2015</a></li>
	<li><a href='http://www.androhub.com/2015/06/'>June 2015</a></li>
	<li><a href='http://www.androhub.com/2015/05/'>May 2015</a></li>
	<li><a href='http://www.androhub.com/2015/04/'>April 2015</a></li>
		</ul>
		</section><section id="categories-2" class="widget_categories"><h3>Categories</h3>		<ul>
	<li class="cat-item cat-item-2"><a href="http://www.androhub.com/category/android-actionbar/" >Android Actionbar</a>
</li>
	<li class="cat-item cat-item-500"><a href="http://www.androhub.com/category/android-advanced/" >Android Advanced</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://www.androhub.com/category/android-animations/" >Android Animations</a>
</li>
	<li class="cat-item cat-item-562"><a href="http://www.androhub.com/category/android-app-shortcuts/" >Android App Shortcuts</a>
</li>
	<li class="cat-item cat-item-541"><a href="http://www.androhub.com/category/android-authentication/" >Android Authentication</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://www.androhub.com/category/android-autocomplete/" >Android AutoComplete</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://www.androhub.com/category/android-basics/" >Android Basics</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://www.androhub.com/category/android-bluetooth/" >Android Bluetooth</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://www.androhub.com/category/android-cardview/" >Android CardView</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://www.androhub.com/category/android-clocks/" >Android Clocks</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://www.androhub.com/category/android-contacts/" >Android Contacts</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://www.androhub.com/category/android-content-provider/" >Android Content Provider</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://www.androhub.com/category/android-custom-font/" >Android Custom Font</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://www.androhub.com/category/android-custom-view/" >Android Custom View</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://www.androhub.com/category/android-database/" >Android Database</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://www.androhub.com/category/android-dialogs/" >Android Dialogs</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://www.androhub.com/category/android-download-files/" >Android Download Files</a>
</li>
	<li class="cat-item cat-item-16"><a href="http://www.androhub.com/category/android-drawer/" >Android Drawer</a>
</li>
	<li class="cat-item cat-item-17"><a href="http://www.androhub.com/category/android-expandablelistview/" >Android ExpandableListView</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://www.androhub.com/category/android-file/" >Android File</a>
</li>
	<li class="cat-item cat-item-489"><a href="http://www.androhub.com/category/android-fingerprint/" >Android FingerPrint</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://www.androhub.com/category/android-fragment/" >Android Fragment</a>
</li>
	<li class="cat-item cat-item-20"><a href="http://www.androhub.com/category/android-gestures/" >Android Gestures</a>
</li>
	<li class="cat-item cat-item-21"><a href="http://www.androhub.com/category/android-gps/" >Android GPS</a>
</li>
	<li class="cat-item cat-item-22"><a href="http://www.androhub.com/category/android-image-picker/" >Android Image Picker</a>
</li>
	<li class="cat-item cat-item-23"><a href="http://www.androhub.com/category/android-internet-connection/" >Android Internet Connection</a>
</li>
	<li class="cat-item cat-item-24"><a href="http://www.androhub.com/category/android-json/" >Android JSON</a>
</li>
	<li class="cat-item cat-item-25"><a href="http://www.androhub.com/category/android-listview/" >Android ListView</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://www.androhub.com/category/android-material-design/" >Android Material Design</a>
</li>
	<li class="cat-item cat-item-27"><a href="http://www.androhub.com/category/android-navigationdrawer/" >Android NavigationDrawer</a>
</li>
	<li class="cat-item cat-item-28"><a href="http://www.androhub.com/category/android-notification-bar/" >Android Notification Bar</a>
</li>
	<li class="cat-item cat-item-493"><a href="http://www.androhub.com/category/android-palette/" >Android Palette</a>
</li>
	<li class="cat-item cat-item-29"><a href="http://www.androhub.com/category/android-progressbar/" >Android ProgressBar</a>
</li>
	<li class="cat-item cat-item-30"><a href="http://www.androhub.com/category/android-ratingbar/" >Android RatingBar</a>
</li>
	<li class="cat-item cat-item-31"><a href="http://www.androhub.com/category/android-recyclerview/" >Android RecyclerView</a>
</li>
	<li class="cat-item cat-item-32"><a href="http://www.androhub.com/category/android-seekbar/" >Android SeekBar</a>
</li>
	<li class="cat-item cat-item-34"><a href="http://www.androhub.com/category/android-spinner/" >Android Spinner</a>
</li>
	<li class="cat-item cat-item-35"><a href="http://www.androhub.com/category/android-stackview/" >Android StackView</a>
</li>
	<li class="cat-item cat-item-36"><a href="http://www.androhub.com/category/android-swiperefresh-layout/" >Android SwipeRefresh Layout</a>
</li>
	<li class="cat-item cat-item-37"><a href="http://www.androhub.com/category/android-tabs/" >Android Tabs</a>
</li>
	<li class="cat-item cat-item-38"><a href="http://www.androhub.com/category/android-textswitcher/" >Android TextSwitcher</a>
</li>
	<li class="cat-item cat-item-39"><a href="http://www.androhub.com/category/android-toolbar/" >Android ToolBar</a>
</li>
	<li class="cat-item cat-item-40"><a href="http://www.androhub.com/category/android-ui-design/" >Android UI Design</a>
</li>
	<li class="cat-item cat-item-41"><a href="http://www.androhub.com/category/android-viewanimator/" >Android ViewAnimator</a>
</li>
	<li class="cat-item cat-item-42"><a href="http://www.androhub.com/category/android-viewpager/" >Android ViewPager</a>
</li>
	<li class="cat-item cat-item-43"><a href="http://www.androhub.com/category/android-viewswitcher/" >Android ViewSwitcher</a>
</li>
	<li class="cat-item cat-item-44"><a href="http://www.androhub.com/category/android-wifi/" >Android WIFI</a>
</li>
	<li class="cat-item cat-item-446"><a href="http://www.androhub.com/category/google-maps/" >Google Maps</a>
</li>
	<li class="cat-item cat-item-45"><a href="http://www.androhub.com/category/http-requests/" >Http Requests</a>
</li>
	<li class="cat-item cat-item-46"><a href="http://www.androhub.com/category/intent/" >Intent</a>
</li>
		</ul>
</section></aside>	</div>
</div>
<aside class='wrapper lighter-grey'>
	<div class='container'>
		<div class='grid_9'>
			<div class='posts-container'>
				<div class='post-single-pagination'>
					<a href="http://www.androhub.com/android-working-palette/" rel="prev">previous post</a><a href="http://www.androhub.com/android-drag-and-drop/" rel="next">next post</a>
				</div>
			</div>
		</div>
	</div>
</aside>
					<footer>
			<div class='wrapper grey'>
				<div class='container'>
						<div class='grid_4'>
			</div>
	<div class='grid_4'>
			</div>
	<div class='grid_4'>
			</div>
				</div>
			</div>
			<div class='wrapper dark-grey copyright-bar'>
				<div class='container'>
					<div class='grid_12'>
						<span class='copyright'>Copyright ® 2015 - 2017 Androhub.com | All rights reserved.</span><span class="copyright" style="float: right;">Powered by <a href="http://pacdevelopers.com/" target="_blank">PAC Developers</a></span>
					</div>
				</div>
			</div>
		</footer>
		<a id="back_to_top" href="#"></a>
					<div style="display:none">
	<div class="grofile-hash-map-ebab67fae339761312d475ef8e13e63d">
	</div>
	<div class="grofile-hash-map-ebab67fae339761312d475ef8e13e63d">
	</div>
	<div class="grofile-hash-map-8a5e45564bf61584217aa8077a59c742">
	</div>
	<div class="grofile-hash-map-7f5a6d262dfe80299614961ca16e1c00">
	</div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"http:\/\/www.androhub.com\/android-floating-widget-like-facebook-messenger-chat-head\/":1211};
	</script>
	<div id="sharing_email" style="display: none;">
		<form action="http://www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off" />
			<script>jQuery( document ).ready( function(){ document.getElementById('jetpack-source_f_name').value = '' });</script>
			
			<img style="float: right; display: none" class="loading" src="http://www.androhub.com/wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a rel="nofollow" href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
		<link rel='stylesheet' id='wp-subscribe-css'  href='http://www.androhub.com/wp-content/plugins/wp-subscribe/assets/css/wp-subscribe-form.css?ver=4.5.12' type='text/css' media='all' />
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/jetpack/modules/photon/photon.js?ver=20130122'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201801'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2018Janaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.5.12'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/main.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/jquery.nicescroll.min.js'></script>
<script type='text/javascript' src='http://heartcode-canvasloader.googlecode.com/files/heartcode-canvasloader-min-0.9.1.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/jquery.prettyPhoto.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/jquery.flexslider-min.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/zozo.tabs.min.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/jquery.isotope.min.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/themes/circles/js/jquery.iosslider.min.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-includes/js/comment-reply.min.js?ver=4.5.12'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var jpfbembed = {"appid":"249643311490","locale":"en_US"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/jetpack/_inc/facebook-embed.js'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/youtube-embed-plus/scripts/fitvids.min.js?ver=4.5.12'></script>
<script type='text/javascript' src='http://www.androhub.com/wp-includes/js/wp-embed.min.js?ver=4.5.12'></script>
<script async="async" type='text/javascript' src='http://www.androhub.com/wp-content/plugins/akismet/_inc/form.js?ver=4.0.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wp_subscribe = {"ajaxurl":"http:\/\/www.androhub.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/wp-subscribe/assets/js/wp-subscribe-form.js?ver=4.5.12'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.androhub.com/wp-content/plugins/jetpack/modules/sharedaddy/sharing.js?ver=4.4.2'></script>
<script type='text/javascript'>
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-google-plus-1', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-linkedin', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-tumblr', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtumblr', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-pocket', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcompocket', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-telegram', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtelegram', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-skype', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomskype', 'menubar=1,resizable=1,width=305,height=665' );
				return false;
			});
</script>
<script type='text/javascript' src='http://stats.wp.com/e-201801.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.4.2',blog:'113004364',post:'1211',tz:'0',srv:'www.androhub.com'} ]);
	_stq.push([ 'clickTrackerInit', '113004364', '1211' ]);
</script>
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-63664503-1']);
			_gaq.push(['_trackPageview']);

			(function() {
			  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
			<div class="media_for_js"></div>
	</body>

<!-- Mirrored from www.androhub.com/android-floating-widget-like-facebook-messenger-chat-head/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Jan 2018 03:28:58 GMT -->
</html>